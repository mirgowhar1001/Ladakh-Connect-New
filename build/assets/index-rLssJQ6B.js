(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function Hx(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Hm={exports:{}},mc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function yA(){if(k_)return mc;k_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:s,type:r,key:d,ref:o!==void 0?o:null,props:c}}return mc.Fragment=e,mc.jsx=n,mc.jsxs=n,mc}var O_;function vA(){return O_||(O_=1,Hm.exports=yA()),Hm.exports}var h=vA(),Fm={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function _A(){if(M_)return Le;M_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),T=Symbol.iterator;function D(j){return j===null||typeof j!="object"?null:(j=T&&j[T]||j["@@iterator"],typeof j=="function"?j:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,U={};function oe(j,G,le){this.props=j,this.context=G,this.refs=U,this.updater=le||q}oe.prototype.isReactComponent={},oe.prototype.setState=function(j,G){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,G,"setState")},oe.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function ae(){}ae.prototype=oe.prototype;function de(j,G,le){this.props=j,this.context=G,this.refs=U,this.updater=le||q}var fe=de.prototype=new ae;fe.constructor=de,X(fe,oe.prototype),fe.isPureReactComponent=!0;var Oe=Array.isArray;function ge(){}var k={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function A(j,G,le){var re=le.ref;return{$$typeof:s,type:j,key:G,ref:re!==void 0?re:null,props:le}}function C(j,G){return A(j.type,G,j.props)}function R(j){return typeof j=="object"&&j!==null&&j.$$typeof===s}function M(j){var G={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(le){return G[le]})}var N=/\/+/g;function we(j,G){return typeof j=="object"&&j!==null&&j.key!=null?M(""+j.key):G.toString(36)}function be(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(ge,ge):(j.status="pending",j.then(function(G){j.status==="pending"&&(j.status="fulfilled",j.value=G)},function(G){j.status==="pending"&&(j.status="rejected",j.reason=G)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function F(j,G,le,re,te){var Q=typeof j;(Q==="undefined"||Q==="boolean")&&(j=null);var ce=!1;if(j===null)ce=!0;else switch(Q){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(j.$$typeof){case s:case e:ce=!0;break;case x:return ce=j._init,F(ce(j._payload),G,le,re,te)}}if(ce)return te=te(j),ce=re===""?"."+we(j,0):re,Oe(te)?(le="",ce!=null&&(le=ce.replace(N,"$&/")+"/"),F(te,G,le,"",function(nt){return nt})):te!=null&&(R(te)&&(te=C(te,le+(te.key==null||j&&j.key===te.key?"":(""+te.key).replace(N,"$&/")+"/")+ce)),G.push(te)),1;ce=0;var Ne=re===""?".":re+":";if(Oe(j))for(var xe=0;xe<j.length;xe++)re=j[xe],Q=Ne+we(re,xe),ce+=F(re,G,le,Q,te);else if(xe=D(j),typeof xe=="function")for(j=xe.call(j),xe=0;!(re=j.next()).done;)re=re.value,Q=Ne+we(re,xe++),ce+=F(re,G,le,Q,te);else if(Q==="object"){if(typeof j.then=="function")return F(be(j),G,le,re,te);throw G=String(j),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return ce}function se(j,G,le){if(j==null)return j;var re=[],te=0;return F(j,re,"","",function(Q){return G.call(le,Q,te++)}),re}function me(j){if(j._status===-1){var G=j._result;G=G(),G.then(function(le){(j._status===0||j._status===-1)&&(j._status=1,j._result=le)},function(le){(j._status===0||j._status===-1)&&(j._status=2,j._result=le)}),j._status===-1&&(j._status=0,j._result=G)}if(j._status===1)return j._result.default;throw j._result}var Se=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Ve={map:se,forEach:function(j,G,le){se(j,function(){G.apply(this,arguments)},le)},count:function(j){var G=0;return se(j,function(){G++}),G},toArray:function(j){return se(j,function(G){return G})||[]},only:function(j){if(!R(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Le.Activity=w,Le.Children=Ve,Le.Component=oe,Le.Fragment=n,Le.Profiler=o,Le.PureComponent=de,Le.StrictMode=r,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Le.__COMPILER_RUNTIME={__proto__:null,c:function(j){return k.H.useMemoCache(j)}},Le.cache=function(j){return function(){return j.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(j,G,le){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var re=X({},j.props),te=j.key;if(G!=null)for(Q in G.key!==void 0&&(te=""+G.key),G)!I.call(G,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&G.ref===void 0||(re[Q]=G[Q]);var Q=arguments.length-2;if(Q===1)re.children=le;else if(1<Q){for(var ce=Array(Q),Ne=0;Ne<Q;Ne++)ce[Ne]=arguments[Ne+2];re.children=ce}return A(j.type,te,re)},Le.createContext=function(j){return j={$$typeof:d,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:c,_context:j},j},Le.createElement=function(j,G,le){var re,te={},Q=null;if(G!=null)for(re in G.key!==void 0&&(Q=""+G.key),G)I.call(G,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(te[re]=G[re]);var ce=arguments.length-2;if(ce===1)te.children=le;else if(1<ce){for(var Ne=Array(ce),xe=0;xe<ce;xe++)Ne[xe]=arguments[xe+2];te.children=Ne}if(j&&j.defaultProps)for(re in ce=j.defaultProps,ce)te[re]===void 0&&(te[re]=ce[re]);return A(j,Q,te)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(j){return{$$typeof:p,render:j}},Le.isValidElement=R,Le.lazy=function(j){return{$$typeof:x,_payload:{_status:-1,_result:j},_init:me}},Le.memo=function(j,G){return{$$typeof:y,type:j,compare:G===void 0?null:G}},Le.startTransition=function(j){var G=k.T,le={};k.T=le;try{var re=j(),te=k.S;te!==null&&te(le,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(ge,Se)}catch(Q){Se(Q)}finally{G!==null&&le.types!==null&&(G.types=le.types),k.T=G}},Le.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Le.use=function(j){return k.H.use(j)},Le.useActionState=function(j,G,le){return k.H.useActionState(j,G,le)},Le.useCallback=function(j,G){return k.H.useCallback(j,G)},Le.useContext=function(j){return k.H.useContext(j)},Le.useDebugValue=function(){},Le.useDeferredValue=function(j,G){return k.H.useDeferredValue(j,G)},Le.useEffect=function(j,G){return k.H.useEffect(j,G)},Le.useEffectEvent=function(j){return k.H.useEffectEvent(j)},Le.useId=function(){return k.H.useId()},Le.useImperativeHandle=function(j,G,le){return k.H.useImperativeHandle(j,G,le)},Le.useInsertionEffect=function(j,G){return k.H.useInsertionEffect(j,G)},Le.useLayoutEffect=function(j,G){return k.H.useLayoutEffect(j,G)},Le.useMemo=function(j,G){return k.H.useMemo(j,G)},Le.useOptimistic=function(j,G){return k.H.useOptimistic(j,G)},Le.useReducer=function(j,G,le){return k.H.useReducer(j,G,le)},Le.useRef=function(j){return k.H.useRef(j)},Le.useState=function(j){return k.H.useState(j)},Le.useSyncExternalStore=function(j,G,le){return k.H.useSyncExternalStore(j,G,le)},Le.useTransition=function(){return k.H.useTransition()},Le.version="19.2.0",Le}var V_;function rg(){return V_||(V_=1,Fm.exports=_A()),Fm.exports}var ie=rg();const bA=Hx(ie);var Gm={exports:{}},pc={},$m={exports:{}},Km={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function xA(){return P_||(P_=1,(function(s){function e(F,se){var me=F.length;F.push(se);e:for(;0<me;){var Se=me-1>>>1,Ve=F[Se];if(0<o(Ve,se))F[Se]=se,F[me]=Ve,me=Se;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var se=F[0],me=F.pop();if(me!==se){F[0]=me;e:for(var Se=0,Ve=F.length,j=Ve>>>1;Se<j;){var G=2*(Se+1)-1,le=F[G],re=G+1,te=F[re];if(0>o(le,me))re<Ve&&0>o(te,le)?(F[Se]=te,F[re]=me,Se=re):(F[Se]=le,F[G]=me,Se=G);else if(re<Ve&&0>o(te,me))F[Se]=te,F[re]=me,Se=re;else break e}}return se}function o(F,se){var me=F.sortIndex-se.sortIndex;return me!==0?me:F.id-se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var g=[],y=[],x=1,w=null,T=3,D=!1,q=!1,X=!1,U=!1,oe=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,de=typeof setImmediate<"u"?setImmediate:null;function fe(F){for(var se=n(y);se!==null;){if(se.callback===null)r(y);else if(se.startTime<=F)r(y),se.sortIndex=se.expirationTime,e(g,se);else break;se=n(y)}}function Oe(F){if(X=!1,fe(F),!q)if(n(g)!==null)q=!0,ge||(ge=!0,M());else{var se=n(y);se!==null&&be(Oe,se.startTime-F)}}var ge=!1,k=-1,I=5,A=-1;function C(){return U?!0:!(s.unstable_now()-A<I)}function R(){if(U=!1,ge){var F=s.unstable_now();A=F;var se=!0;try{e:{q=!1,X&&(X=!1,ae(k),k=-1),D=!0;var me=T;try{t:{for(fe(F),w=n(g);w!==null&&!(w.expirationTime>F&&C());){var Se=w.callback;if(typeof Se=="function"){w.callback=null,T=w.priorityLevel;var Ve=Se(w.expirationTime<=F);if(F=s.unstable_now(),typeof Ve=="function"){w.callback=Ve,fe(F),se=!0;break t}w===n(g)&&r(g),fe(F)}else r(g);w=n(g)}if(w!==null)se=!0;else{var j=n(y);j!==null&&be(Oe,j.startTime-F),se=!1}}break e}finally{w=null,T=me,D=!1}se=void 0}}finally{se?M():ge=!1}}}var M;if(typeof de=="function")M=function(){de(R)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,we=N.port2;N.port1.onmessage=R,M=function(){we.postMessage(null)}}else M=function(){oe(R,0)};function be(F,se){k=oe(function(){F(s.unstable_now())},se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(F){switch(T){case 1:case 2:case 3:var se=3;break;default:se=T}var me=T;T=se;try{return F()}finally{T=me}},s.unstable_requestPaint=function(){U=!0},s.unstable_runWithPriority=function(F,se){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var me=T;T=F;try{return se()}finally{T=me}},s.unstable_scheduleCallback=function(F,se,me){var Se=s.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Se+me:Se):me=Se,F){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=me+Ve,F={id:x++,callback:se,priorityLevel:F,startTime:me,expirationTime:Ve,sortIndex:-1},me>Se?(F.sortIndex=me,e(y,F),n(g)===null&&F===n(y)&&(X?(ae(k),k=-1):X=!0,be(Oe,me-Se))):(F.sortIndex=Ve,e(g,F),q||D||(q=!0,ge||(ge=!0,M()))),F},s.unstable_shouldYield=C,s.unstable_wrapCallback=function(F){var se=T;return function(){var me=T;T=se;try{return F.apply(this,arguments)}finally{T=me}}}})(Km)),Km}var L_;function wA(){return L_||(L_=1,$m.exports=xA()),$m.exports}var Qm={exports:{}},vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function EA(){if(U_)return vn;U_=1;var s=rg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,x){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:y,implementation:x}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vn.createPortal=function(g,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,x)},vn.flushSync=function(g){var y=d.T,x=r.p;try{if(d.T=null,r.p=2,g)return g()}finally{d.T=y,r.p=x,r.d.f()}},vn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},vn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},vn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var x=y.as,w=p(x,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,D=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:D}):x==="script"&&r.d.X(g,{crossOrigin:w,integrity:T,fetchPriority:D,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},vn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=p(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},vn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,w=p(x,y.crossOrigin);r.d.L(g,x,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},vn.preloadModule=function(g,y){if(typeof g=="string")if(y){var x=p(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},vn.requestFormReset=function(g){r.d.r(g)},vn.unstable_batchedUpdates=function(g,y){return g(y)},vn.useFormState=function(g,y,x){return d.H.useFormState(g,y,x)},vn.useFormStatus=function(){return d.H.useHostTransitionStatus()},vn.version="19.2.0",vn}var z_;function TA(){if(z_)return Qm.exports;z_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Qm.exports=EA(),Qm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function SA(){if(B_)return pc;B_=1;var s=wA(),e=rg(),n=TA();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(r(188))}function y(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return g(f),t;if(m===l)return g(f),i;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=m;else{for(var _=!1,E=f.child;E;){if(E===a){_=!0,a=f,l=m;break}if(E===l){_=!0,l=f,a=m;break}E=E.sibling}if(!_){for(E=m.child;E;){if(E===a){_=!0,a=m,l=f;break}if(E===l){_=!0,l=m,a=f;break}E=E.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function x(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=x(t),i!==null)return i;t=t.sibling}return null}var w=Object.assign,T=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),de=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),Oe=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=R&&t[R]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function we(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case X:return"Fragment";case oe:return"Profiler";case U:return"StrictMode";case Oe:return"Suspense";case ge:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case q:return"Portal";case de:return t.displayName||"Context";case ae:return(t._context.displayName||"Context")+".Consumer";case fe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return i=t.displayName||null,i!==null?i:we(t.type)||"Memo";case I:i=t._payload,t=t._init;try{return we(t(i))}catch{}}return null}var be=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Se=[],Ve=-1;function j(t){return{current:t}}function G(t){0>Ve||(t.current=Se[Ve],Se[Ve]=null,Ve--)}function le(t,i){Ve++,Se[Ve]=t.current,t.current=i}var re=j(null),te=j(null),Q=j(null),ce=j(null);function Ne(t,i){switch(le(Q,i),le(te,t),le(re,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?n_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=n_(i),t=s_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(re),le(re,t)}function xe(){G(re),G(te),G(Q)}function nt(t){t.memoizedState!==null&&le(ce,t);var i=re.current,a=s_(i,t.type);i!==a&&(le(te,t),le(re,a))}function Fe(t){te.current===t&&(G(re),G(te)),ce.current===t&&(G(ce),uc._currentValue=me)}var wt,tn;function Bt(t){if(wt===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);wt=i&&i[1]||"",tn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wt+t+tn}var yn=!1;function mi(t,i){if(!t||yn)return"";yn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var H=K}Reflect.construct(t,[],ee)}else{try{ee.call()}catch(K){H=K}t.call(ee.prototype)}}else{try{throw Error()}catch(K){H=K}(ee=t())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&H&&typeof K.stack=="string")return[K.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],E=m[1];if(_&&E){var O=_.split(`
`),B=E.split(`
`);for(f=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(l===O.length||f===B.length)for(l=O.length-1,f=B.length-1;1<=l&&0<=f&&O[l]!==B[f];)f--;for(;1<=l&&0<=f;l--,f--)if(O[l]!==B[f]){if(l!==1||f!==1)do if(l--,f--,0>f||O[l]!==B[f]){var Y=`
`+O[l].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=l&&0<=f);break}}}finally{yn=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Bt(a):""}function Wr(t,i){switch(t.tag){case 26:case 27:case 5:return Bt(t.type);case 16:return Bt("Lazy");case 13:return t.child!==i&&i!==null?Bt("Suspense Fallback"):Bt("Suspense");case 19:return Bt("SuspenseList");case 0:case 15:return mi(t.type,!1);case 11:return mi(t.type.render,!1);case 1:return mi(t.type,!0);case 31:return Bt("Activity");default:return""}}function jn(t){try{var i="",a=null;do i+=Wr(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Rt=Object.prototype.hasOwnProperty,Vt=s.unstable_scheduleCallback,qs=s.unstable_cancelCallback,ml=s.unstable_shouldYield,$a=s.unstable_requestPaint,cn=s.unstable_now,pi=s.unstable_getCurrentPriorityLevel,Jr=s.unstable_ImmediatePriority,Zr=s.unstable_UserBlockingPriority,W=s.unstable_NormalPriority,Ae=s.unstable_LowPriority,Re=s.unstable_IdlePriority,ct=s.log,ue=s.unstable_setDisableYieldValue,Te=null,Me=null;function yt(t){if(typeof ct=="function"&&ue(t),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(Te,t)}catch{}}var Qe=Math.clz32?Math.clz32:Hn,St=Math.log,ke=Math.LN2;function Hn(t){return t>>>=0,t===0?32:31-(St(t)/ke|0)|0}var An=256,gi=262144,_t=4194304;function Fn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Es(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~m,l!==0?f=Fn(l):(_&=E,_!==0?f=Fn(_):a||(a=E&~t,a!==0&&(f=Fn(a))))):(E=l&~m,E!==0?f=Fn(E):_!==0?f=Fn(_):a||(a=l&~t,a!==0&&(f=Fn(a)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,a=i&-i,m>=a||m===32&&(a&4194048)!==0)?i:f}function Ts(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function $d(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tu(){var t=_t;return _t<<=1,(_t&62914560)===0&&(_t=4194304),t}function Hs(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function ea(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Kd(t,i,a,l,f,m){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,O=t.expirationTimes,B=t.hiddenUpdates;for(a=_&~a;0<a;){var Y=31-Qe(a),ee=1<<Y;E[Y]=0,O[Y]=-1;var H=B[Y];if(H!==null)for(B[Y]=null,Y=0;Y<H.length;Y++){var K=H[Y];K!==null&&(K.lane&=-536870913)}a&=~ee}l!==0&&ta(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~i))}function ta(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Qe(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function pl(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Qe(a),f=1<<l;f&i|t[l]&i&&(t[l]|=i),a&=~f}}function gl(t,i){var a=i&-i;return a=(a&42)!==0?1:na(a),(a&(t.suspendedLanes|i))!==0?0:a}function na(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function yi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function nu(){var t=se.p;return t!==0?t:(t=window.event,t===void 0?32:A_(t.type))}function Ss(t,i){var a=se.p;try{return se.p=t,i()}finally{se.p=a}}var As=Math.random().toString(36).slice(2),qt="__reactFiber$"+As,nn="__reactProps$"+As,Fs="__reactContainer$"+As,Ka="__reactEvents$"+As,Qd="__reactListeners$"+As,su="__reactHandles$"+As,iu="__reactResources$"+As,Gs="__reactMarker$"+As;function Qa(t){delete t[qt],delete t[nn],delete t[Ka],delete t[Qd],delete t[su]}function $s(t){var i=t[qt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Fs]||a[qt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=u_(t);t!==null;){if(a=t[qt])return a;t=u_(t)}return i}t=a,a=t.parentNode}return null}function ls(t){if(t=t[qt]||t[Fs]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Gn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function Ks(t){var i=t[iu];return i||(i=t[iu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ht(t){t[Gs]=!0}var yl=new Set,vl={};function Qs(t,i){Ys(t,i),Ys(t+"Capture",i)}function Ys(t,i){for(vl[t]=i,t=0;t<i.length;t++)yl.add(i[t])}var _l=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bl={},xl={};function ru(t){return Rt.call(xl,t)?!0:Rt.call(bl,t)?!1:_l.test(t)?xl[t]=!0:(bl[t]=!0,!1)}function Ya(t,i,a){if(ru(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function $n(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Ft(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function sn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wi(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function wl(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ut(t){if(!t._valueTracker){var i=Wi(t)?"checked":"value";t._valueTracker=wl(t,i,""+t[i])}}function sa(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Wi(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Xs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ia=/[\n"\\]/g;function kn(t){return t.replace(ia,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Xa(t,i,a,l,f,m,_,E){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+sn(i)):t.value!==""+sn(i)&&(t.value=""+sn(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?El(t,_,sn(i)):a!=null?El(t,_,sn(a)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+sn(E):t.removeAttribute("name")}function au(t,i,a,l,f,m,_,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){ut(t);return}a=a!=null?""+sn(a):"",i=i!=null?""+sn(i):a,E||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),ut(t)}function El(t,i,a){i==="number"&&Xs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ji(t,i,a,l){if(t=t.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=i.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+sn(a),i=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function ou(t,i,a){if(i!=null&&(i=""+sn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+sn(a):""}function Zi(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(be(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=sn(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),ut(t)}function On(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var lu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tl(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||lu.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Sl(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Tl(t,f,l)}else for(var m in i)i.hasOwnProperty(m)&&Tl(t,m,i[m])}function Wa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),er=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ja(t){return er.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ns(){}var Al=null;function cs(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tr=null,Ws=null;function ra(t){var i=ls(t);if(i&&(t=i.stateNode)){var a=t[nn]||null;e:switch(t=i.stateNode,i.type){case"input":if(Xa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+kn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var f=l[nn]||null;if(!f)throw Error(r(90));Xa(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&sa(l)}break e;case"textarea":ou(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ji(t,!!a.multiple,i,!1)}}}var Za=!1;function nr(t,i,a){if(Za)return t(i,a);Za=!0;try{var l=t(i);return l}finally{if(Za=!1,(tr!==null||Ws!==null)&&(nh(),tr&&(i=tr,t=Ws,Ws=tr=null,ra(i),t)))for(i=0;i<t.length;i++)ra(t[i])}}function Rs(t,i){var a=t.stateNode;if(a===null)return null;var l=a[nn]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),aa=!1;if(us)try{var ft={};Object.defineProperty(ft,"passive",{get:function(){aa=!0}}),window.addEventListener("test",ft,ft),window.removeEventListener("test",ft,ft)}catch{aa=!1}var Js=null,Nl=null,oa=null;function Rl(){if(oa)return oa;var t,i=Nl,a=i.length,l,f="value"in Js?Js.value:Js.textContent,m=f.length;for(t=0;t<a&&i[t]===f[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===f[m-l];l++);return oa=f.slice(t,1<l?1-l:void 0)}function la(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function vi(){return!0}function Is(){return!1}function un(t){function i(a,l,f,m,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?vi:Is,this.isPropagationStopped=Is,this}return w(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=vi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=vi)},persist:function(){},isPersistent:vi}),i}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zs=un(_i),sr=w({},_i,{view:0,detail:0}),Il=un(sr),ir,eo,ei,to=w({},sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ei&&(ei&&t.type==="mousemove"?(ir=t.screenX-ei.screenX,eo=t.screenY-ei.screenY):eo=ir=0,ei=t),ir)},movementY:function(t){return"movementY"in t?t.movementY:eo}}),Cl=un(to),ca=w({},to,{dataTransfer:0}),uu=un(ca),hu=w({},sr,{relatedTarget:0}),ua=un(hu),Dl=w({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),du=un(Dl),no=w({},_i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fu=un(no),mu=w({},_i,{data:0}),ti=un(mu),pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=yu[t])?!!i[t]:!1}function rr(){return vu}var Nn=w({},sr,{key:function(t){if(t.key){var i=pu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=la(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rr,charCode:function(t){return t.type==="keypress"?la(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?la(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_u=un(Nn),bu=w({},to,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bi=un(bu),u=w({},sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rr}),v=un(u),b=w({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=un(b),L=w({},to,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$=un(L),he=w({},_i,{newState:0,oldState:0}),Be=un(he),Pt=[9,13,27,32],at=us&&"CompositionEvent"in window,At=null;us&&"documentMode"in document&&(At=document.documentMode);var hs=us&&"TextEvent"in window&&!At,ni=us&&(!at||At&&8<At&&11>=At),Cs=" ",Ds=!1;function ha(t,i){switch(t){case"keyup":return Pt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function so(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var io=!1;function BT(t,i){switch(t){case"compositionend":return so(i);case"keypress":return i.which!==32?null:(Ds=!0,Cs);case"textInput":return t=i.data,t===Cs&&Ds?null:t;default:return null}}function qT(t,i){if(io)return t==="compositionend"||!at&&ha(t,i)?(t=Rl(),oa=Nl=Js=null,io=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ni&&i.locale!=="ko"?null:i.data;default:return null}}var HT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fy(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!HT[t.type]:i==="textarea"}function my(t,i,a,l){tr?Ws?Ws.push(l):Ws=[l]:tr=l,i=ch(i,"onChange"),0<i.length&&(a=new Zs("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var jl=null,kl=null;function FT(t){Xv(t,0)}function xu(t){var i=Gn(t);if(sa(i))return t}function py(t,i){if(t==="change")return i}var gy=!1;if(us){var Yd;if(us){var Xd="oninput"in document;if(!Xd){var yy=document.createElement("div");yy.setAttribute("oninput","return;"),Xd=typeof yy.oninput=="function"}Yd=Xd}else Yd=!1;gy=Yd&&(!document.documentMode||9<document.documentMode)}function vy(){jl&&(jl.detachEvent("onpropertychange",_y),kl=jl=null)}function _y(t){if(t.propertyName==="value"&&xu(kl)){var i=[];my(i,kl,t,cs(t)),nr(FT,i)}}function GT(t,i,a){t==="focusin"?(vy(),jl=i,kl=a,jl.attachEvent("onpropertychange",_y)):t==="focusout"&&vy()}function $T(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xu(kl)}function KT(t,i){if(t==="click")return xu(i)}function QT(t,i){if(t==="input"||t==="change")return xu(i)}function YT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Kn=typeof Object.is=="function"?Object.is:YT;function Ol(t,i){if(Kn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Rt.call(i,f)||!Kn(t[f],i[f]))return!1}return!0}function by(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xy(t,i){var a=by(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=by(a)}}function wy(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?wy(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Ey(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Xs(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Xs(t.document)}return i}function Wd(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var XT=us&&"documentMode"in document&&11>=document.documentMode,ro=null,Jd=null,Ml=null,Zd=!1;function Ty(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Zd||ro==null||ro!==Xs(l)||(l=ro,"selectionStart"in l&&Wd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ml&&Ol(Ml,l)||(Ml=l,l=ch(Jd,"onSelect"),0<l.length&&(i=new Zs("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=ro)))}function da(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var ao={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionrun:da("Transition","TransitionRun"),transitionstart:da("Transition","TransitionStart"),transitioncancel:da("Transition","TransitionCancel"),transitionend:da("Transition","TransitionEnd")},ef={},Sy={};us&&(Sy=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function fa(t){if(ef[t])return ef[t];if(!ao[t])return t;var i=ao[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Sy)return ef[t]=i[a];return t}var Ay=fa("animationend"),Ny=fa("animationiteration"),Ry=fa("animationstart"),WT=fa("transitionrun"),JT=fa("transitionstart"),ZT=fa("transitioncancel"),Iy=fa("transitionend"),Cy=new Map,tf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tf.push("scrollEnd");function js(t,i){Cy.set(t,i),Qs(i,[t])}var wu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ds=[],oo=0,nf=0;function Eu(){for(var t=oo,i=nf=oo=0;i<t;){var a=ds[i];ds[i++]=null;var l=ds[i];ds[i++]=null;var f=ds[i];ds[i++]=null;var m=ds[i];if(ds[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}m!==0&&Dy(a,f,m)}}function Tu(t,i,a,l){ds[oo++]=t,ds[oo++]=i,ds[oo++]=a,ds[oo++]=l,nf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function sf(t,i,a,l){return Tu(t,i,a,l),Su(t)}function ma(t,i){return Tu(t,null,null,i),Su(t)}function Dy(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&i!==null&&(f=31-Qe(a),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=a|536870912),m):null}function Su(t){if(50<sc)throw sc=0,fm=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var lo={};function eS(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(t,i,a,l){return new eS(t,i,a,l)}function rf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xi(t,i){var a=t.alternate;return a===null?(a=Qn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function jy(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Au(t,i,a,l,f,m){var _=0;if(l=t,typeof t=="function")rf(t)&&(_=1);else if(typeof t=="string")_=rA(t,a,re.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=Qn(31,a,i,f),t.elementType=A,t.lanes=m,t;case X:return pa(a.children,f,m,i);case U:_=8,f|=24;break;case oe:return t=Qn(12,a,i,f|2),t.elementType=oe,t.lanes=m,t;case Oe:return t=Qn(13,a,i,f),t.elementType=Oe,t.lanes=m,t;case ge:return t=Qn(19,a,i,f),t.elementType=ge,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case de:_=10;break e;case ae:_=9;break e;case fe:_=11;break e;case k:_=14;break e;case I:_=16,l=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=Qn(_,a,i,f),i.elementType=t,i.type=l,i.lanes=m,i}function pa(t,i,a,l){return t=Qn(7,t,l,i),t.lanes=a,t}function af(t,i,a){return t=Qn(6,t,null,i),t.lanes=a,t}function ky(t){var i=Qn(18,null,null,0);return i.stateNode=t,i}function of(t,i,a){return i=Qn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Oy=new WeakMap;function fs(t,i){if(typeof t=="object"&&t!==null){var a=Oy.get(t);return a!==void 0?a:(i={value:t,source:i,stack:jn(i)},Oy.set(t,i),i)}return{value:t,source:i,stack:jn(i)}}var co=[],uo=0,Nu=null,Vl=0,ms=[],ps=0,ar=null,si=1,ii="";function wi(t,i){co[uo++]=Vl,co[uo++]=Nu,Nu=t,Vl=i}function My(t,i,a){ms[ps++]=si,ms[ps++]=ii,ms[ps++]=ar,ar=t;var l=si;t=ii;var f=32-Qe(l)-1;l&=~(1<<f),a+=1;var m=32-Qe(i)+f;if(30<m){var _=f-f%5;m=(l&(1<<_)-1).toString(32),l>>=_,f-=_,si=1<<32-Qe(i)+f|a<<f|l,ii=m+t}else si=1<<m|a<<f|l,ii=t}function lf(t){t.return!==null&&(wi(t,1),My(t,1,0))}function cf(t){for(;t===Nu;)Nu=co[--uo],co[uo]=null,Vl=co[--uo],co[uo]=null;for(;t===ar;)ar=ms[--ps],ms[ps]=null,ii=ms[--ps],ms[ps]=null,si=ms[--ps],ms[ps]=null}function Vy(t,i){ms[ps++]=si,ms[ps++]=ii,ms[ps++]=ar,si=i.id,ii=i.overflow,ar=t}var hn=null,Et=null,et=!1,or=null,gs=!1,uf=Error(r(519));function lr(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pl(fs(i,t)),uf}function Py(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[qt]=t,i[nn]=l,a){case"dialog":Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":case"embed":Ke("load",i);break;case"video":case"audio":for(a=0;a<rc.length;a++)Ke(rc[a],i);break;case"source":Ke("error",i);break;case"img":case"image":case"link":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"input":Ke("invalid",i),au(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ke("invalid",i);break;case"textarea":Ke("invalid",i),Zi(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||e_(i.textContent,a)?(l.popover!=null&&(Ke("beforetoggle",i),Ke("toggle",i)),l.onScroll!=null&&Ke("scroll",i),l.onScrollEnd!=null&&Ke("scrollend",i),l.onClick!=null&&(i.onclick=Ns),i=!0):i=!1,i||lr(t,!0)}function Ly(t){for(hn=t.return;hn;)switch(hn.tag){case 5:case 31:case 13:gs=!1;return;case 27:case 3:gs=!0;return;default:hn=hn.return}}function ho(t){if(t!==hn)return!1;if(!et)return Ly(t),et=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Rm(t.type,t.memoizedProps)),a=!a),a&&Et&&lr(t),Ly(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Et=c_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Et=c_(t)}else i===27?(i=Et,wr(t.type)?(t=km,km=null,Et=t):Et=i):Et=hn?vs(t.stateNode.nextSibling):null;return!0}function ga(){Et=hn=null,et=!1}function hf(){var t=or;return t!==null&&(Ln===null?Ln=t:Ln.push.apply(Ln,t),or=null),t}function Pl(t){or===null?or=[t]:or.push(t)}var df=j(null),ya=null,Ei=null;function cr(t,i,a){le(df,i._currentValue),i._currentValue=a}function Ti(t){t._currentValue=df.current,G(df)}function ff(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function mf(t,i,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var O=0;O<i.length;O++)if(E.context===i[O]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),ff(m.return,a,t),l||(_=null);break e}m=E.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),ff(_,a,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function fo(t,i,a,l){t=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var E=f.type;Kn(f.pendingProps.value,_.value)||(t!==null?t.push(E):t=[E])}}else if(f===ce.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(uc):t=[uc])}f=f.return}t!==null&&mf(i,t,a,l),i.flags|=262144}function Ru(t){for(t=t.firstContext;t!==null;){if(!Kn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function va(t){ya=t,Ei=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function dn(t){return Uy(ya,t)}function Iu(t,i){return ya===null&&va(t),Uy(t,i)}function Uy(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ei===null){if(t===null)throw Error(r(308));Ei=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Ei=Ei.next=i;return a}var tS=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},nS=s.unstable_scheduleCallback,sS=s.unstable_NormalPriority,Gt={$$typeof:de,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pf(){return{controller:new tS,data:new Map,refCount:0}}function Ll(t){t.refCount--,t.refCount===0&&nS(sS,function(){t.controller.abort()})}var Ul=null,gf=0,mo=0,po=null;function iS(t,i){if(Ul===null){var a=Ul=[];gf=0,mo=_m(),po={status:"pending",value:void 0,then:function(l){a.push(l)}}}return gf++,i.then(zy,zy),i}function zy(){if(--gf===0&&Ul!==null){po!==null&&(po.status="fulfilled");var t=Ul;Ul=null,mo=0,po=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function rS(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var By=F.S;F.S=function(t,i){Tv=cn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&iS(t,i),By!==null&&By(t,i)};var _a=j(null);function yf(){var t=_a.current;return t!==null?t:vt.pooledCache}function Cu(t,i){i===null?le(_a,_a.current):le(_a,i.pool)}function qy(){var t=yf();return t===null?null:{parent:Gt._currentValue,pool:t}}var go=Error(r(460)),vf=Error(r(474)),Du=Error(r(542)),ju={then:function(){}};function Hy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Fy(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Ns,Ns),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,$y(t),t;default:if(typeof i.status=="string")i.then(Ns,Ns);else{if(t=vt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,$y(t),t}throw xa=i,go}}function ba(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(xa=a,go):a}}var xa=null;function Gy(){if(xa===null)throw Error(r(459));var t=xa;return xa=null,t}function $y(t){if(t===go||t===Du)throw Error(r(483))}var yo=null,zl=0;function ku(t){var i=zl;return zl+=1,yo===null&&(yo=[]),Fy(yo,t,i)}function Bl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Ou(t,i){throw i.$$typeof===T?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Ky(t){function i(P,V){if(t){var z=P.deletions;z===null?(P.deletions=[V],P.flags|=16):z.push(V)}}function a(P,V){if(!t)return null;for(;V!==null;)i(P,V),V=V.sibling;return null}function l(P){for(var V=new Map;P!==null;)P.key!==null?V.set(P.key,P):V.set(P.index,P),P=P.sibling;return V}function f(P,V){return P=xi(P,V),P.index=0,P.sibling=null,P}function m(P,V,z){return P.index=z,t?(z=P.alternate,z!==null?(z=z.index,z<V?(P.flags|=67108866,V):z):(P.flags|=67108866,V)):(P.flags|=1048576,V)}function _(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function E(P,V,z,J){return V===null||V.tag!==6?(V=af(z,P.mode,J),V.return=P,V):(V=f(V,z),V.return=P,V)}function O(P,V,z,J){var Ce=z.type;return Ce===X?Y(P,V,z.props.children,J,z.key):V!==null&&(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===I&&ba(Ce)===V.type)?(V=f(V,z.props),Bl(V,z),V.return=P,V):(V=Au(z.type,z.key,z.props,null,P.mode,J),Bl(V,z),V.return=P,V)}function B(P,V,z,J){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=of(z,P.mode,J),V.return=P,V):(V=f(V,z.children||[]),V.return=P,V)}function Y(P,V,z,J,Ce){return V===null||V.tag!==7?(V=pa(z,P.mode,J,Ce),V.return=P,V):(V=f(V,z),V.return=P,V)}function ee(P,V,z){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=af(""+V,P.mode,z),V.return=P,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case D:return z=Au(V.type,V.key,V.props,null,P.mode,z),Bl(z,V),z.return=P,z;case q:return V=of(V,P.mode,z),V.return=P,V;case I:return V=ba(V),ee(P,V,z)}if(be(V)||M(V))return V=pa(V,P.mode,z,null),V.return=P,V;if(typeof V.then=="function")return ee(P,ku(V),z);if(V.$$typeof===de)return ee(P,Iu(P,V),z);Ou(P,V)}return null}function H(P,V,z,J){var Ce=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Ce!==null?null:E(P,V,""+z,J);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case D:return z.key===Ce?O(P,V,z,J):null;case q:return z.key===Ce?B(P,V,z,J):null;case I:return z=ba(z),H(P,V,z,J)}if(be(z)||M(z))return Ce!==null?null:Y(P,V,z,J,null);if(typeof z.then=="function")return H(P,V,ku(z),J);if(z.$$typeof===de)return H(P,V,Iu(P,z),J);Ou(P,z)}return null}function K(P,V,z,J,Ce){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return P=P.get(z)||null,E(V,P,""+J,Ce);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case D:return P=P.get(J.key===null?z:J.key)||null,O(V,P,J,Ce);case q:return P=P.get(J.key===null?z:J.key)||null,B(V,P,J,Ce);case I:return J=ba(J),K(P,V,z,J,Ce)}if(be(J)||M(J))return P=P.get(z)||null,Y(V,P,J,Ce,null);if(typeof J.then=="function")return K(P,V,z,ku(J),Ce);if(J.$$typeof===de)return K(P,V,z,Iu(V,J),Ce);Ou(V,J)}return null}function _e(P,V,z,J){for(var Ce=null,st=null,Ee=V,He=V=0,Xe=null;Ee!==null&&He<z.length;He++){Ee.index>He?(Xe=Ee,Ee=null):Xe=Ee.sibling;var it=H(P,Ee,z[He],J);if(it===null){Ee===null&&(Ee=Xe);break}t&&Ee&&it.alternate===null&&i(P,Ee),V=m(it,V,He),st===null?Ce=it:st.sibling=it,st=it,Ee=Xe}if(He===z.length)return a(P,Ee),et&&wi(P,He),Ce;if(Ee===null){for(;He<z.length;He++)Ee=ee(P,z[He],J),Ee!==null&&(V=m(Ee,V,He),st===null?Ce=Ee:st.sibling=Ee,st=Ee);return et&&wi(P,He),Ce}for(Ee=l(Ee);He<z.length;He++)Xe=K(Ee,P,He,z[He],J),Xe!==null&&(t&&Xe.alternate!==null&&Ee.delete(Xe.key===null?He:Xe.key),V=m(Xe,V,He),st===null?Ce=Xe:st.sibling=Xe,st=Xe);return t&&Ee.forEach(function(Nr){return i(P,Nr)}),et&&wi(P,He),Ce}function De(P,V,z,J){if(z==null)throw Error(r(151));for(var Ce=null,st=null,Ee=V,He=V=0,Xe=null,it=z.next();Ee!==null&&!it.done;He++,it=z.next()){Ee.index>He?(Xe=Ee,Ee=null):Xe=Ee.sibling;var Nr=H(P,Ee,it.value,J);if(Nr===null){Ee===null&&(Ee=Xe);break}t&&Ee&&Nr.alternate===null&&i(P,Ee),V=m(Nr,V,He),st===null?Ce=Nr:st.sibling=Nr,st=Nr,Ee=Xe}if(it.done)return a(P,Ee),et&&wi(P,He),Ce;if(Ee===null){for(;!it.done;He++,it=z.next())it=ee(P,it.value,J),it!==null&&(V=m(it,V,He),st===null?Ce=it:st.sibling=it,st=it);return et&&wi(P,He),Ce}for(Ee=l(Ee);!it.done;He++,it=z.next())it=K(Ee,P,He,it.value,J),it!==null&&(t&&it.alternate!==null&&Ee.delete(it.key===null?He:it.key),V=m(it,V,He),st===null?Ce=it:st.sibling=it,st=it);return t&&Ee.forEach(function(gA){return i(P,gA)}),et&&wi(P,He),Ce}function gt(P,V,z,J){if(typeof z=="object"&&z!==null&&z.type===X&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case D:e:{for(var Ce=z.key;V!==null;){if(V.key===Ce){if(Ce=z.type,Ce===X){if(V.tag===7){a(P,V.sibling),J=f(V,z.props.children),J.return=P,P=J;break e}}else if(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===I&&ba(Ce)===V.type){a(P,V.sibling),J=f(V,z.props),Bl(J,z),J.return=P,P=J;break e}a(P,V);break}else i(P,V);V=V.sibling}z.type===X?(J=pa(z.props.children,P.mode,J,z.key),J.return=P,P=J):(J=Au(z.type,z.key,z.props,null,P.mode,J),Bl(J,z),J.return=P,P=J)}return _(P);case q:e:{for(Ce=z.key;V!==null;){if(V.key===Ce)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(P,V.sibling),J=f(V,z.children||[]),J.return=P,P=J;break e}else{a(P,V);break}else i(P,V);V=V.sibling}J=of(z,P.mode,J),J.return=P,P=J}return _(P);case I:return z=ba(z),gt(P,V,z,J)}if(be(z))return _e(P,V,z,J);if(M(z)){if(Ce=M(z),typeof Ce!="function")throw Error(r(150));return z=Ce.call(z),De(P,V,z,J)}if(typeof z.then=="function")return gt(P,V,ku(z),J);if(z.$$typeof===de)return gt(P,V,Iu(P,z),J);Ou(P,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,V!==null&&V.tag===6?(a(P,V.sibling),J=f(V,z),J.return=P,P=J):(a(P,V),J=af(z,P.mode,J),J.return=P,P=J),_(P)):a(P,V)}return function(P,V,z,J){try{zl=0;var Ce=gt(P,V,z,J);return yo=null,Ce}catch(Ee){if(Ee===go||Ee===Du)throw Ee;var st=Qn(29,Ee,null,P.mode);return st.lanes=J,st.return=P,st}finally{}}}var wa=Ky(!0),Qy=Ky(!1),ur=!1;function _f(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function hr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function dr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ot&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Su(t),Dy(t,null,a),i}return Tu(t,l,i,a),Su(t)}function ql(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,pl(t,a)}}function xf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?f=m=i:m=m.next=i}else f=m=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var wf=!1;function Hl(){if(wf){var t=po;if(t!==null)throw t}}function Fl(t,i,a,l){wf=!1;var f=t.updateQueue;ur=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var O=E,B=O.next;O.next=null,_===null?m=B:_.next=B,_=O;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,E=Y.lastBaseUpdate,E!==_&&(E===null?Y.firstBaseUpdate=B:E.next=B,Y.lastBaseUpdate=O))}if(m!==null){var ee=f.baseState;_=0,Y=B=O=null,E=m;do{var H=E.lane&-536870913,K=H!==E.lane;if(K?(Ye&H)===H:(l&H)===H){H!==0&&H===mo&&(wf=!0),Y!==null&&(Y=Y.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var _e=t,De=E;H=i;var gt=a;switch(De.tag){case 1:if(_e=De.payload,typeof _e=="function"){ee=_e.call(gt,ee,H);break e}ee=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=De.payload,H=typeof _e=="function"?_e.call(gt,ee,H):_e,H==null)break e;ee=w({},ee,H);break e;case 2:ur=!0}}H=E.callback,H!==null&&(t.flags|=64,K&&(t.flags|=8192),K=f.callbacks,K===null?f.callbacks=[H]:K.push(H))}else K={lane:H,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Y===null?(B=Y=K,O=ee):Y=Y.next=K,_|=H;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;K=E,E=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);Y===null&&(O=ee),f.baseState=O,f.firstBaseUpdate=B,f.lastBaseUpdate=Y,m===null&&(f.shared.lanes=0),yr|=_,t.lanes=_,t.memoizedState=ee}}function Yy(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function Xy(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Yy(a[t],i)}var vo=j(null),Mu=j(0);function Wy(t,i){t=ki,le(Mu,t),le(vo,i),ki=t|i.baseLanes}function Ef(){le(Mu,ki),le(vo,vo.current)}function Tf(){ki=Mu.current,G(vo),G(Mu)}var Yn=j(null),ys=null;function fr(t){var i=t.alternate;le(Lt,Lt.current&1),le(Yn,t),ys===null&&(i===null||vo.current!==null||i.memoizedState!==null)&&(ys=t)}function Sf(t){le(Lt,Lt.current),le(Yn,t),ys===null&&(ys=t)}function Jy(t){t.tag===22?(le(Lt,Lt.current),le(Yn,t),ys===null&&(ys=t)):mr()}function mr(){le(Lt,Lt.current),le(Yn,Yn.current)}function Xn(t){G(Yn),ys===t&&(ys=null),G(Lt)}var Lt=j(0);function Vu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Dm(a)||jm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Si=0,qe=null,mt=null,$t=null,Pu=!1,_o=!1,Ea=!1,Lu=0,Gl=0,bo=null,aS=0;function jt(){throw Error(r(321))}function Af(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Kn(t[a],i[a]))return!1;return!0}function Nf(t,i,a,l,f,m){return Si=m,qe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=t===null||t.memoizedState===null?M0:qf,Ea=!1,m=a(l,f),Ea=!1,_o&&(m=e0(i,a,l,f)),Zy(t),m}function Zy(t){F.H=Ql;var i=mt!==null&&mt.next!==null;if(Si=0,$t=mt=qe=null,Pu=!1,Gl=0,bo=null,i)throw Error(r(300));t===null||Kt||(t=t.dependencies,t!==null&&Ru(t)&&(Kt=!0))}function e0(t,i,a,l){qe=t;var f=0;do{if(_o&&(bo=null),Gl=0,_o=!1,25<=f)throw Error(r(301));if(f+=1,$t=mt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}F.H=V0,m=i(a,l)}while(_o);return m}function oS(){var t=F.H,i=t.useState()[0];return i=typeof i.then=="function"?$l(i):i,t=t.useState()[0],(mt!==null?mt.memoizedState:null)!==t&&(qe.flags|=1024),i}function Rf(){var t=Lu!==0;return Lu=0,t}function If(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Cf(t){if(Pu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Pu=!1}Si=0,$t=mt=qe=null,_o=!1,Gl=Lu=0,bo=null}function Rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?qe.memoizedState=$t=t:$t=$t.next=t,$t}function Ut(){if(mt===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var i=$t===null?qe.memoizedState:$t.next;if(i!==null)$t=i,mt=t;else{if(t===null)throw qe.alternate===null?Error(r(467)):Error(r(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},$t===null?qe.memoizedState=$t=t:$t=$t.next=t}return $t}function Uu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $l(t){var i=Gl;return Gl+=1,bo===null&&(bo=[]),t=Fy(bo,t,i),i=qe,($t===null?i.memoizedState:$t.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?M0:qf),t}function zu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return $l(t);if(t.$$typeof===de)return dn(t)}throw Error(r(438,String(t)))}function Df(t){var i=null,a=qe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=qe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Uu(),qe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=C;return i.index++,a}function Ai(t,i){return typeof i=="function"?i(t):i}function Bu(t){var i=Ut();return jf(i,mt,t)}function jf(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}i.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{i=f.next;var E=_=null,O=null,B=i,Y=!1;do{var ee=B.lane&-536870913;if(ee!==B.lane?(Ye&ee)===ee:(Si&ee)===ee){var H=B.revertLane;if(H===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),ee===mo&&(Y=!0);else if((Si&H)===H){B=B.next,H===mo&&(Y=!0);continue}else ee={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},O===null?(E=O=ee,_=m):O=O.next=ee,qe.lanes|=H,yr|=H;ee=B.action,Ea&&a(m,ee),m=B.hasEagerState?B.eagerState:a(m,ee)}else H={lane:ee,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},O===null?(E=O=H,_=m):O=O.next=H,qe.lanes|=ee,yr|=ee;B=B.next}while(B!==null&&B!==i);if(O===null?_=m:O.next=E,!Kn(m,t.memoizedState)&&(Kt=!0,Y&&(a=po,a!==null)))throw a;t.memoizedState=m,t.baseState=_,t.baseQueue=O,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function kf(t){var i=Ut(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,m=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do m=t(m,_.action),_=_.next;while(_!==f);Kn(m,i.memoizedState)||(Kt=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,l]}function t0(t,i,a){var l=qe,f=Ut(),m=et;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!Kn((mt||f).memoizedState,a);if(_&&(f.memoizedState=a,Kt=!0),f=f.queue,Vf(i0.bind(null,l,f,t),[t]),f.getSnapshot!==i||_||$t!==null&&$t.memoizedState.tag&1){if(l.flags|=2048,xo(9,{destroy:void 0},s0.bind(null,l,f,a,i),null),vt===null)throw Error(r(349));m||(Si&127)!==0||n0(l,i,a)}return a}function n0(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=qe.updateQueue,i===null?(i=Uu(),qe.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function s0(t,i,a,l){i.value=a,i.getSnapshot=l,r0(i)&&a0(t)}function i0(t,i,a){return a(function(){r0(i)&&a0(t)})}function r0(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Kn(t,a)}catch{return!0}}function a0(t){var i=ma(t,2);i!==null&&Un(i,t,2)}function Of(t){var i=Rn();if(typeof t=="function"){var a=t;if(t=a(),Ea){yt(!0);try{a()}finally{yt(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:t},i}function o0(t,i,a,l){return t.baseState=a,jf(t,mt,typeof l=="function"?l:Ai)}function lS(t,i,a,l,f){if(Fu(t))throw Error(r(485));if(t=i.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};F.T!==null?a(!0):m.isTransition=!1,l(m),a=i.pending,a===null?(m.next=i.pending=m,l0(i,m)):(m.next=a.next,i.pending=a.next=m)}}function l0(t,i){var a=i.action,l=i.payload,f=t.state;if(i.isTransition){var m=F.T,_={};F.T=_;try{var E=a(f,l),O=F.S;O!==null&&O(_,E),c0(t,i,E)}catch(B){Mf(t,i,B)}finally{m!==null&&_.types!==null&&(m.types=_.types),F.T=m}}else try{m=a(f,l),c0(t,i,m)}catch(B){Mf(t,i,B)}}function c0(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){u0(t,i,l)},function(l){return Mf(t,i,l)}):u0(t,i,a)}function u0(t,i,a){i.status="fulfilled",i.value=a,h0(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,l0(t,a)))}function Mf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,h0(i),i=i.next;while(i!==l)}t.action=null}function h0(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function d0(t,i){return i}function f0(t,i){if(et){var a=vt.formState;if(a!==null){e:{var l=qe;if(et){if(Et){t:{for(var f=Et,m=gs;f.nodeType!==8;){if(!m){f=null;break t}if(f=vs(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Et=vs(f.nextSibling),l=f.data==="F!";break e}}lr(l)}l=!1}l&&(i=a[0])}}return a=Rn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d0,lastRenderedState:i},a.queue=l,a=j0.bind(null,qe,l),l.dispatch=a,l=Of(!1),m=Bf.bind(null,qe,!1,l.queue),l=Rn(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,a=lS.bind(null,qe,f,m,a),f.dispatch=a,l.memoizedState=t,[i,a,!1]}function m0(t){var i=Ut();return p0(i,mt,t)}function p0(t,i,a){if(i=jf(t,i,d0)[0],t=Bu(Ai)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=$l(i)}catch(_){throw _===go?Du:_}else l=i;i=Ut();var f=i.queue,m=f.dispatch;return a!==i.memoizedState&&(qe.flags|=2048,xo(9,{destroy:void 0},cS.bind(null,f,a),null)),[l,m,t]}function cS(t,i){t.action=i}function g0(t){var i=Ut(),a=mt;if(a!==null)return p0(i,a,t);Ut(),i=i.memoizedState,a=Ut();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function xo(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=qe.updateQueue,i===null&&(i=Uu(),qe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function y0(){return Ut().memoizedState}function qu(t,i,a,l){var f=Rn();qe.flags|=t,f.memoizedState=xo(1|i,{destroy:void 0},a,l===void 0?null:l)}function Hu(t,i,a,l){var f=Ut();l=l===void 0?null:l;var m=f.memoizedState.inst;mt!==null&&l!==null&&Af(l,mt.memoizedState.deps)?f.memoizedState=xo(i,m,a,l):(qe.flags|=t,f.memoizedState=xo(1|i,m,a,l))}function v0(t,i){qu(8390656,8,t,i)}function Vf(t,i){Hu(2048,8,t,i)}function uS(t){qe.flags|=4;var i=qe.updateQueue;if(i===null)i=Uu(),qe.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function _0(t){var i=Ut().memoizedState;return uS({ref:i,nextImpl:t}),function(){if((ot&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function b0(t,i){return Hu(4,2,t,i)}function x0(t,i){return Hu(4,4,t,i)}function w0(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function E0(t,i,a){a=a!=null?a.concat([t]):null,Hu(4,4,w0.bind(null,i,t),a)}function Pf(){}function T0(t,i){var a=Ut();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Af(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function S0(t,i){var a=Ut();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Af(i,l[1]))return l[0];if(l=t(),Ea){yt(!0);try{t()}finally{yt(!1)}}return a.memoizedState=[l,i],l}function Lf(t,i,a){return a===void 0||(Si&1073741824)!==0&&(Ye&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Av(),qe.lanes|=t,yr|=t,a)}function A0(t,i,a,l){return Kn(a,i)?a:vo.current!==null?(t=Lf(t,a,l),Kn(t,i)||(Kt=!0),t):(Si&42)===0||(Si&1073741824)!==0&&(Ye&261930)===0?(Kt=!0,t.memoizedState=a):(t=Av(),qe.lanes|=t,yr|=t,i)}function N0(t,i,a,l,f){var m=se.p;se.p=m!==0&&8>m?m:8;var _=F.T,E={};F.T=E,Bf(t,!1,i,a);try{var O=f(),B=F.S;if(B!==null&&B(E,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Y=rS(O,l);Kl(t,i,Y,Zn(t))}else Kl(t,i,l,Zn(t))}catch(ee){Kl(t,i,{then:function(){},status:"rejected",reason:ee},Zn())}finally{se.p=m,_!==null&&E.types!==null&&(_.types=E.types),F.T=_}}function hS(){}function Uf(t,i,a,l){if(t.tag!==5)throw Error(r(476));var f=R0(t).queue;N0(t,f,i,me,a===null?hS:function(){return I0(t),a(l)})}function R0(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:me},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function I0(t){var i=R0(t);i.next===null&&(i=t.alternate.memoizedState),Kl(t,i.next.queue,{},Zn())}function zf(){return dn(uc)}function C0(){return Ut().memoizedState}function D0(){return Ut().memoizedState}function dS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Zn();t=hr(a);var l=dr(i,t,a);l!==null&&(Un(l,i,a),ql(l,i,a)),i={cache:pf()},t.payload=i;return}i=i.return}}function fS(t,i,a){var l=Zn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Fu(t)?k0(i,a):(a=sf(t,i,a,l),a!==null&&(Un(a,t,l),O0(a,i,l)))}function j0(t,i,a){var l=Zn();Kl(t,i,a,l)}function Kl(t,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fu(t))k0(i,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,E=m(_,a);if(f.hasEagerState=!0,f.eagerState=E,Kn(E,_))return Tu(t,i,f,0),vt===null&&Eu(),!1}catch{}finally{}if(a=sf(t,i,f,l),a!==null)return Un(a,t,l),O0(a,i,l),!0}return!1}function Bf(t,i,a,l){if(l={lane:2,revertLane:_m(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Fu(t)){if(i)throw Error(r(479))}else i=sf(t,a,l,2),i!==null&&Un(i,t,2)}function Fu(t){var i=t.alternate;return t===qe||i!==null&&i===qe}function k0(t,i){_o=Pu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function O0(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,pl(t,a)}}var Ql={readContext:dn,use:zu,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt};Ql.useEffectEvent=jt;var M0={readContext:dn,use:zu,useCallback:function(t,i){return Rn().memoizedState=[t,i===void 0?null:i],t},useContext:dn,useEffect:v0,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,qu(4194308,4,w0.bind(null,i,t),a)},useLayoutEffect:function(t,i){return qu(4194308,4,t,i)},useInsertionEffect:function(t,i){qu(4,2,t,i)},useMemo:function(t,i){var a=Rn();i=i===void 0?null:i;var l=t();if(Ea){yt(!0);try{t()}finally{yt(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=Rn();if(a!==void 0){var f=a(i);if(Ea){yt(!0);try{a(i)}finally{yt(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=fS.bind(null,qe,t),[l.memoizedState,t]},useRef:function(t){var i=Rn();return t={current:t},i.memoizedState=t},useState:function(t){t=Of(t);var i=t.queue,a=j0.bind(null,qe,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Pf,useDeferredValue:function(t,i){var a=Rn();return Lf(a,t,i)},useTransition:function(){var t=Of(!1);return t=N0.bind(null,qe,t.queue,!0,!1),Rn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=qe,f=Rn();if(et){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),vt===null)throw Error(r(349));(Ye&127)!==0||n0(l,i,a)}f.memoizedState=a;var m={value:a,getSnapshot:i};return f.queue=m,v0(i0.bind(null,l,m,t),[t]),l.flags|=2048,xo(9,{destroy:void 0},s0.bind(null,l,m,a,i),null),a},useId:function(){var t=Rn(),i=vt.identifierPrefix;if(et){var a=ii,l=si;a=(l&~(1<<32-Qe(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Lu++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=aS++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:zf,useFormState:f0,useActionState:f0,useOptimistic:function(t){var i=Rn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Bf.bind(null,qe,!0,a),a.dispatch=i,[t,i]},useMemoCache:Df,useCacheRefresh:function(){return Rn().memoizedState=dS.bind(null,qe)},useEffectEvent:function(t){var i=Rn(),a={impl:t};return i.memoizedState=a,function(){if((ot&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},qf={readContext:dn,use:zu,useCallback:T0,useContext:dn,useEffect:Vf,useImperativeHandle:E0,useInsertionEffect:b0,useLayoutEffect:x0,useMemo:S0,useReducer:Bu,useRef:y0,useState:function(){return Bu(Ai)},useDebugValue:Pf,useDeferredValue:function(t,i){var a=Ut();return A0(a,mt.memoizedState,t,i)},useTransition:function(){var t=Bu(Ai)[0],i=Ut().memoizedState;return[typeof t=="boolean"?t:$l(t),i]},useSyncExternalStore:t0,useId:C0,useHostTransitionStatus:zf,useFormState:m0,useActionState:m0,useOptimistic:function(t,i){var a=Ut();return o0(a,mt,t,i)},useMemoCache:Df,useCacheRefresh:D0};qf.useEffectEvent=_0;var V0={readContext:dn,use:zu,useCallback:T0,useContext:dn,useEffect:Vf,useImperativeHandle:E0,useInsertionEffect:b0,useLayoutEffect:x0,useMemo:S0,useReducer:kf,useRef:y0,useState:function(){return kf(Ai)},useDebugValue:Pf,useDeferredValue:function(t,i){var a=Ut();return mt===null?Lf(a,t,i):A0(a,mt.memoizedState,t,i)},useTransition:function(){var t=kf(Ai)[0],i=Ut().memoizedState;return[typeof t=="boolean"?t:$l(t),i]},useSyncExternalStore:t0,useId:C0,useHostTransitionStatus:zf,useFormState:g0,useActionState:g0,useOptimistic:function(t,i){var a=Ut();return mt!==null?o0(a,mt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Df,useCacheRefresh:D0};V0.useEffectEvent=_0;function Hf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:w({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Ff={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Zn(),f=hr(l);f.payload=i,a!=null&&(f.callback=a),i=dr(t,f,l),i!==null&&(Un(i,t,l),ql(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Zn(),f=hr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=dr(t,f,l),i!==null&&(Un(i,t,l),ql(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Zn(),l=hr(a);l.tag=2,i!=null&&(l.callback=i),i=dr(t,l,a),i!==null&&(Un(i,t,a),ql(i,t,a))}};function P0(t,i,a,l,f,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,_):i.prototype&&i.prototype.isPureReactComponent?!Ol(a,l)||!Ol(f,m):!0}function L0(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Ff.enqueueReplaceState(i,i.state,null)}function Ta(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=w({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function U0(t){wu(t)}function z0(t){console.error(t)}function B0(t){wu(t)}function Gu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function q0(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Gf(t,i,a){return a=hr(a),a.tag=3,a.payload={element:null},a.callback=function(){Gu(t,i)},a}function H0(t){return t=hr(t),t.tag=3,t}function F0(t,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){q0(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){q0(i,a,l),typeof f!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function mS(t,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&fo(i,a,f,!0),a=Yn.current,a!==null){switch(a.tag){case 31:case 13:return ys===null?sh():a.alternate===null&&kt===0&&(kt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===ju?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),gm(t,l,f)),!1;case 22:return a.flags|=65536,l===ju?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),gm(t,l,f)),!1}throw Error(r(435,a.tag))}return gm(t,l,f),sh(),!1}if(et)return i=Yn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==uf&&(t=Error(r(422),{cause:l}),Pl(fs(t,a)))):(l!==uf&&(i=Error(r(423),{cause:l}),Pl(fs(i,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=fs(l,a),f=Gf(t.stateNode,l,f),xf(t,f),kt!==4&&(kt=2)),!1;var m=Error(r(520),{cause:l});if(m=fs(m,a),nc===null?nc=[m]:nc.push(m),kt!==4&&(kt=2),i===null)return!0;l=fs(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=Gf(a.stateNode,l,t),xf(a,t),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(vr===null||!vr.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=H0(f),F0(f,t,a,l),xf(a,f),!1}a=a.return}while(a!==null);return!1}var $f=Error(r(461)),Kt=!1;function fn(t,i,a,l){i.child=t===null?Qy(i,null,a,l):wa(i,t.child,a,l)}function G0(t,i,a,l,f){a=a.render;var m=i.ref;if("ref"in l){var _={};for(var E in l)E!=="ref"&&(_[E]=l[E])}else _=l;return va(i),l=Nf(t,i,a,_,m,f),E=Rf(),t!==null&&!Kt?(If(t,i,f),Ni(t,i,f)):(et&&E&&lf(i),i.flags|=1,fn(t,i,l,f),i.child)}function $0(t,i,a,l,f){if(t===null){var m=a.type;return typeof m=="function"&&!rf(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,K0(t,i,m,l,f)):(t=Au(a.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(m=t.child,!em(t,f)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ol,a(_,l)&&t.ref===i.ref)return Ni(t,i,f)}return i.flags|=1,t=xi(m,l),t.ref=i.ref,t.return=i,i.child=t}function K0(t,i,a,l,f){if(t!==null){var m=t.memoizedProps;if(Ol(m,l)&&t.ref===i.ref)if(Kt=!1,i.pendingProps=l=m,em(t,f))(t.flags&131072)!==0&&(Kt=!0);else return i.lanes=t.lanes,Ni(t,i,f)}return Kf(t,i,a,l,f)}function Q0(t,i,a,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=i.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,i.child=null;return Y0(t,i,m,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Cu(i,m!==null?m.cachePool:null),m!==null?Wy(i,m):Ef(),Jy(i);else return l=i.lanes=536870912,Y0(t,i,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Cu(i,m.cachePool),Wy(i,m),mr(),i.memoizedState=null):(t!==null&&Cu(i,null),Ef(),mr());return fn(t,i,f,a),i.child}function Yl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Y0(t,i,a,l,f){var m=yf();return m=m===null?null:{parent:Gt._currentValue,pool:m},i.memoizedState={baseLanes:a,cachePool:m},t!==null&&Cu(i,null),Ef(),Jy(i),t!==null&&fo(t,i,l,!0),i.childLanes=f,null}function $u(t,i){return i=Qu({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function X0(t,i,a){return wa(i,t.child,null,a),t=$u(i,i.pendingProps),t.flags|=2,Xn(i),i.memoizedState=null,t}function pS(t,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(et){if(l.mode==="hidden")return t=$u(i,l),i.lanes=536870912,Yl(null,t);if(Sf(i),(t=Et)?(t=l_(t,gs),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ar!==null?{id:si,overflow:ii}:null,retryLane:536870912,hydrationErrors:null},a=ky(t),a.return=i,i.child=a,hn=i,Et=null)):t=null,t===null)throw lr(i);return i.lanes=536870912,null}return $u(i,l)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(Sf(i),f)if(i.flags&256)i.flags&=-257,i=X0(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(Kt||fo(t,i,a,!1),f=(a&t.childLanes)!==0,Kt||f){if(l=vt,l!==null&&(_=gl(l,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,ma(t,_),Un(l,t,_),$f;sh(),i=X0(t,i,a)}else t=m.treeContext,Et=vs(_.nextSibling),hn=i,et=!0,or=null,gs=!1,t!==null&&Vy(i,t),i=$u(i,l),i.flags|=4096;return i}return t=xi(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Ku(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Kf(t,i,a,l,f){return va(i),a=Nf(t,i,a,l,void 0,f),l=Rf(),t!==null&&!Kt?(If(t,i,f),Ni(t,i,f)):(et&&l&&lf(i),i.flags|=1,fn(t,i,a,f),i.child)}function W0(t,i,a,l,f,m){return va(i),i.updateQueue=null,a=e0(i,l,a,f),Zy(t),l=Rf(),t!==null&&!Kt?(If(t,i,m),Ni(t,i,m)):(et&&l&&lf(i),i.flags|=1,fn(t,i,a,m),i.child)}function J0(t,i,a,l,f){if(va(i),i.stateNode===null){var m=lo,_=a.contextType;typeof _=="object"&&_!==null&&(m=dn(_)),m=new a(l,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Ff,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=l,m.state=i.memoizedState,m.refs={},_f(i),_=a.contextType,m.context=typeof _=="object"&&_!==null?dn(_):lo,m.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Hf(i,a,_,l),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Ff.enqueueReplaceState(m,m.state,null),Fl(i,l,m,f),Hl(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){m=i.stateNode;var E=i.memoizedProps,O=Ta(a,E);m.props=O;var B=m.context,Y=a.contextType;_=lo,typeof Y=="object"&&Y!==null&&(_=dn(Y));var ee=a.getDerivedStateFromProps;Y=typeof ee=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,Y||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||B!==_)&&L0(i,m,l,_),ur=!1;var H=i.memoizedState;m.state=H,Fl(i,l,m,f),Hl(),B=i.memoizedState,E||H!==B||ur?(typeof ee=="function"&&(Hf(i,a,ee,l),B=i.memoizedState),(O=ur||P0(i,a,O,l,H,B,_))?(Y||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),m.props=l,m.state=B,m.context=_,l=O):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{m=i.stateNode,bf(t,i),_=i.memoizedProps,Y=Ta(a,_),m.props=Y,ee=i.pendingProps,H=m.context,B=a.contextType,O=lo,typeof B=="object"&&B!==null&&(O=dn(B)),E=a.getDerivedStateFromProps,(B=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ee||H!==O)&&L0(i,m,l,O),ur=!1,H=i.memoizedState,m.state=H,Fl(i,l,m,f),Hl();var K=i.memoizedState;_!==ee||H!==K||ur||t!==null&&t.dependencies!==null&&Ru(t.dependencies)?(typeof E=="function"&&(Hf(i,a,E,l),K=i.memoizedState),(Y=ur||P0(i,a,Y,l,H,K,O)||t!==null&&t.dependencies!==null&&Ru(t.dependencies))?(B||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,K,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,K,O)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=K),m.props=l,m.state=K,m.context=O,l=Y):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),l=!1)}return m=l,Ku(t,i),l=(i.flags&128)!==0,m||l?(m=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,t!==null&&l?(i.child=wa(i,t.child,null,f),i.child=wa(i,null,a,f)):fn(t,i,a,f),i.memoizedState=m.state,t=i.child):t=Ni(t,i,f),t}function Z0(t,i,a,l){return ga(),i.flags|=256,fn(t,i,a,l),i.child}var Qf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yf(t){return{baseLanes:t,cachePool:qy()}}function Xf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Jn),t}function ev(t,i,a){var l=i.pendingProps,f=!1,m=(i.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(Lt.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(et){if(f?fr(i):mr(),(t=Et)?(t=l_(t,gs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ar!==null?{id:si,overflow:ii}:null,retryLane:536870912,hydrationErrors:null},a=ky(t),a.return=i,i.child=a,hn=i,Et=null)):t=null,t===null)throw lr(i);return jm(t)?i.lanes=32:i.lanes=536870912,null}var E=l.children;return l=l.fallback,f?(mr(),f=i.mode,E=Qu({mode:"hidden",children:E},f),l=pa(l,f,a,null),E.return=i,l.return=i,E.sibling=l,i.child=E,l=i.child,l.memoizedState=Yf(a),l.childLanes=Xf(t,_,a),i.memoizedState=Qf,Yl(null,l)):(fr(i),Wf(i,E))}var O=t.memoizedState;if(O!==null&&(E=O.dehydrated,E!==null)){if(m)i.flags&256?(fr(i),i.flags&=-257,i=Jf(t,i,a)):i.memoizedState!==null?(mr(),i.child=t.child,i.flags|=128,i=null):(mr(),E=l.fallback,f=i.mode,l=Qu({mode:"visible",children:l.children},f),E=pa(E,f,a,null),E.flags|=2,l.return=i,E.return=i,l.sibling=E,i.child=l,wa(i,t.child,null,a),l=i.child,l.memoizedState=Yf(a),l.childLanes=Xf(t,_,a),i.memoizedState=Qf,i=Yl(null,l));else if(fr(i),jm(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var B=_.dgst;_=B,l=Error(r(419)),l.stack="",l.digest=_,Pl({value:l,source:null,stack:null}),i=Jf(t,i,a)}else if(Kt||fo(t,i,a,!1),_=(a&t.childLanes)!==0,Kt||_){if(_=vt,_!==null&&(l=gl(_,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,ma(t,l),Un(_,t,l),$f;Dm(E)||sh(),i=Jf(t,i,a)}else Dm(E)?(i.flags|=192,i.child=t.child,i=null):(t=O.treeContext,Et=vs(E.nextSibling),hn=i,et=!0,or=null,gs=!1,t!==null&&Vy(i,t),i=Wf(i,l.children),i.flags|=4096);return i}return f?(mr(),E=l.fallback,f=i.mode,O=t.child,B=O.sibling,l=xi(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,B!==null?E=xi(B,E):(E=pa(E,f,a,null),E.flags|=2),E.return=i,l.return=i,l.sibling=E,i.child=l,Yl(null,l),l=i.child,E=t.child.memoizedState,E===null?E=Yf(a):(f=E.cachePool,f!==null?(O=Gt._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=qy(),E={baseLanes:E.baseLanes|a,cachePool:f}),l.memoizedState=E,l.childLanes=Xf(t,_,a),i.memoizedState=Qf,Yl(t.child,l)):(fr(i),a=t.child,t=a.sibling,a=xi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function Wf(t,i){return i=Qu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Qu(t,i){return t=Qn(22,t,null,i),t.lanes=0,t}function Jf(t,i,a){return wa(i,t.child,null,a),t=Wf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function tv(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),ff(t.return,i,a)}function Zf(t,i,a,l,f,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:m}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=m)}function nv(t,i,a){var l=i.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var _=Lt.current,E=(_&2)!==0;if(E?(_=_&1|2,i.flags|=128):_&=1,le(Lt,_),fn(t,i,l,a),l=et?Vl:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tv(t,a,i);else if(t.tag===19)tv(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)t=a.alternate,t!==null&&Vu(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Zf(i,!1,f,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&Vu(t)===null){i.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}Zf(i,!0,a,null,m,l);break;case"together":Zf(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Ni(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),yr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(fo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=xi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=xi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function em(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Ru(t)))}function gS(t,i,a){switch(i.tag){case 3:Ne(i,i.stateNode.containerInfo),cr(i,Gt,t.memoizedState.cache),ga();break;case 27:case 5:nt(i);break;case 4:Ne(i,i.stateNode.containerInfo);break;case 10:cr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Sf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(fr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?ev(t,i,a):(fr(i),t=Ni(t,i,a),t!==null?t.sibling:null);fr(i);break;case 19:var f=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(fo(t,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return nv(t,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(Lt,Lt.current),l)break;return null;case 22:return i.lanes=0,Q0(t,i,a,i.pendingProps);case 24:cr(i,Gt,t.memoizedState.cache)}return Ni(t,i,a)}function sv(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Kt=!0;else{if(!em(t,a)&&(i.flags&128)===0)return Kt=!1,gS(t,i,a);Kt=(t.flags&131072)!==0}else Kt=!1,et&&(i.flags&1048576)!==0&&My(i,Vl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=ba(i.elementType),i.type=t,typeof t=="function")rf(t)?(l=Ta(t,l),i.tag=1,i=J0(null,i,t,l,a)):(i.tag=0,i=Kf(null,i,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===fe){i.tag=11,i=G0(null,i,t,l,a);break e}else if(f===k){i.tag=14,i=$0(null,i,t,l,a);break e}}throw i=we(t)||t,Error(r(306,i,""))}}return i;case 0:return Kf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Ta(l,i.pendingProps),J0(t,i,l,f,a);case 3:e:{if(Ne(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var m=i.memoizedState;f=m.element,bf(t,i),Fl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,cr(i,Gt,l),l!==m.cache&&mf(i,[Gt],a,!0),Hl(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Z0(t,i,l,a);break e}else if(l!==f){f=fs(Error(r(424)),i),Pl(f),i=Z0(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Et=vs(t.firstChild),hn=i,et=!0,or=null,gs=!0,a=Qy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ga(),l===f){i=Ni(t,i,a);break e}fn(t,i,l,a)}i=i.child}return i;case 26:return Ku(t,i),t===null?(a=m_(i.type,null,i.pendingProps,null))?i.memoizedState=a:et||(a=i.type,t=i.pendingProps,l=uh(Q.current).createElement(a),l[qt]=i,l[nn]=t,mn(l,a,t),Ht(l),i.stateNode=l):i.memoizedState=m_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return nt(i),t===null&&et&&(l=i.stateNode=h_(i.type,i.pendingProps,Q.current),hn=i,gs=!0,f=Et,wr(i.type)?(km=f,Et=vs(l.firstChild)):Et=f),fn(t,i,i.pendingProps.children,a),Ku(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&et&&((f=l=Et)&&(l=$S(l,i.type,i.pendingProps,gs),l!==null?(i.stateNode=l,hn=i,Et=vs(l.firstChild),gs=!1,f=!0):f=!1),f||lr(i)),nt(i),f=i.type,m=i.pendingProps,_=t!==null?t.memoizedProps:null,l=m.children,Rm(f,m)?l=null:_!==null&&Rm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Nf(t,i,oS,null,null,a),uc._currentValue=f),Ku(t,i),fn(t,i,l,a),i.child;case 6:return t===null&&et&&((t=a=Et)&&(a=KS(a,i.pendingProps,gs),a!==null?(i.stateNode=a,hn=i,Et=null,t=!0):t=!1),t||lr(i)),null;case 13:return ev(t,i,a);case 4:return Ne(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=wa(i,null,l,a):fn(t,i,l,a),i.child;case 11:return G0(t,i,i.type,i.pendingProps,a);case 7:return fn(t,i,i.pendingProps,a),i.child;case 8:return fn(t,i,i.pendingProps.children,a),i.child;case 12:return fn(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,cr(i,i.type,l.value),fn(t,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,va(i),f=dn(f),l=l(f),i.flags|=1,fn(t,i,l,a),i.child;case 14:return $0(t,i,i.type,i.pendingProps,a);case 15:return K0(t,i,i.type,i.pendingProps,a);case 19:return nv(t,i,a);case 31:return pS(t,i,a);case 22:return Q0(t,i,a,i.pendingProps);case 24:return va(i),l=dn(Gt),t===null?(f=yf(),f===null&&(f=vt,m=pf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),i.memoizedState={parent:l,cache:f},_f(i),cr(i,Gt,f)):((t.lanes&a)!==0&&(bf(t,i),Fl(i,null,null,a),Hl()),f=t.memoizedState,m=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),cr(i,Gt,l)):(l=m.cache,cr(i,Gt,l),l!==f.cache&&mf(i,[Gt],a,!0))),fn(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Ri(t){t.flags|=4}function tm(t,i,a,l,f){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Cv())t.flags|=8192;else throw xa=ju,vf}else t.flags&=-16777217}function iv(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!__(i))if(Cv())t.flags|=8192;else throw xa=ju,vf}function Yu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?tu():536870912,t.lanes|=i,So|=i)}function Xl(t,i){if(!et)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Tt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function yS(t,i,a){var l=i.pendingProps;switch(cf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(i),null;case 1:return Tt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ti(Gt),xe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ho(i)?Ri(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,hf())),Tt(i),null;case 26:var f=i.type,m=i.memoizedState;return t===null?(Ri(i),m!==null?(Tt(i),iv(i,m)):(Tt(i),tm(i,f,null,l,a))):m?m!==t.memoizedState?(Ri(i),Tt(i),iv(i,m)):(Tt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&Ri(i),Tt(i),tm(i,f,t,l,a)),null;case 27:if(Fe(i),a=Q.current,f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Ri(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return Tt(i),null}t=re.current,ho(i)?Py(i):(t=h_(f,l,a),i.stateNode=t,Ri(i))}return Tt(i),null;case 5:if(Fe(i),f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Ri(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return Tt(i),null}if(m=re.current,ho(i))Py(i);else{var _=uh(Q.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}m[qt]=i,m[nn]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=m;e:switch(mn(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ri(i)}}return Tt(i),tm(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Ri(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=Q.current,ho(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,f=hn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[qt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||e_(t.nodeValue,a)),t||lr(i,!0)}else t=uh(t).createTextNode(l),t[qt]=i,i.stateNode=t}return Tt(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=ho(i),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[qt]=i}else ga(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Tt(i),t=!1}else a=hf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(Xn(i),i):(Xn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return Tt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=ho(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[qt]=i}else ga(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Tt(i),f=!1}else f=hf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Xn(i),i):(Xn(i),null)}return Xn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Yu(i,i.updateQueue),Tt(i),null);case 4:return xe(),t===null&&Em(i.stateNode.containerInfo),Tt(i),null;case 10:return Ti(i.type),Tt(i),null;case 19:if(G(Lt),l=i.memoizedState,l===null)return Tt(i),null;if(f=(i.flags&128)!==0,m=l.rendering,m===null)if(f)Xl(l,!1);else{if(kt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(m=Vu(t),m!==null){for(i.flags|=128,Xl(l,!1),t=m.updateQueue,i.updateQueue=t,Yu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)jy(a,t),a=a.sibling;return le(Lt,Lt.current&1|2),et&&wi(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&cn()>eh&&(i.flags|=128,f=!0,Xl(l,!1),i.lanes=4194304)}else{if(!f)if(t=Vu(m),t!==null){if(i.flags|=128,f=!0,t=t.updateQueue,i.updateQueue=t,Yu(i,t),Xl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!et)return Tt(i),null}else 2*cn()-l.renderingStartTime>eh&&a!==536870912&&(i.flags|=128,f=!0,Xl(l,!1),i.lanes=4194304);l.isBackwards?(m.sibling=i.child,i.child=m):(t=l.last,t!==null?t.sibling=m:i.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=cn(),t.sibling=null,a=Lt.current,le(Lt,f?a&1|2:a&1),et&&wi(i,l.treeForkCount),t):(Tt(i),null);case 22:case 23:return Xn(i),Tf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(Tt(i),i.subtreeFlags&6&&(i.flags|=8192)):Tt(i),a=i.updateQueue,a!==null&&Yu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&G(_a),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ti(Gt),Tt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function vS(t,i){switch(cf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Ti(Gt),xe(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Fe(i),null;case 31:if(i.memoizedState!==null){if(Xn(i),i.alternate===null)throw Error(r(340));ga()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Xn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));ga()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return G(Lt),null;case 4:return xe(),null;case 10:return Ti(i.type),null;case 22:case 23:return Xn(i),Tf(),t!==null&&G(_a),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Ti(Gt),null;case 25:return null;default:return null}}function rv(t,i){switch(cf(i),i.tag){case 3:Ti(Gt),xe();break;case 26:case 27:case 5:Fe(i);break;case 4:xe();break;case 31:i.memoizedState!==null&&Xn(i);break;case 13:Xn(i);break;case 19:G(Lt);break;case 10:Ti(i.type);break;case 22:case 23:Xn(i),Tf(),t!==null&&G(_a);break;case 24:Ti(Gt)}}function Wl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var m=a.create,_=a.inst;l=m(),_.destroy=l}a=a.next}while(a!==f)}}catch(E){dt(i,i.return,E)}}function pr(t,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var _=l.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,f=i;var O=a,B=E;try{B()}catch(Y){dt(f,O,Y)}}}l=l.next}while(l!==m)}}catch(Y){dt(i,i.return,Y)}}function av(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Xy(i,a)}catch(l){dt(t,t.return,l)}}}function ov(t,i,a){a.props=Ta(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){dt(t,i,l)}}function Jl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){dt(t,i,f)}}function ri(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){dt(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){dt(t,i,f)}else a.current=null}function lv(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){dt(t,t.return,f)}}function nm(t,i,a){try{var l=t.stateNode;zS(l,t.type,a,i),l[nn]=i}catch(f){dt(t,t.return,f)}}function cv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&wr(t.type)||t.tag===4}function sm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&wr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function im(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ns));else if(l!==4&&(l===27&&wr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(im(t,i,a),t=t.sibling;t!==null;)im(t,i,a),t=t.sibling}function Xu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&wr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Xu(t,i,a),t=t.sibling;t!==null;)Xu(t,i,a),t=t.sibling}function uv(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);mn(i,l,a),i[qt]=t,i[nn]=a}catch(m){dt(t,t.return,m)}}var Ii=!1,Qt=!1,rm=!1,hv=typeof WeakSet=="function"?WeakSet:Set,rn=null;function _S(t,i){if(t=t.containerInfo,Am=yh,t=Ey(t),Wd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,E=-1,O=-1,B=0,Y=0,ee=t,H=null;t:for(;;){for(var K;ee!==a||f!==0&&ee.nodeType!==3||(E=_+f),ee!==m||l!==0&&ee.nodeType!==3||(O=_+l),ee.nodeType===3&&(_+=ee.nodeValue.length),(K=ee.firstChild)!==null;)H=ee,ee=K;for(;;){if(ee===t)break t;if(H===a&&++B===f&&(E=_),H===m&&++Y===l&&(O=_),(K=ee.nextSibling)!==null)break;ee=H,H=ee.parentNode}ee=K}a=E===-1||O===-1?null:{start:E,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Nm={focusedElem:t,selectionRange:a},yh=!1,rn=i;rn!==null;)if(i=rn,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,rn=t;else for(;rn!==null;){switch(i=rn,m=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=i,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var _e=Ta(a.type,f);t=l.getSnapshotBeforeUpdate(_e,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(De){dt(a,a.return,De)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Cm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Cm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,rn=t;break}rn=i.return}}function dv(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Di(t,a),l&4&&Wl(5,a);break;case 1:if(Di(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){dt(a,a.return,_)}else{var f=Ta(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){dt(a,a.return,_)}}l&64&&av(a),l&512&&Jl(a,a.return);break;case 3:if(Di(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Xy(t,i)}catch(_){dt(a,a.return,_)}}break;case 27:i===null&&l&4&&uv(a);case 26:case 5:Di(t,a),i===null&&l&4&&lv(a),l&512&&Jl(a,a.return);break;case 12:Di(t,a);break;case 31:Di(t,a),l&4&&pv(t,a);break;case 13:Di(t,a),l&4&&gv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=RS.bind(null,a),QS(t,a))));break;case 22:if(l=a.memoizedState!==null||Ii,!l){i=i!==null&&i.memoizedState!==null||Qt,f=Ii;var m=Qt;Ii=l,(Qt=i)&&!m?ji(t,a,(a.subtreeFlags&8772)!==0):Di(t,a),Ii=f,Qt=m}break;case 30:break;default:Di(t,a)}}function fv(t){var i=t.alternate;i!==null&&(t.alternate=null,fv(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Qa(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Nt=null,Mn=!1;function Ci(t,i,a){for(a=a.child;a!==null;)mv(t,i,a),a=a.sibling}function mv(t,i,a){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(Te,a)}catch{}switch(a.tag){case 26:Qt||ri(a,i),Ci(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Qt||ri(a,i);var l=Nt,f=Mn;wr(a.type)&&(Nt=a.stateNode,Mn=!1),Ci(t,i,a),oc(a.stateNode),Nt=l,Mn=f;break;case 5:Qt||ri(a,i);case 6:if(l=Nt,f=Mn,Nt=null,Ci(t,i,a),Nt=l,Mn=f,Nt!==null)if(Mn)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(a.stateNode)}catch(m){dt(a,i,m)}else try{Nt.removeChild(a.stateNode)}catch(m){dt(a,i,m)}break;case 18:Nt!==null&&(Mn?(t=Nt,a_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),ko(t)):a_(Nt,a.stateNode));break;case 4:l=Nt,f=Mn,Nt=a.stateNode.containerInfo,Mn=!0,Ci(t,i,a),Nt=l,Mn=f;break;case 0:case 11:case 14:case 15:pr(2,a,i),Qt||pr(4,a,i),Ci(t,i,a);break;case 1:Qt||(ri(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&ov(a,i,l)),Ci(t,i,a);break;case 21:Ci(t,i,a);break;case 22:Qt=(l=Qt)||a.memoizedState!==null,Ci(t,i,a),Qt=l;break;default:Ci(t,i,a)}}function pv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ko(t)}catch(a){dt(i,i.return,a)}}}function gv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ko(t)}catch(a){dt(i,i.return,a)}}function bS(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new hv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new hv),i;default:throw Error(r(435,t.tag))}}function Wu(t,i){var a=bS(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=IS.bind(null,t,l);l.then(f,f)}})}function Vn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=t,_=i,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(wr(E.type)){Nt=E.stateNode,Mn=!1;break e}break;case 5:Nt=E.stateNode,Mn=!1;break e;case 3:case 4:Nt=E.stateNode.containerInfo,Mn=!0;break e}E=E.return}if(Nt===null)throw Error(r(160));mv(m,_,f),Nt=null,Mn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)yv(i,t),i=i.sibling}var ks=null;function yv(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Vn(i,t),Pn(t),l&4&&(pr(3,t,t.return),Wl(3,t),pr(5,t,t.return));break;case 1:Vn(i,t),Pn(t),l&512&&(Qt||a===null||ri(a,a.return)),l&64&&Ii&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ks;if(Vn(i,t),Pn(t),l&512&&(Qt||a===null||ri(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Gs]||m[qt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),mn(m,l,a),m[qt]=t,Ht(m),l=m;break e;case"link":var _=y_("link","href",f).get(l+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(m=_[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break t}}m=f.createElement(l),mn(m,l,a),f.head.appendChild(m);break;case"meta":if(_=y_("meta","content",f).get(l+(a.content||""))){for(E=0;E<_.length;E++)if(m=_[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break t}}m=f.createElement(l),mn(m,l,a),f.head.appendChild(m);break;default:throw Error(r(468,l))}m[qt]=t,Ht(m),l=m}t.stateNode=l}else v_(f,t.type,t.stateNode);else t.stateNode=g_(f,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?v_(f,t.type,t.stateNode):g_(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&nm(t,t.memoizedProps,a.memoizedProps)}break;case 27:Vn(i,t),Pn(t),l&512&&(Qt||a===null||ri(a,a.return)),a!==null&&l&4&&nm(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Vn(i,t),Pn(t),l&512&&(Qt||a===null||ri(a,a.return)),t.flags&32){f=t.stateNode;try{On(f,"")}catch(_e){dt(t,t.return,_e)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,nm(t,f,a!==null?a.memoizedProps:f)),l&1024&&(rm=!0);break;case 6:if(Vn(i,t),Pn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(_e){dt(t,t.return,_e)}}break;case 3:if(fh=null,f=ks,ks=hh(i.containerInfo),Vn(i,t),ks=f,Pn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ko(i.containerInfo)}catch(_e){dt(t,t.return,_e)}rm&&(rm=!1,vv(t));break;case 4:l=ks,ks=hh(t.stateNode.containerInfo),Vn(i,t),Pn(t),ks=l;break;case 12:Vn(i,t),Pn(t);break;case 31:Vn(i,t),Pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Wu(t,l)));break;case 13:Vn(i,t),Pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Zu=cn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Wu(t,l)));break;case 22:f=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,B=Ii,Y=Qt;if(Ii=B||f,Qt=Y||O,Vn(i,t),Qt=Y,Ii=B,Pn(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||O||Ii||Qt||Sa(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){O=a=i;try{if(m=O.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=O.stateNode;var ee=O.memoizedProps.style,H=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;E.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(_e){dt(O,O.return,_e)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(_e){dt(O,O.return,_e)}}}else if(i.tag===18){if(a===null){O=i;try{var K=O.stateNode;f?o_(K,!0):o_(O.stateNode,!1)}catch(_e){dt(O,O.return,_e)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Wu(t,a))));break;case 19:Vn(i,t),Pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Wu(t,l)));break;case 30:break;case 21:break;default:Vn(i,t),Pn(t)}}function Pn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(cv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,m=sm(t);Xu(t,m,f);break;case 5:var _=a.stateNode;a.flags&32&&(On(_,""),a.flags&=-33);var E=sm(t);Xu(t,E,_);break;case 3:case 4:var O=a.stateNode.containerInfo,B=sm(t);im(t,B,O);break;default:throw Error(r(161))}}catch(Y){dt(t,t.return,Y)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function vv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;vv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Di(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)dv(t,i.alternate,i),i=i.sibling}function Sa(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:pr(4,i,i.return),Sa(i);break;case 1:ri(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&ov(i,i.return,a),Sa(i);break;case 27:oc(i.stateNode);case 26:case 5:ri(i,i.return),Sa(i);break;case 22:i.memoizedState===null&&Sa(i);break;case 30:Sa(i);break;default:Sa(i)}t=t.sibling}}function ji(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,m=i,_=m.flags;switch(m.tag){case 0:case 11:case 15:ji(f,m,a),Wl(4,m);break;case 1:if(ji(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){dt(l,l.return,B)}if(l=m,f=l.updateQueue,f!==null){var E=l.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)Yy(O[f],E)}catch(B){dt(l,l.return,B)}}a&&_&64&&av(m),Jl(m,m.return);break;case 27:uv(m);case 26:case 5:ji(f,m,a),a&&l===null&&_&4&&lv(m),Jl(m,m.return);break;case 12:ji(f,m,a);break;case 31:ji(f,m,a),a&&_&4&&pv(f,m);break;case 13:ji(f,m,a),a&&_&4&&gv(f,m);break;case 22:m.memoizedState===null&&ji(f,m,a),Jl(m,m.return);break;case 30:break;default:ji(f,m,a)}i=i.sibling}}function am(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Ll(a))}function om(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ll(t))}function Os(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)_v(t,i,a,l),i=i.sibling}function _v(t,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Os(t,i,a,l),f&2048&&Wl(9,i);break;case 1:Os(t,i,a,l);break;case 3:Os(t,i,a,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ll(t)));break;case 12:if(f&2048){Os(t,i,a,l),t=i.stateNode;try{var m=i.memoizedProps,_=m.id,E=m.onPostCommit;typeof E=="function"&&E(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){dt(i,i.return,O)}}else Os(t,i,a,l);break;case 31:Os(t,i,a,l);break;case 13:Os(t,i,a,l);break;case 23:break;case 22:m=i.stateNode,_=i.alternate,i.memoizedState!==null?m._visibility&2?Os(t,i,a,l):Zl(t,i):m._visibility&2?Os(t,i,a,l):(m._visibility|=2,wo(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&am(_,i);break;case 24:Os(t,i,a,l),f&2048&&om(i.alternate,i);break;default:Os(t,i,a,l)}}function wo(t,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=t,_=i,E=a,O=l,B=_.flags;switch(_.tag){case 0:case 11:case 15:wo(m,_,E,O,f),Wl(8,_);break;case 23:break;case 22:var Y=_.stateNode;_.memoizedState!==null?Y._visibility&2?wo(m,_,E,O,f):Zl(m,_):(Y._visibility|=2,wo(m,_,E,O,f)),f&&B&2048&&am(_.alternate,_);break;case 24:wo(m,_,E,O,f),f&&B&2048&&om(_.alternate,_);break;default:wo(m,_,E,O,f)}i=i.sibling}}function Zl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,f=l.flags;switch(l.tag){case 22:Zl(a,l),f&2048&&am(l.alternate,l);break;case 24:Zl(a,l),f&2048&&om(l.alternate,l);break;default:Zl(a,l)}i=i.sibling}}var ec=8192;function Eo(t,i,a){if(t.subtreeFlags&ec)for(t=t.child;t!==null;)bv(t,i,a),t=t.sibling}function bv(t,i,a){switch(t.tag){case 26:Eo(t,i,a),t.flags&ec&&t.memoizedState!==null&&aA(a,ks,t.memoizedState,t.memoizedProps);break;case 5:Eo(t,i,a);break;case 3:case 4:var l=ks;ks=hh(t.stateNode.containerInfo),Eo(t,i,a),ks=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=ec,ec=16777216,Eo(t,i,a),ec=l):Eo(t,i,a));break;default:Eo(t,i,a)}}function xv(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function tc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];rn=l,Ev(l,t)}xv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wv(t),t=t.sibling}function wv(t){switch(t.tag){case 0:case 11:case 15:tc(t),t.flags&2048&&pr(9,t,t.return);break;case 3:tc(t);break;case 12:tc(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Ju(t)):tc(t);break;default:tc(t)}}function Ju(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];rn=l,Ev(l,t)}xv(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:pr(8,i,i.return),Ju(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ju(i));break;default:Ju(i)}t=t.sibling}}function Ev(t,i){for(;rn!==null;){var a=rn;switch(a.tag){case 0:case 11:case 15:pr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ll(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,rn=l;else e:for(a=t;rn!==null;){l=rn;var f=l.sibling,m=l.return;if(fv(l),l===a){rn=null;break e}if(f!==null){f.return=m,rn=f;break e}rn=m}}}var xS={getCacheForType:function(t){var i=dn(Gt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return dn(Gt).controller.signal}},wS=typeof WeakMap=="function"?WeakMap:Map,ot=0,vt=null,$e=null,Ye=0,ht=0,Wn=null,gr=!1,To=!1,lm=!1,ki=0,kt=0,yr=0,Aa=0,cm=0,Jn=0,So=0,nc=null,Ln=null,um=!1,Zu=0,Tv=0,eh=1/0,th=null,vr=null,Zt=0,_r=null,Ao=null,Oi=0,hm=0,dm=null,Sv=null,sc=0,fm=null;function Zn(){return(ot&2)!==0&&Ye!==0?Ye&-Ye:F.T!==null?_m():nu()}function Av(){if(Jn===0)if((Ye&536870912)===0||et){var t=gi;gi<<=1,(gi&3932160)===0&&(gi=262144),Jn=t}else Jn=536870912;return t=Yn.current,t!==null&&(t.flags|=32),Jn}function Un(t,i,a){(t===vt&&(ht===2||ht===9)||t.cancelPendingCommit!==null)&&(No(t,0),br(t,Ye,Jn,!1)),ea(t,a),((ot&2)===0||t!==vt)&&(t===vt&&((ot&2)===0&&(Aa|=a),kt===4&&br(t,Ye,Jn,!1)),ai(t))}function Nv(t,i,a){if((ot&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||Ts(t,i),f=l?SS(t,i):pm(t,i,!0),m=l;do{if(f===0){To&&!l&&br(t,i,0,!1);break}else{if(a=t.current.alternate,m&&!ES(a)){f=pm(t,i,!1),m=!1;continue}if(f===2){if(m=i,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var E=t;f=nc;var O=E.current.memoizedState.isDehydrated;if(O&&(No(E,_).flags|=256),_=pm(E,_,!1),_!==2){if(lm&&!O){E.errorRecoveryDisabledLanes|=m,Aa|=m,f=4;break e}m=Ln,Ln=f,m!==null&&(Ln===null?Ln=m:Ln.push.apply(Ln,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){No(t,0),br(t,i,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:br(l,i,Jn,!gr);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=Zu+300-cn(),10<f)){if(br(l,i,Jn,!gr),Es(l,0,!0)!==0)break e;Oi=i,l.timeoutHandle=i_(Rv.bind(null,l,a,Ln,th,um,i,Jn,Aa,So,gr,m,"Throttled",-0,0),f);break e}Rv(l,a,Ln,th,um,i,Jn,Aa,So,gr,m,null,-0,0)}}break}while(!0);ai(t)}function Rv(t,i,a,l,f,m,_,E,O,B,Y,ee,H,K){if(t.timeoutHandle=-1,ee=i.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ns},bv(i,m,ee);var _e=(m&62914560)===m?Zu-cn():(m&4194048)===m?Tv-cn():0;if(_e=oA(ee,_e),_e!==null){Oi=m,t.cancelPendingCommit=_e(Vv.bind(null,t,i,m,a,l,f,_,E,O,Y,ee,null,H,K)),br(t,m,_,!B);return}}Vv(t,i,m,a,l,f,_,E,O)}function ES(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!Kn(m(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function br(t,i,a,l){i&=~cm,i&=~Aa,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var m=31-Qe(f),_=1<<m;l[m]=-1,f&=~_}a!==0&&ta(t,a,i)}function nh(){return(ot&6)===0?(ic(0),!1):!0}function mm(){if($e!==null){if(ht===0)var t=$e.return;else t=$e,Ei=ya=null,Cf(t),yo=null,zl=0,t=$e;for(;t!==null;)rv(t.alternate,t),t=t.return;$e=null}}function No(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,HS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Oi=0,mm(),vt=t,$e=a=xi(t.current,null),Ye=i,ht=0,Wn=null,gr=!1,To=Ts(t,i),lm=!1,So=Jn=cm=Aa=yr=kt=0,Ln=nc=null,um=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-Qe(l),m=1<<f;i|=t[f],l&=~m}return ki=i,Eu(),a}function Iv(t,i){qe=null,F.H=Ql,i===go||i===Du?(i=Gy(),ht=3):i===vf?(i=Gy(),ht=4):ht=i===$f?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Wn=i,$e===null&&(kt=1,Gu(t,fs(i,t.current)))}function Cv(){var t=Yn.current;return t===null?!0:(Ye&4194048)===Ye?ys===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?t===ys:!1}function Dv(){var t=F.H;return F.H=Ql,t===null?Ql:t}function jv(){var t=F.A;return F.A=xS,t}function sh(){kt=4,gr||(Ye&4194048)!==Ye&&Yn.current!==null||(To=!0),(yr&134217727)===0&&(Aa&134217727)===0||vt===null||br(vt,Ye,Jn,!1)}function pm(t,i,a){var l=ot;ot|=2;var f=Dv(),m=jv();(vt!==t||Ye!==i)&&(th=null,No(t,i)),i=!1;var _=kt;e:do try{if(ht!==0&&$e!==null){var E=$e,O=Wn;switch(ht){case 8:mm(),_=6;break e;case 3:case 2:case 9:case 6:Yn.current===null&&(i=!0);var B=ht;if(ht=0,Wn=null,Ro(t,E,O,B),a&&To){_=0;break e}break;default:B=ht,ht=0,Wn=null,Ro(t,E,O,B)}}TS(),_=kt;break}catch(Y){Iv(t,Y)}while(!0);return i&&t.shellSuspendCounter++,Ei=ya=null,ot=l,F.H=f,F.A=m,$e===null&&(vt=null,Ye=0,Eu()),_}function TS(){for(;$e!==null;)kv($e)}function SS(t,i){var a=ot;ot|=2;var l=Dv(),f=jv();vt!==t||Ye!==i?(th=null,eh=cn()+500,No(t,i)):To=Ts(t,i);e:do try{if(ht!==0&&$e!==null){i=$e;var m=Wn;t:switch(ht){case 1:ht=0,Wn=null,Ro(t,i,m,1);break;case 2:case 9:if(Hy(m)){ht=0,Wn=null,Ov(i);break}i=function(){ht!==2&&ht!==9||vt!==t||(ht=7),ai(t)},m.then(i,i);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:Hy(m)?(ht=0,Wn=null,Ov(i)):(ht=0,Wn=null,Ro(t,i,m,7));break;case 5:var _=null;switch($e.tag){case 26:_=$e.memoizedState;case 5:case 27:var E=$e;if(_?__(_):E.stateNode.complete){ht=0,Wn=null;var O=E.sibling;if(O!==null)$e=O;else{var B=E.return;B!==null?($e=B,ih(B)):$e=null}break t}}ht=0,Wn=null,Ro(t,i,m,5);break;case 6:ht=0,Wn=null,Ro(t,i,m,6);break;case 8:mm(),kt=6;break e;default:throw Error(r(462))}}AS();break}catch(Y){Iv(t,Y)}while(!0);return Ei=ya=null,F.H=l,F.A=f,ot=a,$e!==null?0:(vt=null,Ye=0,Eu(),kt)}function AS(){for(;$e!==null&&!ml();)kv($e)}function kv(t){var i=sv(t.alternate,t,ki);t.memoizedProps=t.pendingProps,i===null?ih(t):$e=i}function Ov(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=W0(a,i,i.pendingProps,i.type,void 0,Ye);break;case 11:i=W0(a,i,i.pendingProps,i.type.render,i.ref,Ye);break;case 5:Cf(i);default:rv(a,i),i=$e=jy(i,ki),i=sv(a,i,ki)}t.memoizedProps=t.pendingProps,i===null?ih(t):$e=i}function Ro(t,i,a,l){Ei=ya=null,Cf(i),yo=null,zl=0;var f=i.return;try{if(mS(t,f,i,a,Ye)){kt=1,Gu(t,fs(a,t.current)),$e=null;return}}catch(m){if(f!==null)throw $e=f,m;kt=1,Gu(t,fs(a,t.current)),$e=null;return}i.flags&32768?(et||l===1?t=!0:To||(Ye&536870912)!==0?t=!1:(gr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Yn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Mv(i,t)):ih(i)}function ih(t){var i=t;do{if((i.flags&32768)!==0){Mv(i,gr);return}t=i.return;var a=yS(i.alternate,i,ki);if(a!==null){$e=a;return}if(i=i.sibling,i!==null){$e=i;return}$e=i=t}while(i!==null);kt===0&&(kt=5)}function Mv(t,i){do{var a=vS(t.alternate,t);if(a!==null){a.flags&=32767,$e=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){$e=t;return}$e=t=a}while(t!==null);kt=6,$e=null}function Vv(t,i,a,l,f,m,_,E,O){t.cancelPendingCommit=null;do rh();while(Zt!==0);if((ot&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(m=i.lanes|i.childLanes,m|=nf,Kd(t,a,m,_,E,O),t===vt&&($e=vt=null,Ye=0),Ao=i,_r=t,Oi=a,hm=m,dm=f,Sv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,CS(W,function(){return Bv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=F.T,F.T=null,f=se.p,se.p=2,_=ot,ot|=4;try{_S(t,i,a)}finally{ot=_,se.p=f,F.T=l}}Zt=1,Pv(),Lv(),Uv()}}function Pv(){if(Zt===1){Zt=0;var t=_r,i=Ao,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var l=se.p;se.p=2;var f=ot;ot|=4;try{yv(i,t);var m=Nm,_=Ey(t.containerInfo),E=m.focusedElem,O=m.selectionRange;if(_!==E&&E&&E.ownerDocument&&wy(E.ownerDocument.documentElement,E)){if(O!==null&&Wd(E)){var B=O.start,Y=O.end;if(Y===void 0&&(Y=B),"selectionStart"in E)E.selectionStart=B,E.selectionEnd=Math.min(Y,E.value.length);else{var ee=E.ownerDocument||document,H=ee&&ee.defaultView||window;if(H.getSelection){var K=H.getSelection(),_e=E.textContent.length,De=Math.min(O.start,_e),gt=O.end===void 0?De:Math.min(O.end,_e);!K.extend&&De>gt&&(_=gt,gt=De,De=_);var P=xy(E,De),V=xy(E,gt);if(P&&V&&(K.rangeCount!==1||K.anchorNode!==P.node||K.anchorOffset!==P.offset||K.focusNode!==V.node||K.focusOffset!==V.offset)){var z=ee.createRange();z.setStart(P.node,P.offset),K.removeAllRanges(),De>gt?(K.addRange(z),K.extend(V.node,V.offset)):(z.setEnd(V.node,V.offset),K.addRange(z))}}}}for(ee=[],K=E;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ee.length;E++){var J=ee[E];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}yh=!!Am,Nm=Am=null}finally{ot=f,se.p=l,F.T=a}}t.current=i,Zt=2}}function Lv(){if(Zt===2){Zt=0;var t=_r,i=Ao,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var l=se.p;se.p=2;var f=ot;ot|=4;try{dv(t,i.alternate,i)}finally{ot=f,se.p=l,F.T=a}}Zt=3}}function Uv(){if(Zt===4||Zt===3){Zt=0,$a();var t=_r,i=Ao,a=Oi,l=Sv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Zt=5:(Zt=0,Ao=_r=null,zv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(vr=null),yi(a),i=i.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(Te,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=F.T,f=se.p,se.p=2,F.T=null;try{for(var m=t.onRecoverableError,_=0;_<l.length;_++){var E=l[_];m(E.value,{componentStack:E.stack})}}finally{F.T=i,se.p=f}}(Oi&3)!==0&&rh(),ai(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===fm?sc++:(sc=0,fm=t):sc=0,ic(0)}}function zv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Ll(i)))}function rh(){return Pv(),Lv(),Uv(),Bv()}function Bv(){if(Zt!==5)return!1;var t=_r,i=hm;hm=0;var a=yi(Oi),l=F.T,f=se.p;try{se.p=32>a?32:a,F.T=null,a=dm,dm=null;var m=_r,_=Oi;if(Zt=0,Ao=_r=null,Oi=0,(ot&6)!==0)throw Error(r(331));var E=ot;if(ot|=4,wv(m.current),_v(m,m.current,_,a),ot=E,ic(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(Te,m)}catch{}return!0}finally{se.p=f,F.T=l,zv(t,i)}}function qv(t,i,a){i=fs(a,i),i=Gf(t.stateNode,i,2),t=dr(t,i,2),t!==null&&(ea(t,2),ai(t))}function dt(t,i,a){if(t.tag===3)qv(t,t,a);else for(;i!==null;){if(i.tag===3){qv(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(vr===null||!vr.has(l))){t=fs(a,t),a=H0(2),l=dr(i,a,2),l!==null&&(F0(a,l,i,t),ea(l,2),ai(l));break}}i=i.return}}function gm(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new wS;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(lm=!0,f.add(a),t=NS.bind(null,t,i,a),i.then(t,t))}function NS(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,vt===t&&(Ye&a)===a&&(kt===4||kt===3&&(Ye&62914560)===Ye&&300>cn()-Zu?(ot&2)===0&&No(t,0):cm|=a,So===Ye&&(So=0)),ai(t)}function Hv(t,i){i===0&&(i=tu()),t=ma(t,i),t!==null&&(ea(t,i),ai(t))}function RS(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Hv(t,a)}function IS(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Hv(t,a)}function CS(t,i){return Vt(t,i)}var ah=null,Io=null,ym=!1,oh=!1,vm=!1,xr=0;function ai(t){t!==Io&&t.next===null&&(Io===null?ah=Io=t:Io=Io.next=t),oh=!0,ym||(ym=!0,jS())}function ic(t,i){if(!vm&&oh){vm=!0;do for(var a=!1,l=ah;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var _=l.suspendedLanes,E=l.pingedLanes;m=(1<<31-Qe(42|t)+1)-1,m&=f&~(_&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Kv(l,m))}else m=Ye,m=Es(l,l===vt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Ts(l,m)||(a=!0,Kv(l,m));l=l.next}while(a);vm=!1}}function DS(){Fv()}function Fv(){oh=ym=!1;var t=0;xr!==0&&qS()&&(t=xr);for(var i=cn(),a=null,l=ah;l!==null;){var f=l.next,m=Gv(l,i);m===0?(l.next=null,a===null?ah=f:a.next=f,f===null&&(Io=a)):(a=l,(t!==0||(m&3)!==0)&&(oh=!0)),l=f}Zt!==0&&Zt!==5||ic(t),xr!==0&&(xr=0)}function Gv(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-Qe(m),E=1<<_,O=f[_];O===-1?((E&a)===0||(E&l)!==0)&&(f[_]=$d(E,i)):O<=i&&(t.expiredLanes|=E),m&=~E}if(i=vt,a=Ye,a=Es(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(ht===2||ht===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&qs(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Ts(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&qs(l),yi(a)){case 2:case 8:a=Zr;break;case 32:a=W;break;case 268435456:a=Re;break;default:a=W}return l=$v.bind(null,t),a=Vt(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&qs(l),t.callbackPriority=2,t.callbackNode=null,2}function $v(t,i){if(Zt!==0&&Zt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(rh()&&t.callbackNode!==a)return null;var l=Ye;return l=Es(t,t===vt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Nv(t,l,i),Gv(t,cn()),t.callbackNode!=null&&t.callbackNode===a?$v.bind(null,t):null)}function Kv(t,i){if(rh())return null;Nv(t,i,!0)}function jS(){FS(function(){(ot&6)!==0?Vt(Jr,DS):Fv()})}function _m(){if(xr===0){var t=mo;t===0&&(t=An,An<<=1,(An&261888)===0&&(An=256)),xr=t}return xr}function Qv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ja(""+t)}function Yv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function kS(t,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var m=Qv((f[nn]||null).action),_=l.submitter;_&&(i=(i=_[nn]||null)?Qv(i.formAction):_.getAttribute("formAction"),i!==null&&(m=i,_=null));var E=new Zs("action","action",null,l,f);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(xr!==0){var O=_?Yv(f,_):new FormData(f);Uf(a,{pending:!0,data:O,method:f.method,action:m},null,O)}}else typeof m=="function"&&(E.preventDefault(),O=_?Yv(f,_):new FormData(f),Uf(a,{pending:!0,data:O,method:f.method,action:m},m,O))},currentTarget:f}]})}}for(var bm=0;bm<tf.length;bm++){var xm=tf[bm],OS=xm.toLowerCase(),MS=xm[0].toUpperCase()+xm.slice(1);js(OS,"on"+MS)}js(Ay,"onAnimationEnd"),js(Ny,"onAnimationIteration"),js(Ry,"onAnimationStart"),js("dblclick","onDoubleClick"),js("focusin","onFocus"),js("focusout","onBlur"),js(WT,"onTransitionRun"),js(JT,"onTransitionStart"),js(ZT,"onTransitionCancel"),js(Iy,"onTransitionEnd"),Ys("onMouseEnter",["mouseout","mouseover"]),Ys("onMouseLeave",["mouseout","mouseover"]),Ys("onPointerEnter",["pointerout","pointerover"]),Ys("onPointerLeave",["pointerout","pointerover"]),Qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rc));function Xv(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var m=void 0;if(i)for(var _=l.length-1;0<=_;_--){var E=l[_],O=E.instance,B=E.currentTarget;if(E=E.listener,O!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=B;try{m(f)}catch(Y){wu(Y)}f.currentTarget=null,m=O}else for(_=0;_<l.length;_++){if(E=l[_],O=E.instance,B=E.currentTarget,E=E.listener,O!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=B;try{m(f)}catch(Y){wu(Y)}f.currentTarget=null,m=O}}}}function Ke(t,i){var a=i[Ka];a===void 0&&(a=i[Ka]=new Set);var l=t+"__bubble";a.has(l)||(Wv(i,t,2,!1),a.add(l))}function wm(t,i,a){var l=0;i&&(l|=4),Wv(a,t,l,i)}var lh="_reactListening"+Math.random().toString(36).slice(2);function Em(t){if(!t[lh]){t[lh]=!0,yl.forEach(function(a){a!=="selectionchange"&&(VS.has(a)||wm(a,!1,t),wm(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[lh]||(i[lh]=!0,wm("selectionchange",!1,i))}}function Wv(t,i,a,l){switch(A_(i)){case 2:var f=uA;break;case 8:f=hA;break;default:f=Lm}a=f.bind(null,i,a,t),f=void 0,!aa||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,a,{capture:!0,passive:f}):t.addEventListener(i,a,!0):f!==void 0?t.addEventListener(i,a,{passive:f}):t.addEventListener(i,a,!1)}function Tm(t,i,a,l,f){var m=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var E=l.stateNode.containerInfo;if(E===f)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;E!==null;){if(_=$s(E),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=m=_;continue e}E=E.parentNode}}l=l.return}nr(function(){var B=m,Y=cs(a),ee=[];e:{var H=Cy.get(t);if(H!==void 0){var K=Zs,_e=t;switch(t){case"keypress":if(la(a)===0)break e;case"keydown":case"keyup":K=_u;break;case"focusin":_e="focus",K=ua;break;case"focusout":_e="blur",K=ua;break;case"beforeblur":case"afterblur":K=ua;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=v;break;case Ay:case Ny:case Ry:K=du;break;case Iy:K=S;break;case"scroll":case"scrollend":K=Il;break;case"wheel":K=$;break;case"copy":case"cut":case"paste":K=fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=bi;break;case"toggle":case"beforetoggle":K=Be}var De=(i&4)!==0,gt=!De&&(t==="scroll"||t==="scrollend"),P=De?H!==null?H+"Capture":null:H;De=[];for(var V=B,z;V!==null;){var J=V;if(z=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||z===null||P===null||(J=Rs(V,P),J!=null&&De.push(ac(V,J,z))),gt)break;V=V.return}0<De.length&&(H=new K(H,_e,null,a,Y),ee.push({event:H,listeners:De}))}}if((i&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",H&&a!==Al&&(_e=a.relatedTarget||a.fromElement)&&($s(_e)||_e[Fs]))break e;if((K||H)&&(H=Y.window===Y?Y:(H=Y.ownerDocument)?H.defaultView||H.parentWindow:window,K?(_e=a.relatedTarget||a.toElement,K=B,_e=_e?$s(_e):null,_e!==null&&(gt=c(_e),De=_e.tag,_e!==gt||De!==5&&De!==27&&De!==6)&&(_e=null)):(K=null,_e=B),K!==_e)){if(De=Cl,J="onMouseLeave",P="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(De=bi,J="onPointerLeave",P="onPointerEnter",V="pointer"),gt=K==null?H:Gn(K),z=_e==null?H:Gn(_e),H=new De(J,V+"leave",K,a,Y),H.target=gt,H.relatedTarget=z,J=null,$s(Y)===B&&(De=new De(P,V+"enter",_e,a,Y),De.target=z,De.relatedTarget=gt,J=De),gt=J,K&&_e)t:{for(De=PS,P=K,V=_e,z=0,J=P;J;J=De(J))z++;J=0;for(var Ce=V;Ce;Ce=De(Ce))J++;for(;0<z-J;)P=De(P),z--;for(;0<J-z;)V=De(V),J--;for(;z--;){if(P===V||V!==null&&P===V.alternate){De=P;break t}P=De(P),V=De(V)}De=null}else De=null;K!==null&&Jv(ee,H,K,De,!1),_e!==null&&gt!==null&&Jv(ee,gt,_e,De,!0)}}e:{if(H=B?Gn(B):window,K=H.nodeName&&H.nodeName.toLowerCase(),K==="select"||K==="input"&&H.type==="file")var st=py;else if(fy(H))if(gy)st=QT;else{st=$T;var Ee=GT}else K=H.nodeName,!K||K.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?B&&Wa(B.elementType)&&(st=py):st=KT;if(st&&(st=st(t,B))){my(ee,st,a,Y);break e}Ee&&Ee(t,H,B),t==="focusout"&&B&&H.type==="number"&&B.memoizedProps.value!=null&&El(H,"number",H.value)}switch(Ee=B?Gn(B):window,t){case"focusin":(fy(Ee)||Ee.contentEditable==="true")&&(ro=Ee,Jd=B,Ml=null);break;case"focusout":Ml=Jd=ro=null;break;case"mousedown":Zd=!0;break;case"contextmenu":case"mouseup":case"dragend":Zd=!1,Ty(ee,a,Y);break;case"selectionchange":if(XT)break;case"keydown":case"keyup":Ty(ee,a,Y)}var He;if(at)e:{switch(t){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else io?ha(t,a)&&(Xe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Xe="onCompositionStart");Xe&&(ni&&a.locale!=="ko"&&(io||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&io&&(He=Rl()):(Js=Y,Nl="value"in Js?Js.value:Js.textContent,io=!0)),Ee=ch(B,Xe),0<Ee.length&&(Xe=new ti(Xe,t,null,a,Y),ee.push({event:Xe,listeners:Ee}),He?Xe.data=He:(He=so(a),He!==null&&(Xe.data=He)))),(He=hs?BT(t,a):qT(t,a))&&(Xe=ch(B,"onBeforeInput"),0<Xe.length&&(Ee=new ti("onBeforeInput","beforeinput",null,a,Y),ee.push({event:Ee,listeners:Xe}),Ee.data=He)),kS(ee,t,B,a,Y)}Xv(ee,i)})}function ac(t,i,a){return{instance:t,listener:i,currentTarget:a}}function ch(t,i){for(var a=i+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Rs(t,a),f!=null&&l.unshift(ac(t,f,m)),f=Rs(t,i),f!=null&&l.push(ac(t,f,m))),t.tag===3)return l;t=t.return}return[]}function PS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Jv(t,i,a,l,f){for(var m=i._reactName,_=[];a!==null&&a!==l;){var E=a,O=E.alternate,B=E.stateNode;if(E=E.tag,O!==null&&O===l)break;E!==5&&E!==26&&E!==27||B===null||(O=B,f?(B=Rs(a,m),B!=null&&_.unshift(ac(a,B,O))):f||(B=Rs(a,m),B!=null&&_.push(ac(a,B,O)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var LS=/\r\n?/g,US=/\u0000|\uFFFD/g;function Zv(t){return(typeof t=="string"?t:""+t).replace(LS,`
`).replace(US,"")}function e_(t,i){return i=Zv(i),Zv(t)===i}function pt(t,i,a,l,f,m){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||On(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&On(t,""+l);break;case"className":$n(t,"class",l);break;case"tabIndex":$n(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(t,a,l);break;case"style":Sl(t,l,m);break;case"data":if(i!=="object"){$n(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ja(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&pt(t,i,"name",f.name,f,null),pt(t,i,"formEncType",f.formEncType,f,null),pt(t,i,"formMethod",f.formMethod,f,null),pt(t,i,"formTarget",f.formTarget,f,null)):(pt(t,i,"encType",f.encType,f,null),pt(t,i,"method",f.method,f,null),pt(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ja(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Ns);break;case"onScroll":l!=null&&Ke("scroll",t);break;case"onScrollEnd":l!=null&&Ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ja(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ke("beforetoggle",t),Ke("toggle",t),Ya(t,"popover",l);break;case"xlinkActuate":Ft(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ft(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ft(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ft(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ft(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ft(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ft(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ft(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ft(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ya(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cu.get(a)||a,Ya(t,a,l))}}function Sm(t,i,a,l,f,m){switch(a){case"style":Sl(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?On(t,l):(typeof l=="number"||typeof l=="bigint")&&On(t,""+l);break;case"onScroll":l!=null&&Ke("scroll",t);break;case"onScrollEnd":l!=null&&Ke("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ns);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),m=t[nn]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(i,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ya(t,a,l)}}}function mn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",t),Ke("load",t);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:pt(t,i,m,_,a,null)}}f&&pt(t,i,"srcSet",a.srcSet,a,null),l&&pt(t,i,"src",a.src,a,null);return;case"input":Ke("invalid",t);var E=m=_=f=null,O=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var Y=a[l];if(Y!=null)switch(l){case"name":f=Y;break;case"type":_=Y;break;case"checked":O=Y;break;case"defaultChecked":B=Y;break;case"value":m=Y;break;case"defaultValue":E=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:pt(t,i,l,Y,a,null)}}au(t,m,E,O,B,_,f,!1);return;case"select":Ke("invalid",t),l=_=m=null;for(f in a)if(a.hasOwnProperty(f)&&(E=a[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":_=E;break;case"multiple":l=E;default:pt(t,i,f,E,a,null)}i=m,a=_,t.multiple=!!l,i!=null?Ji(t,!!l,i,!1):a!=null&&Ji(t,!!l,a,!0);return;case"textarea":Ke("invalid",t),m=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":l=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:pt(t,i,_,E,a,null)}Zi(t,l,f,m);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:pt(t,i,O,l,a,null)}return;case"dialog":Ke("beforetoggle",t),Ke("toggle",t),Ke("cancel",t),Ke("close",t);break;case"iframe":case"object":Ke("load",t);break;case"video":case"audio":for(l=0;l<rc.length;l++)Ke(rc[l],t);break;case"image":Ke("error",t),Ke("load",t);break;case"details":Ke("toggle",t);break;case"embed":case"source":case"link":Ke("error",t),Ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:pt(t,i,B,l,a,null)}return;default:if(Wa(i)){for(Y in a)a.hasOwnProperty(Y)&&(l=a[Y],l!==void 0&&Sm(t,i,Y,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&pt(t,i,E,l,a,null))}function zS(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,E=null,O=null,B=null,Y=null;for(K in a){var ee=a[K];if(a.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":O=ee;default:l.hasOwnProperty(K)||pt(t,i,K,null,l,ee)}}for(var H in l){var K=l[H];if(ee=a[H],l.hasOwnProperty(H)&&(K!=null||ee!=null))switch(H){case"type":m=K;break;case"name":f=K;break;case"checked":B=K;break;case"defaultChecked":Y=K;break;case"value":_=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:K!==ee&&pt(t,i,H,K,l,ee)}}Xa(t,_,E,O,B,Y,m,f);return;case"select":K=_=E=H=null;for(m in a)if(O=a[m],a.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":K=O;default:l.hasOwnProperty(m)||pt(t,i,m,null,l,O)}for(f in l)if(m=l[f],O=a[f],l.hasOwnProperty(f)&&(m!=null||O!=null))switch(f){case"value":H=m;break;case"defaultValue":E=m;break;case"multiple":_=m;default:m!==O&&pt(t,i,f,m,l,O)}i=E,a=_,l=K,H!=null?Ji(t,!!a,H,!1):!!l!=!!a&&(i!=null?Ji(t,!!a,i,!0):Ji(t,!!a,a?[]:"",!1));return;case"textarea":K=H=null;for(E in a)if(f=a[E],a.hasOwnProperty(E)&&f!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:pt(t,i,E,null,l,f)}for(_ in l)if(f=l[_],m=a[_],l.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":H=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&pt(t,i,_,f,l,m)}ou(t,H,K);return;case"option":for(var _e in a)if(H=a[_e],a.hasOwnProperty(_e)&&H!=null&&!l.hasOwnProperty(_e))switch(_e){case"selected":t.selected=!1;break;default:pt(t,i,_e,null,l,H)}for(O in l)if(H=l[O],K=a[O],l.hasOwnProperty(O)&&H!==K&&(H!=null||K!=null))switch(O){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:pt(t,i,O,H,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in a)H=a[De],a.hasOwnProperty(De)&&H!=null&&!l.hasOwnProperty(De)&&pt(t,i,De,null,l,H);for(B in l)if(H=l[B],K=a[B],l.hasOwnProperty(B)&&H!==K&&(H!=null||K!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:pt(t,i,B,H,l,K)}return;default:if(Wa(i)){for(var gt in a)H=a[gt],a.hasOwnProperty(gt)&&H!==void 0&&!l.hasOwnProperty(gt)&&Sm(t,i,gt,void 0,l,H);for(Y in l)H=l[Y],K=a[Y],!l.hasOwnProperty(Y)||H===K||H===void 0&&K===void 0||Sm(t,i,Y,H,l,K);return}}for(var P in a)H=a[P],a.hasOwnProperty(P)&&H!=null&&!l.hasOwnProperty(P)&&pt(t,i,P,null,l,H);for(ee in l)H=l[ee],K=a[ee],!l.hasOwnProperty(ee)||H===K||H==null&&K==null||pt(t,i,ee,H,l,K)}function t_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],m=f.transferSize,_=f.initiatorType,E=f.duration;if(m&&E&&t_(_)){for(_=0,E=f.responseEnd,l+=1;l<a.length;l++){var O=a[l],B=O.startTime;if(B>E)break;var Y=O.transferSize,ee=O.initiatorType;Y&&t_(ee)&&(O=O.responseEnd,_+=Y*(O<E?1:(E-B)/(O-B)))}if(--l,i+=8*(m+_)/(f.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Am=null,Nm=null;function uh(t){return t.nodeType===9?t:t.ownerDocument}function n_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function s_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Rm(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Im=null;function qS(){var t=window.event;return t&&t.type==="popstate"?t===Im?!1:(Im=t,!0):(Im=null,!1)}var i_=typeof setTimeout=="function"?setTimeout:void 0,HS=typeof clearTimeout=="function"?clearTimeout:void 0,r_=typeof Promise=="function"?Promise:void 0,FS=typeof queueMicrotask=="function"?queueMicrotask:typeof r_<"u"?function(t){return r_.resolve(null).then(t).catch(GS)}:i_;function GS(t){setTimeout(function(){throw t})}function wr(t){return t==="head"}function a_(t,i){var a=i,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),ko(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")oc(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,oc(a);for(var m=a.firstChild;m;){var _=m.nextSibling,E=m.nodeName;m[Gs]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&oc(t.ownerDocument.body);a=f}while(a);ko(i)}function o_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Cm(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Cm(a),Qa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function $S(t,i,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Gs])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=vs(t.nextSibling),t===null)break}return null}function KS(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=vs(t.nextSibling),t===null))return null;return t}function l_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=vs(t.nextSibling),t===null))return null;return t}function Dm(t){return t.data==="$?"||t.data==="$~"}function jm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function QS(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function vs(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var km=null;function c_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return vs(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function u_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function h_(t,i,a){switch(i=uh(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function oc(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Qa(t)}var _s=new Map,d_=new Set;function hh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Mi=se.d;se.d={f:YS,r:XS,D:WS,C:JS,L:ZS,m:eA,X:nA,S:tA,M:sA};function YS(){var t=Mi.f(),i=nh();return t||i}function XS(t){var i=ls(t);i!==null&&i.tag===5&&i.type==="form"?I0(i):Mi.r(t)}var Co=typeof document>"u"?null:document;function f_(t,i,a){var l=Co;if(l&&typeof i=="string"&&i){var f=kn(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),d_.has(f)||(d_.add(f),t={rel:t,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),mn(i,"link",t),Ht(i),l.head.appendChild(i)))}}function WS(t){Mi.D(t),f_("dns-prefetch",t,null)}function JS(t,i){Mi.C(t,i),f_("preconnect",t,i)}function ZS(t,i,a){Mi.L(t,i,a);var l=Co;if(l&&t&&i){var f='link[rel="preload"][as="'+kn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+kn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+kn(a.imageSizes)+'"]')):f+='[href="'+kn(t)+'"]';var m=f;switch(i){case"style":m=Do(t);break;case"script":m=jo(t)}_s.has(m)||(t=w({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),_s.set(m,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(lc(m))||i==="script"&&l.querySelector(cc(m))||(i=l.createElement("link"),mn(i,"link",t),Ht(i),l.head.appendChild(i)))}}function eA(t,i){Mi.m(t,i);var a=Co;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+kn(l)+'"][href="'+kn(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=jo(t)}if(!_s.has(m)&&(t=w({rel:"modulepreload",href:t},i),_s.set(m,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(cc(m)))return}l=a.createElement("link"),mn(l,"link",t),Ht(l),a.head.appendChild(l)}}}function tA(t,i,a){Mi.S(t,i,a);var l=Co;if(l&&t){var f=Ks(l).hoistableStyles,m=Do(t);i=i||"default";var _=f.get(m);if(!_){var E={loading:0,preload:null};if(_=l.querySelector(lc(m)))E.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":i},a),(a=_s.get(m))&&Om(t,a);var O=_=l.createElement("link");Ht(O),mn(O,"link",t),O._p=new Promise(function(B,Y){O.onload=B,O.onerror=Y}),O.addEventListener("load",function(){E.loading|=1}),O.addEventListener("error",function(){E.loading|=2}),E.loading|=4,dh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:E},f.set(m,_)}}}function nA(t,i){Mi.X(t,i);var a=Co;if(a&&t){var l=Ks(a).hoistableScripts,f=jo(t),m=l.get(f);m||(m=a.querySelector(cc(f)),m||(t=w({src:t,async:!0},i),(i=_s.get(f))&&Mm(t,i),m=a.createElement("script"),Ht(m),mn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function sA(t,i){Mi.M(t,i);var a=Co;if(a&&t){var l=Ks(a).hoistableScripts,f=jo(t),m=l.get(f);m||(m=a.querySelector(cc(f)),m||(t=w({src:t,async:!0,type:"module"},i),(i=_s.get(f))&&Mm(t,i),m=a.createElement("script"),Ht(m),mn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function m_(t,i,a,l){var f=(f=Q.current)?hh(f):null;if(!f)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Do(a.href),a=Ks(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Do(a.href);var m=Ks(f).hoistableStyles,_=m.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=f.querySelector(lc(t)))&&!m._p&&(_.instance=m,_.state.loading=5),_s.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},_s.set(t,a),m||iA(f,t,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=jo(a),a=Ks(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Do(t){return'href="'+kn(t)+'"'}function lc(t){return'link[rel="stylesheet"]['+t+"]"}function p_(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function iA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),mn(i,"link",a),Ht(i),t.head.appendChild(i))}function jo(t){return'[src="'+kn(t)+'"]'}function cc(t){return"script[async]"+t}function g_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+kn(a.href)+'"]');if(l)return i.instance=l,Ht(l),l;var f=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ht(l),mn(l,"style",f),dh(l,a.precedence,t),i.instance=l;case"stylesheet":f=Do(a.href);var m=t.querySelector(lc(f));if(m)return i.state.loading|=4,i.instance=m,Ht(m),m;l=p_(a),(f=_s.get(f))&&Om(l,f),m=(t.ownerDocument||t).createElement("link"),Ht(m);var _=m;return _._p=new Promise(function(E,O){_.onload=E,_.onerror=O}),mn(m,"link",l),i.state.loading|=4,dh(m,a.precedence,t),i.instance=m;case"script":return m=jo(a.src),(f=t.querySelector(cc(m)))?(i.instance=f,Ht(f),f):(l=a,(f=_s.get(m))&&(l=w({},a),Mm(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),Ht(f),mn(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,dh(l,a.precedence,t));return i.instance}function dh(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,_=0;_<l.length;_++){var E=l[_];if(E.dataset.precedence===i)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Om(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Mm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var fh=null;function y_(t,i,a){if(fh===null){var l=new Map,f=fh=new Map;f.set(a,l)}else f=fh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[Gs]||m[qt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(i)||"";_=t+_;var E=l.get(_);E?E.push(m):l.set(_,[m])}}return l}function v_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function rA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function __(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function aA(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Do(l.href),m=i.querySelector(lc(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=mh.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=m,Ht(m);return}m=i.ownerDocument||i,l=p_(l),(f=_s.get(f))&&Om(l,f),m=m.createElement("link"),Ht(m);var _=m;_._p=new Promise(function(E,O){_.onload=E,_.onerror=O}),mn(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=mh.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Vm=0;function oA(t,i){return t.stylesheets&&t.count===0&&gh(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&gh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+i);0<t.imgBytes&&Vm===0&&(Vm=62500*BS());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&gh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Vm?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function mh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ph=null;function gh(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ph=new Map,i.forEach(lA,t),ph=null,mh.call(t))}function lA(t,i){if(!(i.state.loading&4)){var a=ph.get(t);if(a)var l=a.get(null);else{a=new Map,ph.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),m=a.get(_)||l,m===l&&a.set(null,f),a.set(_,f),this.count++,l=mh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var uc={$$typeof:de,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function cA(t,i,a,l,f,m,_,E,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hs(0),this.hiddenUpdates=Hs(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function b_(t,i,a,l,f,m,_,E,O,B,Y,ee){return t=new cA(t,i,a,_,O,B,Y,ee,E),i=1,m===!0&&(i|=24),m=Qn(3,null,null,i),t.current=m,m.stateNode=t,i=pf(),i.refCount++,t.pooledCache=i,i.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:i},_f(m),t}function x_(t){return t?(t=lo,t):lo}function w_(t,i,a,l,f,m){f=x_(f),l.context===null?l.context=f:l.pendingContext=f,l=hr(i),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=dr(t,l,i),a!==null&&(Un(a,t,i),ql(a,t,i))}function E_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Pm(t,i){E_(t,i),(t=t.alternate)&&E_(t,i)}function T_(t){if(t.tag===13||t.tag===31){var i=ma(t,67108864);i!==null&&Un(i,t,67108864),Pm(t,67108864)}}function S_(t){if(t.tag===13||t.tag===31){var i=Zn();i=na(i);var a=ma(t,i);a!==null&&Un(a,t,i),Pm(t,i)}}var yh=!0;function uA(t,i,a,l){var f=F.T;F.T=null;var m=se.p;try{se.p=2,Lm(t,i,a,l)}finally{se.p=m,F.T=f}}function hA(t,i,a,l){var f=F.T;F.T=null;var m=se.p;try{se.p=8,Lm(t,i,a,l)}finally{se.p=m,F.T=f}}function Lm(t,i,a,l){if(yh){var f=Um(l);if(f===null)Tm(t,i,l,vh,a),N_(t,l);else if(fA(f,t,i,a,l))l.stopPropagation();else if(N_(t,l),i&4&&-1<dA.indexOf(t)){for(;f!==null;){var m=ls(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Fn(m.pendingLanes);if(_!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var O=1<<31-Qe(_);E.entanglements[1]|=O,_&=~O}ai(m),(ot&6)===0&&(eh=cn()+500,ic(0))}}break;case 31:case 13:E=ma(m,2),E!==null&&Un(E,m,2),nh(),Pm(m,2)}if(m=Um(l),m===null&&Tm(t,i,l,vh,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else Tm(t,i,l,null,a)}}function Um(t){return t=cs(t),zm(t)}var vh=null;function zm(t){if(vh=null,t=$s(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===31){if(t=p(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return vh=t,null}function A_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pi()){case Jr:return 2;case Zr:return 8;case W:case Ae:return 32;case Re:return 268435456;default:return 32}default:return 32}}var Bm=!1,Er=null,Tr=null,Sr=null,hc=new Map,dc=new Map,Ar=[],dA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function N_(t,i){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":hc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":dc.delete(i.pointerId)}}function fc(t,i,a,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},i!==null&&(i=ls(i),i!==null&&T_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function fA(t,i,a,l,f){switch(i){case"focusin":return Er=fc(Er,t,i,a,l,f),!0;case"dragenter":return Tr=fc(Tr,t,i,a,l,f),!0;case"mouseover":return Sr=fc(Sr,t,i,a,l,f),!0;case"pointerover":var m=f.pointerId;return hc.set(m,fc(hc.get(m)||null,t,i,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,dc.set(m,fc(dc.get(m)||null,t,i,a,l,f)),!0}return!1}function R_(t){var i=$s(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,Ss(t.priority,function(){S_(a)});return}}else if(i===31){if(i=p(a),i!==null){t.blockedOn=i,Ss(t.priority,function(){S_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _h(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Um(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Al=l,a.target.dispatchEvent(l),Al=null}else return i=ls(a),i!==null&&T_(i),t.blockedOn=a,!1;i.shift()}return!0}function I_(t,i,a){_h(t)&&a.delete(i)}function mA(){Bm=!1,Er!==null&&_h(Er)&&(Er=null),Tr!==null&&_h(Tr)&&(Tr=null),Sr!==null&&_h(Sr)&&(Sr=null),hc.forEach(I_),dc.forEach(I_)}function bh(t,i){t.blockedOn===i&&(t.blockedOn=null,Bm||(Bm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,mA)))}var xh=null;function C_(t){xh!==t&&(xh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){xh===t&&(xh=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(zm(l||a)===null)continue;break}var m=ls(a);m!==null&&(t.splice(i,3),i-=3,Uf(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function ko(t){function i(O){return bh(O,t)}Er!==null&&bh(Er,t),Tr!==null&&bh(Tr,t),Sr!==null&&bh(Sr,t),hc.forEach(i),dc.forEach(i);for(var a=0;a<Ar.length;a++){var l=Ar[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ar.length&&(a=Ar[0],a.blockedOn===null);)R_(a),a.blockedOn===null&&Ar.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],_=f[nn]||null;if(typeof m=="function")_||C_(a);else if(_){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[nn]||null)E=_.formAction;else if(zm(f)!==null)continue}else E=_.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),C_(a)}}}function D_(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function qm(t){this._internalRoot=t}wh.prototype.render=qm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Zn();w_(a,l,t,i,null,null)},wh.prototype.unmount=qm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;w_(t.current,2,null,t,null,null),nh(),i[Fs]=null}};function wh(t){this._internalRoot=t}wh.prototype.unstable_scheduleHydration=function(t){if(t){var i=nu();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Ar.length&&i!==0&&i<Ar[a].priority;a++);Ar.splice(a,0,t),a===0&&R_(t)}};var j_=e.version;if(j_!=="19.2.0")throw Error(r(527,j_,"19.2.0"));se.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(i),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var pA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eh.isDisabled&&Eh.supportsFiber)try{Te=Eh.inject(pA),Me=Eh}catch{}}return pc.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",f=U0,m=z0,_=B0;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=b_(t,1,!1,null,null,a,l,null,f,m,_,D_),t[Fs]=i.current,Em(t),new qm(i)},pc.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,f="",m=U0,_=z0,E=B0,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),i=b_(t,1,!0,i,a??null,l,f,O,m,_,E,D_),i.context=x_(null),a=i.current,l=Zn(),l=na(l),f=hr(l),f.callback=null,dr(a,f,l),a=l,i.current.lanes=a,ea(i,a),ai(i),t[Fs]=i.current,Em(t),new wh(i)},pc.version="19.2.0",pc}var q_;function AA(){if(q_)return Gm.exports;q_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Gm.exports=SA(),Gm.exports}var NA=AA();const RA=Hx(NA),IA="modulepreload",CA=function(s){return"/"+s},H_={},Th=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let d=function(y){return Promise.all(y.map(x=>Promise.resolve(x).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=d(n.map(y=>{if(y=CA(y),y in H_)return;H_[y]=!0;const x=y.endsWith(".css"),w=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${w}`))return;const T=document.createElement("link");if(T.rel=x?"stylesheet":IA,x||(T.as="script"),T.crossOrigin="",T.href=y,g&&T.setAttribute("nonce",g),document.head.appendChild(T),x)return new Promise((D,q)=>{T.addEventListener("load",D),T.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${y}`)))})}))}function c(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return o.then(d=>{for(const p of d||[])p.status==="rejected"&&c(p.reason);return e().catch(c)})};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=()=>{};var F_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},jA=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],d=s[n++],p=s[n++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=s[n++],d=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},Gx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const c=s[o],d=o+1<s.length,p=d?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,x=c>>2,w=(c&3)<<4|p>>4;let T=(p&15)<<2|y>>6,D=y&63;g||(D=64,d||(T=64)),r.push(n[x],n[w],n[T],n[D])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Fx(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):jA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],p=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const w=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||p==null||y==null||w==null)throw new kA;const T=c<<2|p>>4;if(r.push(T),y!==64){const D=p<<4&240|y>>2;if(r.push(D),w!==64){const q=y<<6&192|w;r.push(q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class kA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OA=function(s){const e=Fx(s);return Gx.encodeByteArray(e,!0)},$h=function(s){return OA(s).replace(/\./g,"")},$x=function(s){try{return Gx.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=()=>MA().__FIREBASE_DEFAULTS__,PA=()=>{if(typeof process>"u"||typeof F_>"u")return;const s=F_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},LA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&$x(s[1]);return e&&JSON.parse(e)},yd=()=>{try{return DA()||VA()||PA()||LA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Kx=s=>{var e,n;return(n=(e=yd())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},Qx=s=>{const e=Kx(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Yx=()=>{var s;return(s=yd())==null?void 0:s.config},Xx=s=>{var e;return(e=yd())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ag(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[$h(JSON.stringify(n)),$h(JSON.stringify(d)),""].join(".")}const Tc={};function zA(){const s={prod:[],emulator:[]};for(const e of Object.keys(Tc))Tc[e]?s.emulator.push(e):s.prod.push(e);return s}function BA(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let G_=!1;function og(s,e){if(typeof window>"u"||typeof document>"u"||!Gr(window.location.host)||Tc[s]===e||Tc[s]||G_)return;Tc[s]=e;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",c=zA().prod.length>0;function d(){const T=document.getElementById(r);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,D){T.setAttribute("width","24"),T.setAttribute("id",D),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{G_=!0,d()},T}function x(T,D){T.setAttribute("id",D),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=BA(r),D=n("text"),q=document.getElementById(D)||document.createElement("span"),X=n("learnmore"),U=document.getElementById(X)||document.createElement("a"),oe=n("preprendIcon"),ae=document.getElementById(oe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const de=T.element;p(de),x(U,X);const fe=y();g(ae,oe),de.append(ae,q,U,fe),document.body.appendChild(de)}c?(q.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function HA(){var e;const s=(e=yd())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Jx(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function GA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $A(){const s=Sn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function KA(){return!HA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zx(){try{return typeof indexedDB=="object"}catch{return!1}}function e1(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}function QA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="FirebaseError";class ws extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=YA,Object.setPrototypeOf(this,ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,za.prototype.create)}}class za{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?XA(c,r):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new ws(o,p,r)}}function XA(s,e){return s.replace(WA,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const WA=/\{\$([^}]+)}/g;function JA(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function di(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=s[o],d=e[o];if($_(c)&&$_(d)){if(!di(c,d))return!1}else if(c!==d)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function $_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function _c(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function ZA(s,e){const n=new e2(s,e);return n.subscribe.bind(n)}class e2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");t2(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Ym),o.error===void 0&&(o.error=Ym),o.complete===void 0&&(o.complete=Ym);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t2(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Ym(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=1e3,s2=2,i2=14400*1e3,r2=.5;function K_(s,e=n2,n=s2){const r=e*Math.pow(n,s),o=Math.round(r2*r*(Math.random()-.5)*2);return Math.min(i2,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(s){return s&&s._delegate?s._delegate:s}class bs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new UA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(l2(e))try{this.getOrInitializeService({instanceIdentifier:Na})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=Na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Na){return this.instances.has(e)}getOptions(e=Na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&d.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:o2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Na){return this.component?this.component.multipleInstances?e:Na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function o2(s){return s===Na?void 0:s}function l2(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new a2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(We||(We={}));const u2={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},h2=We.INFO,d2={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},f2=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=d2[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vd{constructor(e){this.name=e,this._logLevel=h2,this._logHandler=f2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?u2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const m2=(s,e)=>e.some(n=>s instanceof n);let Q_,Y_;function p2(){return Q_||(Q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g2(){return Y_||(Y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t1=new WeakMap,Sp=new WeakMap,n1=new WeakMap,Xm=new WeakMap,lg=new WeakMap;function y2(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{n(jr(s.result)),o()},d=()=>{r(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&t1.set(n,s)}).catch(()=>{}),lg.set(e,s),e}function v2(s){if(Sp.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});Sp.set(s,e)}let Ap={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Sp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||n1.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function _2(s){Ap=s(Ap)}function b2(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(Wm(this),e,...n);return n1.set(r,e.sort?e.sort():[e]),jr(r)}:g2().includes(s)?function(...e){return s.apply(Wm(this),e),jr(t1.get(this))}:function(...e){return jr(s.apply(Wm(this),e))}}function x2(s){return typeof s=="function"?b2(s):(s instanceof IDBTransaction&&v2(s),m2(s,p2())?new Proxy(s,Ap):s)}function jr(s){if(s instanceof IDBRequest)return y2(s);if(Xm.has(s))return Xm.get(s);const e=x2(s);return e!==s&&(Xm.set(s,e),lg.set(e,s)),e}const Wm=s=>lg.get(s);function s1(s,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const d=indexedDB.open(s,e),p=jr(d);return r&&d.addEventListener("upgradeneeded",g=>{r(jr(d.result),g.oldVersion,g.newVersion,jr(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const w2=["get","getKey","getAll","getAllKeys","count"],E2=["put","add","delete","clear"],Jm=new Map;function X_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Jm.get(e))return Jm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=E2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||w2.includes(n)))return;const c=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return Jm.set(e,c),c}_2(s=>({...s,get:(e,n,r)=>X_(e,n)||s.get(e,n,r),has:(e,n)=>!!X_(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(S2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function S2(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Np="@firebase/app",W_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new vd("@firebase/app"),A2="@firebase/app-compat",N2="@firebase/analytics-compat",R2="@firebase/analytics",I2="@firebase/app-check-compat",C2="@firebase/app-check",D2="@firebase/auth",j2="@firebase/auth-compat",k2="@firebase/database",O2="@firebase/data-connect",M2="@firebase/database-compat",V2="@firebase/functions",P2="@firebase/functions-compat",L2="@firebase/installations",U2="@firebase/installations-compat",z2="@firebase/messaging",B2="@firebase/messaging-compat",q2="@firebase/performance",H2="@firebase/performance-compat",F2="@firebase/remote-config",G2="@firebase/remote-config-compat",$2="@firebase/storage",K2="@firebase/storage-compat",Q2="@firebase/firestore",Y2="@firebase/ai",X2="@firebase/firestore-compat",W2="firebase",J2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="[DEFAULT]",Z2={[Np]:"fire-core",[A2]:"fire-core-compat",[R2]:"fire-analytics",[N2]:"fire-analytics-compat",[C2]:"fire-app-check",[I2]:"fire-app-check-compat",[D2]:"fire-auth",[j2]:"fire-auth-compat",[k2]:"fire-rtdb",[O2]:"fire-data-connect",[M2]:"fire-rtdb-compat",[V2]:"fire-fn",[P2]:"fire-fn-compat",[L2]:"fire-iid",[U2]:"fire-iid-compat",[z2]:"fire-fcm",[B2]:"fire-fcm-compat",[q2]:"fire-perf",[H2]:"fire-perf-compat",[F2]:"fire-rc",[G2]:"fire-rc-compat",[$2]:"fire-gcs",[K2]:"fire-gcs-compat",[Q2]:"fire-fst",[X2]:"fire-fst-compat",[Y2]:"fire-vertex","fire-js":"fire-js",[W2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=new Map,eN=new Map,Ip=new Map;function J_(s,e){try{s.container.addComponent(e)}catch(n){$i.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Ls(s){const e=s.name;if(Ip.has(e))return $i.debug(`There were multiple attempts to register component ${e}.`),!1;Ip.set(e,s);for(const n of Kh.values())J_(n,s);for(const n of eN.values())J_(n,s);return!0}function $r(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function es(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kr=new za("app","Firebase",tN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=J2;function i1(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:Rp,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw kr.create("bad-app-name",{appName:String(o)});if(n||(n=Yx()),!n)throw kr.create("no-options");const c=Kh.get(o);if(c){if(di(n,c.options)&&di(r,c.config))return c;throw kr.create("duplicate-app",{appName:o})}const d=new c2(o);for(const g of Ip.values())d.addComponent(g);const p=new nN(n,r,d);return Kh.set(o,p),p}function _d(s=Rp){const e=Kh.get(s);if(!e&&s===Rp&&Yx())return i1();if(!e)throw kr.create("no-app",{appName:s});return e}function qn(s,e,n){let r=Z2[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${r}" with version "${e}":`];o&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$i.warn(d.join(" "));return}Ls(new bs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN="firebase-heartbeat-database",iN=1,Mc="firebase-heartbeat-store";let Zm=null;function r1(){return Zm||(Zm=s1(sN,iN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Mc)}catch(n){console.warn(n)}}}}).catch(s=>{throw kr.create("idb-open",{originalErrorMessage:s.message})})),Zm}async function rN(s){try{const n=(await r1()).transaction(Mc),r=await n.objectStore(Mc).get(a1(s));return await n.done,r}catch(e){if(e instanceof ws)$i.warn(e.message);else{const n=kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$i.warn(n.message)}}}async function Z_(s,e){try{const r=(await r1()).transaction(Mc,"readwrite");await r.objectStore(Mc).put(e,a1(s)),await r.done}catch(n){if(n instanceof ws)$i.warn(n.message);else{const r=kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$i.warn(r.message)}}}function a1(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=1024,oN=30;class lN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=eb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>oN){const d=hN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){$i.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=eb(),{heartbeatsToSend:r,unsentEntries:o}=cN(this._heartbeatsCache.heartbeats),c=$h(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return $i.warn(n),""}}}function eb(){return new Date().toISOString().substring(0,10)}function cN(s,e=aN){const n=[];let r=s.slice();for(const o of s){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),tb(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),tb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zx()?e1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Z_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Z_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function tb(s){return $h(JSON.stringify({version:2,heartbeats:s})).length}function hN(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(s){Ls(new bs("platform-logger",e=>new T2(e),"PRIVATE")),Ls(new bs("heartbeat",e=>new lN(e),"PRIVATE")),qn(Np,W_,s),qn(Np,W_,"esm2020"),qn("fire-js","")}dN("");var fN="firebase",mN="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn(fN,mN,"app");function o1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l1=o1,c1=new za("auth","Firebase",o1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=new vd("@firebase/auth");function pN(s,...e){Qh.logLevel<=We.WARN&&Qh.warn(`Auth (${Ba}): ${s}`,...e)}function Mh(s,...e){Qh.logLevel<=We.ERROR&&Qh.error(`Auth (${Ba}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(s,...e){throw cg(s,...e)}function is(s,...e){return cg(s,...e)}function u1(s,e,n){const r={...l1(),[e]:n};return new za("auth","Firebase",r).create(e,{appName:s.name})}function Hi(s){return u1(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cg(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return c1.create(s,...e)}function ye(s,e,...n){if(!s)throw cg(e,...n)}function Bi(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Mh(e),new Error(e)}function Ki(s,e){s||Bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function h1(){return nb()==="http:"||nb()==="https:"}function nb(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(h1()||Jx()||"connection"in navigator)?navigator.onLine:!0}function yN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ki(n>e,"Short delay should be less than long delay!"),this.isMobile=qA()||GA()}get(){return gN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(s,e){Ki(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bN=new zc(3e4,6e4);function as(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function os(s,e,n,r,o={}){return f1(s,o,async()=>{let c={},d={};r&&(e==="GET"?d=r:c={body:JSON.stringify(r)});const p=rl({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...c};return FA()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Gr(s.emulatorConfig.host)&&(y.credentials="include"),d1.fetch()(await m1(s,s.config.apiHost,n,p),y)})}async function f1(s,e,n){s._canInitEmulator=!1;const r={...vN,...e};try{const o=new wN(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw bc(s,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw bc(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw bc(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw bc(s,"user-disabled",d);const x=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw u1(s,x,y);Us(s,x)}}catch(o){if(o instanceof ws)throw o;Us(s,"network-request-failed",{message:String(o)})}}async function qa(s,e,n,r,o={}){const c=await os(s,e,n,r,o);return"mfaPendingCredential"in c&&Us(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function m1(s,e,n,r){const o=`${e}${n}?${r}`,c=s,d=c.config.emulator?ug(s.config,o):`${s.config.apiScheme}://${o}`;return _N.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function xN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(is(this.auth,"network-request-failed")),bN.get())})}}function bc(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=is(s,e,r);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(s){return s!==void 0&&s.getResponse!==void 0}function ib(s){return s!==void 0&&s.enterprise!==void 0}class p1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(s){return(await os(s,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function g1(s,e){return os(s,"GET","/v2/recaptchaConfig",as(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TN(s,e){return os(s,"POST","/v1/accounts:delete",e)}async function Yh(s,e){return os(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function y1(s,e=!1){const n=rt(s),r=await n.getIdToken(e),o=hg(r);ye(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:r,authTime:Sc(ep(o.auth_time)),issuedAtTime:Sc(ep(o.iat)),expirationTime:Sc(ep(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function ep(s){return Number(s)*1e3}function hg(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return Mh("JWT malformed, contained fewer than 3 sections"),null;try{const o=$x(n);return o?JSON.parse(o):(Mh("Failed to decode base64 JWT payload"),null)}catch(o){return Mh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function rb(s){const e=hg(s);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ws&&SN(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function SN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sc(this.lastLoginAt),this.creationTime=Sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(s){var w;const e=s.auth,n=await s.getIdToken(),r=await Ko(s,Yh(e,{idToken:n}));ye(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const c=(w=o.providerUserInfo)!=null&&w.length?_1(o.providerUserInfo):[],d=NN(s.providerData,c),p=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!(d!=null&&d.length),y=p?g:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Dp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,x)}async function v1(s){const e=rt(s);await Vc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NN(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function _1(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(s,e){const n=await f1(s,{},async()=>{const r=rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,d=await m1(s,o,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return s.emulatorConfig&&Gr(s.emulatorConfig.host)&&(g.credentials="include"),d1.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function IN(s,e){return os(s,"POST","/v2/accounts:revokeToken",as(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=rb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await RN(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,d=new Bo;return r&&(ye(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),o&&(ye(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(ye(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bo,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(s,e){ye(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Ms{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new AN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Dp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ko(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return y1(this,e)}reload(){return v1(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ms({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(es(this.auth.app))return Promise.reject(Hi(this.auth));const e=await this.getIdToken();return await Ko(this,TN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:w,emailVerified:T,isAnonymous:D,providerData:q,stsTokenManager:X}=n;ye(w&&X,e,"internal-error");const U=Bo.fromJSON(this.name,X);ye(typeof w=="string",e,"internal-error"),Rr(r,e.name),Rr(o,e.name),ye(typeof T=="boolean",e,"internal-error"),ye(typeof D=="boolean",e,"internal-error"),Rr(c,e.name),Rr(d,e.name),Rr(p,e.name),Rr(g,e.name),Rr(y,e.name),Rr(x,e.name);const oe=new Ms({uid:w,auth:e,email:o,emailVerified:T,displayName:r,isAnonymous:D,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:U,createdAt:y,lastLoginAt:x});return q&&Array.isArray(q)&&(oe.providerData=q.map(ae=>({...ae}))),g&&(oe._redirectEventId=g),oe}static async _fromIdTokenResponse(e,n,r=!1){const o=new Bo;o.updateFromServerResponse(n);const c=new Ms({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Vc(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];ye(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?_1(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),p=new Bo;p.updateFromIdToken(r);const g=new Ms({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Dp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new Map;function qi(s){Ki(s instanceof Function,"Expected a class definition");let e=ab.get(s);return e?(Ki(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,ab.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}b1.type="NONE";const jp=b1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(s,e,n){return`firebase:${s}:${e}:${n}`}class qo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=Vh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Vh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Yh(this.auth,{idToken:e}).catch(()=>{});return n?Ms._fromGetAccountInfoResponse(this.auth,n,e):null}return Ms._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new qo(qi(jp),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||qi(jp);const d=Vh(r,e.config.apiKey,e.name);let p=null;for(const y of n)try{const x=await y._get(d);if(x){let w;if(typeof x=="string"){const T=await Yh(e,{idToken:x}).catch(()=>{});if(!T)break;w=await Ms._fromGetAccountInfoResponse(e,T,x)}else w=Ms._fromJSON(e,x);y!==c&&(p=w),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new qo(c,e,r):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new qo(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(T1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(x1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(A1(e))return"Blackberry";if(N1(e))return"Webos";if(w1(e))return"Safari";if((e.includes("chrome/")||E1(e))&&!e.includes("edge/"))return"Chrome";if(S1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function x1(s=Sn()){return/firefox\//i.test(s)}function w1(s=Sn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function E1(s=Sn()){return/crios\//i.test(s)}function T1(s=Sn()){return/iemobile/i.test(s)}function S1(s=Sn()){return/android/i.test(s)}function A1(s=Sn()){return/blackberry/i.test(s)}function N1(s=Sn()){return/webos/i.test(s)}function dg(s=Sn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function CN(s=Sn()){var e;return dg(s)&&!!((e=window.navigator)!=null&&e.standalone)}function DN(){return $A()&&document.documentMode===10}function R1(s=Sn()){return dg(s)||S1(s)||N1(s)||A1(s)||/windows phone/i.test(s)||T1(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(s,e=[]){let n;switch(s){case"Browser":n=ob(Sn());break;case"Worker":n=`${ob(Sn())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ba}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((d,p)=>{try{const g=e(c);d(g)}catch(g){p(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(s,e={}){return os(s,"GET","/v2/passwordPolicy",as(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=6;class MN{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ON,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lb(this),this.idTokenSubscription=new lb(this),this.beforeStateQueue=new jN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qi(n)),this._initializationPromise=this.queue(async()=>{var r,o,c;if(!this._deleted&&(this.persistenceManager=await qo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Yh(this,{idToken:e}),r=await Ms._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(es(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,p=r==null?void 0:r._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===p)&&(g!=null&&g.user)&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(d){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(es(this.app))return Promise.reject(Hi(this));const n=e?rt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return es(this.app)?Promise.reject(Hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return es(this.app)?Promise.reject(Hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kN(this),n=new MN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new za("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await IN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qi(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await qo.create(this,[qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=I1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(es(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&pN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Xi(s){return rt(s)}class lb{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZA(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PN(s){Bc=s}function fg(s){return Bc.loadJS(s)}function LN(){return Bc.recaptchaV2Script}function UN(){return Bc.recaptchaEnterpriseScript}function zN(){return Bc.gapiScript}function C1(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=500,qN=6e4,Sh=1e12;class HN{constructor(e){this.auth=e,this.counter=Sh,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new $N(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||Sh;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||Sh;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||Sh;return(r=this._widgets.get(n))==null||r.execute(),""}}class FN{constructor(){this.enterprise=new GN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class GN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class $N{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const o=typeof e=="string"?document.getElementById(e):e;ye(o,"argument-error",{appName:n}),this.container=o,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=KN(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},qN)},BN))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function KN(s){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<s;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const QN="recaptcha-enterprise",Ac="NO_RECAPTCHA";class D1{constructor(e){this.type=QN,this.auth=Xi(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{g1(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new p1(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function o(c,d,p){const g=window.grecaptcha;ib(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(Ac)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new FN().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{r(this.auth).then(p=>{if(!n&&ib(window.grecaptcha))o(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=UN();g.length!==0&&(g+=p),fg(g).then(()=>{o(p,c,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function gc(s,e,n,r=!1,o=!1){const c=new D1(s);let d;if(o)d=Ac;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Nc(s,e,n,r,o){var c,d;if(o==="EMAIL_PASSWORD_PROVIDER")if((c=s._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const p=await gc(s,e,n,n==="getOobCode");return r(s,p)}else return r(s,e).catch(async p=>{if(p.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await gc(s,e,n,n==="getOobCode");return r(s,g)}else return Promise.reject(p)});else if(o==="PHONE_PROVIDER")if((d=s._getRecaptchaConfig())!=null&&d.isProviderEnabled("PHONE_PROVIDER")){const p=await gc(s,e,n);return r(s,p).catch(async g=>{var y;if(((y=s._getRecaptchaConfig())==null?void 0:y.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(g.code==="auth/missing-recaptcha-token"||g.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const x=await gc(s,e,n,!1,!0);return r(s,x)}return Promise.reject(g)})}else{const p=await gc(s,e,n,!1,!0);return r(s,p)}else return Promise.reject(o+" provider is not supported.")}async function YN(s){const e=Xi(s),n=await g1(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new p1(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new D1(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(s,e){const n=$r(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(di(c,e??{}))return o;Us(o,"already-initialized")}return n.initialize({options:e})}function XN(s,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qi);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function k1(s,e,n){const r=Xi(s);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=O1(e),{host:d,port:p}=WN(e),g=p===null?"":`:${p}`,y={url:`${c}//${d}${g}/`},x=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(di(y,r.config.emulator)&&di(x,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=x,r.settings.appVerificationDisabledForTesting=!0,Gr(d)?(ag(`${c}//${d}${g}`),og("Auth",!0)):JN()}function O1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function WN(s){const e=O1(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:cb(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:cb(d)}}}function cb(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function JN(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bi("not implemented")}_getIdTokenResponse(e){return Bi("not implemented")}_linkToIdToken(e,n){return Bi("not implemented")}_getReauthenticationResolver(e){return Bi("not implemented")}}async function ZN(s,e){return os(s,"POST","/v1/accounts:update",e)}async function eR(s,e){return os(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(s,e){return qa(s,"POST","/v1/accounts:signInWithPassword",as(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(s,e){return qa(s,"POST","/v1/accounts:signInWithEmailLink",as(s,e))}async function sR(s,e){return qa(s,"POST","/v1/accounts:signInWithEmailLink",as(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo extends qc{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Qo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Qo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nc(e,n,"signInWithPassword",tR,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return nR(e,{email:this._email,oobCode:this._password});default:Us(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nc(e,r,"signUpPassword",eR,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return sR(e,{idToken:n,email:this._email,oobCode:this._password});default:Us(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(s,e){return qa(s,"POST","/v1/accounts:signInWithIdp",as(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="http://localhost";class Lr extends qc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Lr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Us("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=n;if(!r||!o)return null;const d=new Lr(r,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Ho(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ho(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ho(e,n)}buildRequest(){const e={requestUri:iR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=rl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ub(s,e){return os(s,"POST","/v1/accounts:sendVerificationCode",as(s,e))}async function rR(s,e){return qa(s,"POST","/v1/accounts:signInWithPhoneNumber",as(s,e))}async function aR(s,e){const n=await qa(s,"POST","/v1/accounts:signInWithPhoneNumber",as(s,e));if(n.temporaryProof)throw bc(s,"account-exists-with-different-credential",n);return n}const oR={USER_NOT_FOUND:"user-not-found"};async function lR(s,e){const n={...e,operation:"REAUTH"};return qa(s,"POST","/v1/accounts:signInWithPhoneNumber",as(s,n),oR)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends qc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Fo({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Fo({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return rR(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return aR(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return lR(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:o}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:o}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:o,temporaryProof:c}=e;return!r&&!n&&!o&&!c?null:new Fo({verificationId:n,verificationCode:r,phoneNumber:o,temporaryProof:c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uR(s){const e=vc(_c(s)).link,n=e?vc(_c(e)).deep_link_id:null,r=vc(_c(s)).deep_link_id;return(r?vc(_c(r)).link:null)||r||n||e||s}class bd{constructor(e){const n=vc(_c(e)),r=n.apiKey??null,o=n.oobCode??null,c=cR(n.mode??null);ye(r&&o&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=uR(e);try{return new bd(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(){this.providerId=Kr.PROVIDER_ID}static credential(e,n){return Qo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=bd.parseLink(n);return ye(r,"argument-error"),Qo._fromEmailAndCode(e,r.code,r.tenantId)}}Kr.PROVIDER_ID="password";Kr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Kr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc extends M1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Hc{constructor(){super("facebook.com")}static credential(e){return Lr._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.FACEBOOK_SIGN_IN_METHOD="facebook.com";Li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Hc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Lr._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return li.credential(n,r)}catch{return null}}}li.GOOGLE_SIGN_IN_METHOD="google.com";li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Hc{constructor(){super("github.com")}static credential(e){return Lr._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ui.credential(e.oauthAccessToken)}catch{return null}}}Ui.GITHUB_SIGN_IN_METHOD="github.com";Ui.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Hc{constructor(){super("twitter.com")}static credential(e,n){return Lr._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zi.credential(n,r)}catch{return null}}}zi.TWITTER_SIGN_IN_METHOD="twitter.com";zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await Ms._fromIdTokenResponse(e,r,o),d=hb(r);return new Yo({user:c,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=hb(r);return new Yo({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function hb(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends ws{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Xh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Xh(e,n,r,o)}}function V1(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Xh._fromErrorAndOperation(s,c,e,r):c})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(s){return new Set(s.map(({providerId:e})=>e).filter(e=>!!e))}async function P1(s,e,n=!1){const r=await Ko(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Yo._forOperation(s,"link",r)}async function dR(s,e,n){await Vc(e);const r=hR(e.providerData);ye(r.has(n)===s,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(s,e,n=!1){const{auth:r}=s;if(es(r.app))return Promise.reject(Hi(r));const o="reauthenticate";try{const c=await Ko(s,V1(r,o,e,s),n);ye(c.idToken,r,"internal-error");const d=hg(c.idToken);ye(d,r,"internal-error");const{sub:p}=d;return ye(s.uid===p,r,"user-mismatch"),Yo._forOperation(s,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Us(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(s,e,n=!1){if(es(s.app))return Promise.reject(Hi(s));const r="signIn",o=await V1(s,r,e),c=await Yo._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(c.user),c}async function mg(s,e){return L1(Xi(s),e)}async function U1(s,e){const n=rt(s);return await dR(!1,n,e.providerId),P1(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mR(s){const e=Xi(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function z1(s,e,n){return es(s.app)?Promise.reject(Hi(s)):mg(rt(s),Kr.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&mR(s),r})}function kp(s,e){return pR(rt(s),null,e)}async function pR(s,e,n){const{auth:r}=s,c={idToken:await s.getIdToken(),returnSecureToken:!0};n&&(c.password=n);const d=await Ko(s,ZN(r,c));await s._updateTokensIfNecessary(d,!0)}function B1(s,e,n,r){return rt(s).onIdTokenChanged(e,n,r)}function q1(s,e,n){return rt(s).beforeAuthStateChanged(e,n)}function H1(s,e,n,r){return rt(s).onAuthStateChanged(e,n,r)}function Wh(s){return rt(s).signOut()}async function gR(s){return rt(s).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(s,e){return os(s,"POST","/v2/accounts/mfaEnrollment:start",as(s,e))}const Jh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jh,"1"),this.storage.removeItem(Jh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=1e3,vR=10;class G1 extends F1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=R1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);DN()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,vR):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},yR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}G1.type="LOCAL";const $1=G1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1 extends F1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}K1.type="SESSION";const pg=K1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new xd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(d).map(async y=>y(n.origin,c)),g=await _R(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const y=gg("",20);o.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},r);d={messageChannel:o,onMessage(w){const T=w;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(T.data.response);break;default:clearTimeout(x),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return window}function xR(s){Xt().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(){return typeof Xt().WorkerGlobalScope<"u"&&typeof Xt().importScripts=="function"}async function wR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ER(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function TR(){return yg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="firebaseLocalStorageDb",SR=1,Zh="firebaseLocalStorage",Y1="fbase_key";class Fc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wd(s,e){return s.transaction([Zh],e?"readwrite":"readonly").objectStore(Zh)}function AR(){const s=indexedDB.deleteDatabase(Q1);return new Fc(s).toPromise()}function Op(){const s=indexedDB.open(Q1,SR);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Zh,{keyPath:Y1})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Zh)?e(r):(r.close(),await AR(),e(await Op()))})})}async function fb(s,e,n){const r=wd(s,!0).put({[Y1]:e,value:n});return new Fc(r).toPromise()}async function NR(s,e){const n=wd(s,!1).get(e),r=await new Fc(n).toPromise();return r===void 0?null:r.value}function mb(s,e){const n=wd(s,!0).delete(e);return new Fc(n).toPromise()}const RR=800,IR=3;class X1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Op(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>IR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xd._getInstance(TR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await wR(),!this.activeServiceWorker)return;this.sender=new bR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ER()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Op();return await fb(e,Jh,"1"),await mb(e,Jh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>fb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>NR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=wd(o,!1).getAll();return new Fc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}X1.type="LOCAL";const W1=X1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(s,e){return os(s,"POST","/v2/accounts/mfaSignIn:start",as(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=C1("rcb"),CR=new zc(3e4,6e4);class DR{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Xt().grecaptcha)!=null&&e.render)}load(e,n=""){return ye(jR(n),e,"argument-error"),this.shouldResolveImmediately(n)&&sb(Xt().grecaptcha)?Promise.resolve(Xt().grecaptcha):new Promise((r,o)=>{const c=Xt().setTimeout(()=>{o(is(e,"network-request-failed"))},CR.get());Xt()[tp]=()=>{Xt().clearTimeout(c),delete Xt()[tp];const p=Xt().grecaptcha;if(!p||!sb(p)){o(is(e,"internal-error"));return}const g=p.render;p.render=(y,x)=>{const w=g(y,x);return this.counter++,w},this.hostLanguage=n,r(p)};const d=`${LN()}?${rl({onload:tp,render:"explicit",hl:n})}`;fg(d).catch(()=>{clearTimeout(c),o(is(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Xt().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function jR(s){return s.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(s)}class kR{async load(e){return new HN(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc="recaptcha",OR={theme:"light",type:"image"};class J1{constructor(e,n,r={...OR}){this.parameters=r,this.type=Rc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Xi(e),this.isInvisible=this.parameters.size==="invisible",ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const o=typeof n=="string"?document.getElementById(n):n;ye(o,this.auth,"argument-error"),this.container=o,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kR:new DR,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(o=>{const c=d=>{d&&(this.tokenChangeListeners.delete(c),o(d))};this.tokenChangeListeners.add(c),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ye(!this.parameters.sitekey,this.auth,"argument-error"),ye(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Xt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ye(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ye(h1()&&!yg(),this.auth,"internal-error"),await MR(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await EN(this.auth);ye(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ye(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function MR(){let s=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}s=()=>e(),window.addEventListener("load",s)}).catch(e=>{throw s&&window.removeEventListener("load",s),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Fo._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Z1(s,e,n){if(es(s.app))return Promise.reject(Hi(s));const r=Xi(s),o=await PR(r,e,rt(n));return new VR(o,c=>mg(r,c))}async function PR(s,e,n){var r;if(!s._getRecaptchaConfig())try{await YN(s)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){const c=o.session;if("phoneNumber"in o){ye(c.type==="enroll",s,"internal-error");const d={idToken:c.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Nc(s,d,"mfaSmsEnrollment",async(x,w)=>{if(w.phoneEnrollmentInfo.captchaResponse===Ac){ye((n==null?void 0:n.type)===Rc,x,"argument-error");const T=await np(x,w,n);return db(x,T)}return db(x,w)},"PHONE_PROVIDER").catch(x=>Promise.reject(x))).phoneSessionInfo.sessionInfo}else{ye(c.type==="signin",s,"internal-error");const d=((r=o.multiFactorHint)==null?void 0:r.uid)||o.multiFactorUid;ye(d,s,"missing-multi-factor-info");const p={mfaPendingCredential:c.credential,mfaEnrollmentId:d,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Nc(s,p,"mfaSmsSignIn",async(w,T)=>{if(T.phoneSignInInfo.captchaResponse===Ac){ye((n==null?void 0:n.type)===Rc,w,"argument-error");const D=await np(w,T,n);return pb(w,D)}return pb(w,T)},"PHONE_PROVIDER").catch(w=>Promise.reject(w))).phoneResponseInfo.sessionInfo}}else{const c={phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Nc(s,c,"sendVerificationCode",async(y,x)=>{if(x.captchaResponse===Ac){ye((n==null?void 0:n.type)===Rc,y,"argument-error");const w=await np(y,x,n);return ub(y,w)}return ub(y,x)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).sessionInfo}}finally{n==null||n._reset()}}async function np(s,e,n){ye(n.type===Rc,s,"argument-error");const r=await n.verify();ye(typeof r=="string",s,"argument-error");const o={...e};if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.captchaResponse,p=o.phoneEnrollmentInfo.clientType,g=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:r,captchaResponse:d,clientType:p,recaptchaVersion:g}}),o}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.captchaResponse,d=o.phoneSignInInfo.clientType,p=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:c,clientType:d,recaptchaVersion:p}}),o}else return Object.assign(o,{recaptchaToken:r}),o}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(s,e){return e?qi(e):(ye(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg extends qc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ho(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ho(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function UR(s){return L1(s.auth,new vg(s),s.bypassAuthState)}function zR(s){const{auth:e,user:n}=s;return ye(n,e,"internal-error"),fR(n,new vg(s),s.bypassAuthState)}async function BR(s){const{auth:e,user:n}=s;return ye(n,e,"internal-error"),P1(n,new vg(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UR;case"linkViaPopup":case"linkViaRedirect":return BR;case"reauthViaPopup":case"reauthViaRedirect":return zR;default:Us(this.auth,"internal-error")}}resolve(e){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=new zc(2e3,1e4);class Lo extends ew{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,Lo.currentPopupAction&&Lo.currentPopupAction.cancel(),Lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Ki(this.filter.length===1,"Popup operations only handle one event");const e=gg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(is(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(is(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(is(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qR.get())};e()}}Lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="pendingRedirect",Ph=new Map;class FR extends ew{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ph.get(this.auth._key());if(!e){try{const r=await GR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ph.set(this.auth._key(),e)}return this.bypassAuthState||Ph.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GR(s,e){const n=QR(e),r=KR(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function $R(s,e){Ph.set(s._key(),e)}function KR(s){return qi(s._redirectPersistence)}function QR(s){return Vh(HR,s.config.apiKey,s.name)}async function YR(s,e,n=!1){if(es(s.app))return Promise.reject(Hi(s));const r=Xi(s),o=LR(r,e),d=await new FR(r,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=600*1e3;class WR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tw(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(is(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XR&&this.cachedEventUids.clear(),this.cachedEventUids.has(gb(e))}saveEventToCache(e){this.cachedEventUids.add(gb(e)),this.lastProcessedEventTime=Date.now()}}function gb(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function tw({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tw(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(s,e={}){return os(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tI=/^https?/;async function nI(s){if(s.config.emulator)return;const{authorizedDomains:e}=await ZR(s);for(const n of e)try{if(sI(n))return}catch{}Us(s,"unauthorized-domain")}function sI(s){const e=Cp(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!tI.test(n))return!1;if(eI.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new zc(3e4,6e4);function yb(){const s=Xt().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function rI(s){return new Promise((e,n)=>{var o,c,d;function r(){yb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yb(),n(is(s,"network-request-failed"))},timeout:iI.get()})}if((c=(o=Xt().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=Xt().gapi)!=null&&d.load)r();else{const p=C1("iframefcb");return Xt()[p]=()=>{gapi.load?r():n(is(s,"network-request-failed"))},fg(`${zN()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw Lh=null,e})}let Lh=null;function aI(s){return Lh=Lh||rI(s),Lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=new zc(5e3,15e3),lI="__/auth/iframe",cI="emulator/auth/iframe",uI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dI(s){const e=s.config;ye(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?ug(e,cI):`https://${s.config.authDomain}/${lI}`,r={apiKey:e.apiKey,appName:s.name,v:Ba},o=hI.get(s.config.apiHost);o&&(r.eid=o);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${rl(r).slice(1)}`}async function fI(s){const e=await aI(s),n=Xt().gapi;return ye(n,s,"internal-error"),e.open({where:document.body,url:dI(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uI,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const d=is(s,"network-request-failed"),p=Xt().setTimeout(()=>{c(d)},oI.get());function g(){Xt().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pI=500,gI=600,yI="_blank",vI="http://localhost";class vb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _I(s,e,n,r=pI,o=gI){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g={...mI,width:r.toString(),height:o.toString(),top:c,left:d},y=Sn().toLowerCase();n&&(p=E1(y)?yI:n),x1(y)&&(e=e||vI,g.scrollbars="yes");const x=Object.entries(g).reduce((T,[D,q])=>`${T}${D}=${q},`,"");if(CN(y)&&p!=="_self")return bI(e||"",p),new vb(null);const w=window.open(e||"",p,x);ye(w,s,"popup-blocked");try{w.focus()}catch{}return new vb(w)}function bI(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="__/auth/handler",wI="emulator/auth/handler",EI=encodeURIComponent("fac");async function _b(s,e,n,r,o,c){ye(s.config.authDomain,s,"auth-domain-config-required"),ye(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:Ba,eventId:o};if(e instanceof M1){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",JA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,w]of Object.entries({}))d[x]=w}if(e instanceof Hc){const x=e.getScopes().filter(w=>w!=="");x.length>0&&(d.scopes=x.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const g=await s._getAppCheckToken(),y=g?`#${EI}=${encodeURIComponent(g)}`:"";return`${TI(s)}?${rl(p).slice(1)}${y}`}function TI({config:s}){return s.emulator?ug(s,wI):`https://${s.authDomain}/${xI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="webStorageSupport";class SI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pg,this._completeRedirectFn=YR,this._overrideRedirectResult=$R}async _openPopup(e,n,r,o){var d;Ki((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await _b(e,n,r,Cp(),o);return _I(e,c,gg())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await _b(e,n,r,Cp(),o);return xR(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Ki(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await fI(e),r=new WR(e);return n.register("authEvent",o=>(ye(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sp,{type:sp},o=>{var d;const c=(d=o==null?void 0:o[0])==null?void 0:d[sp];c!==void 0&&n(!!c),Us(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return R1()||w1()||dg()}}const nw=SI;var bb="@firebase/auth",xb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RI(s){Ls(new bs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=r.options;ye(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:I1(s)},y=new VN(r,o,c,g);return XN(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ls(new bs("auth-internal",e=>{const n=Xi(e.getProvider("auth").getImmediate());return(r=>new AI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qn(bb,xb,NI(s)),qn(bb,xb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=300,CI=Xx("authIdTokenMaxAge")||II;let wb=null;const DI=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>CI)return;const o=n==null?void 0:n.token;wb!==o&&(wb=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function sw(s=_d()){const e=$r(s,"auth");if(e.isInitialized())return e.getImmediate();const n=j1(s,{popupRedirectResolver:nw,persistence:[W1,$1,pg]}),r=Xx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=DI(c.toString());q1(n,d,()=>d(n.currentUser)),B1(n,p=>d(p))}}const o=Kx("auth");return o&&k1(n,`http://${o}`),n}function jI(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}PN({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const c=is("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",jI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RI("Browser");const kI=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:bd,AuthCredential:qc,EmailAuthCredential:Qo,EmailAuthProvider:Kr,FacebookAuthProvider:Li,GithubAuthProvider:Ui,GoogleAuthProvider:li,OAuthCredential:Lr,PhoneAuthCredential:Fo,RecaptchaVerifier:J1,TwitterAuthProvider:zi,beforeAuthStateChanged:q1,browserLocalPersistence:$1,browserPopupRedirectResolver:nw,browserSessionPersistence:pg,connectAuthEmulator:k1,deleteUser:gR,getAuth:sw,getIdTokenResult:y1,inMemoryPersistence:jp,indexedDBLocalPersistence:W1,initializeAuth:j1,linkWithCredential:U1,onAuthStateChanged:H1,onIdTokenChanged:B1,prodErrorMap:l1,reload:v1,signInWithCredential:mg,signInWithEmailAndPassword:z1,signInWithPhoneNumber:Z1,signOut:Wh,updatePassword:kp},Symbol.toStringTag,{value:"Module"})),iw="@firebase/installations",_g="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=1e4,aw=`w:${_g}`,ow="FIS_v2",OI="https://firebaseinstallations.googleapis.com/v1",MI=3600*1e3,VI="installations",PI="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Oa=new za(VI,PI,LI);function lw(s){return s instanceof ws&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw({projectId:s}){return`${OI}/projects/${s}/installations`}function uw(s){return{token:s.token,requestStatus:2,expiresIn:zI(s.expiresIn),creationTime:Date.now()}}async function hw(s,e){const r=(await e.json()).error;return Oa.create("request-failed",{requestName:s,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function dw({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function UI(s,{refreshToken:e}){const n=dw(s);return n.append("Authorization",BI(e)),n}async function fw(s){const e=await s();return e.status>=500&&e.status<600?s():e}function zI(s){return Number(s.replace("s","000"))}function BI(s){return`${ow} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI({appConfig:s,heartbeatServiceProvider:e},{fid:n}){const r=cw(s),o=dw(s),c=e.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const d={fid:n,authVersion:ow,appId:s.appId,sdkVersion:aw},p={method:"POST",headers:o,body:JSON.stringify(d)},g=await fw(()=>fetch(r,p));if(g.ok){const y=await g.json();return{fid:y.fid||n,registrationStatus:2,refreshToken:y.refreshToken,authToken:uw(y.authToken)}}else throw await hw("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(s){return new Promise(e=>{setTimeout(e,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=/^[cdef][\w-]{21}$/,Mp="";function GI(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const n=$I(s);return FI.test(n)?n:Mp}catch{return Mp}}function $I(s){return HI(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=new Map;function gw(s,e){const n=Ed(s);yw(n,e),KI(n,e)}function yw(s,e){const n=pw.get(s);if(n)for(const r of n)r(e)}function KI(s,e){const n=QI();n&&n.postMessage({key:s,fid:e}),YI()}let Ca=null;function QI(){return!Ca&&"BroadcastChannel"in self&&(Ca=new BroadcastChannel("[Firebase] FID Change"),Ca.onmessage=s=>{yw(s.data.key,s.data.fid)}),Ca}function YI(){pw.size===0&&Ca&&(Ca.close(),Ca=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="firebase-installations-database",WI=1,Ma="firebase-installations-store";let ip=null;function bg(){return ip||(ip=s1(XI,WI,{upgrade:(s,e)=>{switch(e){case 0:s.createObjectStore(Ma)}}})),ip}async function ed(s,e){const n=Ed(s),o=(await bg()).transaction(Ma,"readwrite"),c=o.objectStore(Ma),d=await c.get(n);return await c.put(e,n),await o.done,(!d||d.fid!==e.fid)&&gw(s,e.fid),e}async function vw(s){const e=Ed(s),r=(await bg()).transaction(Ma,"readwrite");await r.objectStore(Ma).delete(e),await r.done}async function Td(s,e){const n=Ed(s),o=(await bg()).transaction(Ma,"readwrite"),c=o.objectStore(Ma),d=await c.get(n),p=e(d);return p===void 0?await c.delete(n):await c.put(p,n),await o.done,p&&(!d||d.fid!==p.fid)&&gw(s,p.fid),p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xg(s){let e;const n=await Td(s.appConfig,r=>{const o=JI(r),c=ZI(s,o);return e=c.registrationPromise,c.installationEntry});return n.fid===Mp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function JI(s){const e=s||{fid:GI(),registrationStatus:0};return _w(e)}function ZI(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Oa.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=eC(s,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:tC(s)}:{installationEntry:e}}async function eC(s,e){try{const n=await qI(s,e);return ed(s.appConfig,n)}catch(n){throw lw(n)&&n.customData.serverCode===409?await vw(s.appConfig):await ed(s.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function tC(s){let e=await Eb(s.appConfig);for(;e.registrationStatus===1;)await mw(100),e=await Eb(s.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await xg(s);return r||n}return e}function Eb(s){return Td(s,e=>{if(!e)throw Oa.create("installation-not-found");return _w(e)})}function _w(s){return nC(s)?{fid:s.fid,registrationStatus:0}:s}function nC(s){return s.registrationStatus===1&&s.registrationTime+rw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC({appConfig:s,heartbeatServiceProvider:e},n){const r=iC(s,n),o=UI(s,n),c=e.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const d={installation:{sdkVersion:aw,appId:s.appId}},p={method:"POST",headers:o,body:JSON.stringify(d)},g=await fw(()=>fetch(r,p));if(g.ok){const y=await g.json();return uw(y)}else throw await hw("Generate Auth Token",g)}function iC(s,{fid:e}){return`${cw(s)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wg(s,e=!1){let n;const r=await Td(s.appConfig,c=>{if(!bw(c))throw Oa.create("not-registered");const d=c.authToken;if(!e&&oC(d))return c;if(d.requestStatus===1)return n=rC(s,e),c;{if(!navigator.onLine)throw Oa.create("app-offline");const p=cC(c);return n=aC(s,p),p}});return n?await n:r.authToken}async function rC(s,e){let n=await Tb(s.appConfig);for(;n.authToken.requestStatus===1;)await mw(100),n=await Tb(s.appConfig);const r=n.authToken;return r.requestStatus===0?wg(s,e):r}function Tb(s){return Td(s,e=>{if(!bw(e))throw Oa.create("not-registered");const n=e.authToken;return uC(n)?{...e,authToken:{requestStatus:0}}:e})}async function aC(s,e){try{const n=await sC(s,e),r={...e,authToken:n};return await ed(s.appConfig,r),n}catch(n){if(lw(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await vw(s.appConfig);else{const r={...e,authToken:{requestStatus:0}};await ed(s.appConfig,r)}throw n}}function bw(s){return s!==void 0&&s.registrationStatus===2}function oC(s){return s.requestStatus===2&&!lC(s)}function lC(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+MI}function cC(s){const e={requestStatus:1,requestTime:Date.now()};return{...s,authToken:e}}function uC(s){return s.requestStatus===1&&s.requestTime+rw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(s){const e=s,{installationEntry:n,registrationPromise:r}=await xg(e);return r?r.catch(console.error):wg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(s,e=!1){const n=s;return await fC(n),(await wg(n,e)).token}async function fC(s){const{registrationPromise:e}=await xg(s);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(s){if(!s||!s.options)throw rp("App Configuration");if(!s.name)throw rp("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!s.options[n])throw rp(n);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function rp(s){return Oa.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="installations",pC="installations-internal",gC=s=>{const e=s.getProvider("app").getImmediate(),n=mC(e),r=$r(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},yC=s=>{const e=s.getProvider("app").getImmediate(),n=$r(e,xw).getImmediate();return{getId:()=>hC(n),getToken:o=>dC(n,o)}};function vC(){Ls(new bs(xw,gC,"PUBLIC")),Ls(new bs(pC,yC,"PRIVATE"))}vC();qn(iw,_g);qn(iw,_g,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td="analytics",_C="firebase_id",bC="origin",xC=60*1e3,wC="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Eg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn=new vd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},rs=new za("analytics","Analytics",EC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(s){if(!s.startsWith(Eg)){const e=rs.create("invalid-gtag-resource",{gtagURL:s});return Cn.warn(e.message),""}return s}function ww(s){return Promise.all(s.map(e=>e.catch(n=>n)))}function SC(s,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(s,e)),n}function AC(s,e){const n=SC("firebase-js-sdk-policy",{createScriptURL:TC}),r=document.createElement("script"),o=`${Eg}?l=${s}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function NC(s){let e=[];return Array.isArray(window[s])?e=window[s]:window[s]=e,e}async function RC(s,e,n,r,o,c){const d=r[o];try{if(d)await e[d];else{const g=(await ww(n)).find(y=>y.measurementId===o);g&&await e[g.appId]}}catch(p){Cn.error(p)}s("config",o,c)}async function IC(s,e,n,r,o){try{let c=[];if(o&&o.send_to){let d=o.send_to;Array.isArray(d)||(d=[d]);const p=await ww(n);for(const g of d){const y=p.find(w=>w.measurementId===g),x=y&&e[y.appId];if(x)c.push(x);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),s("event",r,o||{})}catch(c){Cn.error(c)}}function CC(s,e,n,r){async function o(c,...d){try{if(c==="event"){const[p,g]=d;await IC(s,e,n,p,g)}else if(c==="config"){const[p,g]=d;await RC(s,e,n,r,p,g)}else if(c==="consent"){const[p,g]=d;s("consent",p,g)}else if(c==="get"){const[p,g,y]=d;s("get",p,g,y)}else if(c==="set"){const[p]=d;s("set",p)}else s(c,...d)}catch(p){Cn.error(p)}}return o}function DC(s,e,n,r,o){let c=function(...d){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=CC(c,s,e,n),{gtagCore:c,wrappedGtag:window[o]}}function jC(s){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Eg)&&n.src.includes(s))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=30,OC=1e3;class MC{constructor(e={},n=OC){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Ew=new MC;function VC(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function PC(s){var d;const{appId:e,apiKey:n}=s,r={method:"GET",headers:VC(n)},o=wC.replace("{app-id}",e),c=await fetch(o,r);if(c.status!==200&&c.status!==304){let p="";try{const g=await c.json();(d=g.error)!=null&&d.message&&(p=g.error.message)}catch{}throw rs.create("config-fetch-failed",{httpStatus:c.status,responseMessage:p})}return c.json()}async function LC(s,e=Ew,n){const{appId:r,apiKey:o,measurementId:c}=s.options;if(!r)throw rs.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:r};throw rs.create("no-api-key")}const d=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new BC;return setTimeout(async()=>{p.abort()},xC),Tw({appId:r,apiKey:o,measurementId:c},d,p,e)}async function Tw(s,{throttleEndTimeMillis:e,backoffCount:n},r,o=Ew){var p;const{appId:c,measurementId:d}=s;try{await UC(r,e)}catch(g){if(d)return Cn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:d};throw g}try{const g=await PC(s);return o.deleteThrottleMetadata(c),g}catch(g){const y=g;if(!zC(y)){if(o.deleteThrottleMetadata(c),d)return Cn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${y==null?void 0:y.message}]`),{appId:c,measurementId:d};throw g}const x=Number((p=y==null?void 0:y.customData)==null?void 0:p.httpStatus)===503?K_(n,o.intervalMillis,kC):K_(n,o.intervalMillis),w={throttleEndTimeMillis:Date.now()+x,backoffCount:n+1};return o.setThrottleMetadata(c,w),Cn.debug(`Calling attemptFetch again in ${x} millis`),Tw(s,w,r,o)}}function UC(s,e){return new Promise((n,r)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(n,o);s.addEventListener(()=>{clearTimeout(c),r(rs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function zC(s){if(!(s instanceof ws)||!s.customData)return!1;const e=Number(s.customData.httpStatus);return e===429||e===500||e===503||e===504}class BC{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function qC(s,e,n,r,o){if(o&&o.global){s("event",n,r);return}else{const c=await e,d={...r,send_to:c};s("event",n,d)}}async function HC(s,e,n,r){if(r&&r.global){const o={};for(const c of Object.keys(n))o[`user_properties.${c}`]=n[c];return s("set",o),Promise.resolve()}else{const o=await e;s("config",o,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FC(){if(Zx())try{await e1()}catch(s){return Cn.warn(rs.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return Cn.warn(rs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function GC(s,e,n,r,o,c,d){const p=LC(s);p.then(T=>{n[T.measurementId]=T.appId,s.options.measurementId&&T.measurementId!==s.options.measurementId&&Cn.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>Cn.error(T)),e.push(p);const g=FC().then(T=>{if(T)return r.getId()}),[y,x]=await Promise.all([p,g]);jC(c)||AC(c,y.measurementId),o("js",new Date);const w=(d==null?void 0:d.config)??{};return w[bC]="firebase",w.update=!0,x!=null&&(w[_C]=x),o("config",y.measurementId,w),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.app=e}_delete(){return delete Go[this.app.options.appId],Promise.resolve()}}let Go={},Sb=[];const Ab={};let ap="dataLayer",KC="gtag",Nb,Tg,Rb=!1;function QC(){const s=[];if(Jx()&&s.push("This is a browser extension environment."),QA()||s.push("Cookies are not available."),s.length>0){const e=s.map((r,o)=>`(${o+1}) ${r}`).join(" "),n=rs.create("invalid-analytics-context",{errorInfo:e});Cn.warn(n.message)}}function YC(s,e,n){QC();const r=s.options.appId;if(!r)throw rs.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)Cn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw rs.create("no-api-key");if(Go[r]!=null)throw rs.create("already-exists",{id:r});if(!Rb){NC(ap);const{wrappedGtag:c,gtagCore:d}=DC(Go,Sb,Ab,ap,KC);Tg=c,Nb=d,Rb=!0}return Go[r]=GC(s,Sb,Ab,e,Nb,ap,n),new $C(s)}function XC(s=_d()){s=rt(s);const e=$r(s,td);return e.isInitialized()?e.getImmediate():WC(s)}function WC(s,e={}){const n=$r(s,td);if(n.isInitialized()){const o=n.getImmediate();if(di(e,n.getOptions()))return o;throw rs.create("already-initialized")}return n.initialize({options:e})}function JC(s,e,n){s=rt(s),HC(Tg,Go[s.app.options.appId],e,n).catch(r=>Cn.error(r))}function ZC(s,e,n,r){s=rt(s),qC(Tg,Go[s.app.options.appId],e,n,r).catch(o=>Cn.error(o))}const Ib="@firebase/analytics",Cb="0.10.19";function e4(){Ls(new bs(td,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return YC(r,o,n)},"PUBLIC")),Ls(new bs("analytics-internal",s,"PRIVATE")),qn(Ib,Cb),qn(Ib,Cb,"esm2020");function s(e){try{const n=e.getProvider(td).getImmediate();return{logEvent:(r,o,c)=>ZC(n,r,o,c),setUserProperties:(r,o)=>JC(n,r,o)}}catch(n){throw rs.create("interop-component-reg-failed",{reason:n})}}}e4();var Db=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Or,Sw;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function A(){}A.prototype=I.prototype,k.F=I.prototype,k.prototype=new A,k.prototype.constructor=k,k.D=function(C,R,M){for(var N=Array(arguments.length-2),we=2;we<arguments.length;we++)N[we-2]=arguments[we];return I.prototype[R].apply(C,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,I,A){A||(A=0);const C=Array(16);if(typeof I=="string")for(var R=0;R<16;++R)C[R]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(R=0;R<16;++R)C[R]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=k.g[0],A=k.g[1],R=k.g[2];let M=k.g[3],N;N=I+(M^A&(R^M))+C[0]+3614090360&4294967295,I=A+(N<<7&4294967295|N>>>25),N=M+(R^I&(A^R))+C[1]+3905402710&4294967295,M=I+(N<<12&4294967295|N>>>20),N=R+(A^M&(I^A))+C[2]+606105819&4294967295,R=M+(N<<17&4294967295|N>>>15),N=A+(I^R&(M^I))+C[3]+3250441966&4294967295,A=R+(N<<22&4294967295|N>>>10),N=I+(M^A&(R^M))+C[4]+4118548399&4294967295,I=A+(N<<7&4294967295|N>>>25),N=M+(R^I&(A^R))+C[5]+1200080426&4294967295,M=I+(N<<12&4294967295|N>>>20),N=R+(A^M&(I^A))+C[6]+2821735955&4294967295,R=M+(N<<17&4294967295|N>>>15),N=A+(I^R&(M^I))+C[7]+4249261313&4294967295,A=R+(N<<22&4294967295|N>>>10),N=I+(M^A&(R^M))+C[8]+1770035416&4294967295,I=A+(N<<7&4294967295|N>>>25),N=M+(R^I&(A^R))+C[9]+2336552879&4294967295,M=I+(N<<12&4294967295|N>>>20),N=R+(A^M&(I^A))+C[10]+4294925233&4294967295,R=M+(N<<17&4294967295|N>>>15),N=A+(I^R&(M^I))+C[11]+2304563134&4294967295,A=R+(N<<22&4294967295|N>>>10),N=I+(M^A&(R^M))+C[12]+1804603682&4294967295,I=A+(N<<7&4294967295|N>>>25),N=M+(R^I&(A^R))+C[13]+4254626195&4294967295,M=I+(N<<12&4294967295|N>>>20),N=R+(A^M&(I^A))+C[14]+2792965006&4294967295,R=M+(N<<17&4294967295|N>>>15),N=A+(I^R&(M^I))+C[15]+1236535329&4294967295,A=R+(N<<22&4294967295|N>>>10),N=I+(R^M&(A^R))+C[1]+4129170786&4294967295,I=A+(N<<5&4294967295|N>>>27),N=M+(A^R&(I^A))+C[6]+3225465664&4294967295,M=I+(N<<9&4294967295|N>>>23),N=R+(I^A&(M^I))+C[11]+643717713&4294967295,R=M+(N<<14&4294967295|N>>>18),N=A+(M^I&(R^M))+C[0]+3921069994&4294967295,A=R+(N<<20&4294967295|N>>>12),N=I+(R^M&(A^R))+C[5]+3593408605&4294967295,I=A+(N<<5&4294967295|N>>>27),N=M+(A^R&(I^A))+C[10]+38016083&4294967295,M=I+(N<<9&4294967295|N>>>23),N=R+(I^A&(M^I))+C[15]+3634488961&4294967295,R=M+(N<<14&4294967295|N>>>18),N=A+(M^I&(R^M))+C[4]+3889429448&4294967295,A=R+(N<<20&4294967295|N>>>12),N=I+(R^M&(A^R))+C[9]+568446438&4294967295,I=A+(N<<5&4294967295|N>>>27),N=M+(A^R&(I^A))+C[14]+3275163606&4294967295,M=I+(N<<9&4294967295|N>>>23),N=R+(I^A&(M^I))+C[3]+4107603335&4294967295,R=M+(N<<14&4294967295|N>>>18),N=A+(M^I&(R^M))+C[8]+1163531501&4294967295,A=R+(N<<20&4294967295|N>>>12),N=I+(R^M&(A^R))+C[13]+2850285829&4294967295,I=A+(N<<5&4294967295|N>>>27),N=M+(A^R&(I^A))+C[2]+4243563512&4294967295,M=I+(N<<9&4294967295|N>>>23),N=R+(I^A&(M^I))+C[7]+1735328473&4294967295,R=M+(N<<14&4294967295|N>>>18),N=A+(M^I&(R^M))+C[12]+2368359562&4294967295,A=R+(N<<20&4294967295|N>>>12),N=I+(A^R^M)+C[5]+4294588738&4294967295,I=A+(N<<4&4294967295|N>>>28),N=M+(I^A^R)+C[8]+2272392833&4294967295,M=I+(N<<11&4294967295|N>>>21),N=R+(M^I^A)+C[11]+1839030562&4294967295,R=M+(N<<16&4294967295|N>>>16),N=A+(R^M^I)+C[14]+4259657740&4294967295,A=R+(N<<23&4294967295|N>>>9),N=I+(A^R^M)+C[1]+2763975236&4294967295,I=A+(N<<4&4294967295|N>>>28),N=M+(I^A^R)+C[4]+1272893353&4294967295,M=I+(N<<11&4294967295|N>>>21),N=R+(M^I^A)+C[7]+4139469664&4294967295,R=M+(N<<16&4294967295|N>>>16),N=A+(R^M^I)+C[10]+3200236656&4294967295,A=R+(N<<23&4294967295|N>>>9),N=I+(A^R^M)+C[13]+681279174&4294967295,I=A+(N<<4&4294967295|N>>>28),N=M+(I^A^R)+C[0]+3936430074&4294967295,M=I+(N<<11&4294967295|N>>>21),N=R+(M^I^A)+C[3]+3572445317&4294967295,R=M+(N<<16&4294967295|N>>>16),N=A+(R^M^I)+C[6]+76029189&4294967295,A=R+(N<<23&4294967295|N>>>9),N=I+(A^R^M)+C[9]+3654602809&4294967295,I=A+(N<<4&4294967295|N>>>28),N=M+(I^A^R)+C[12]+3873151461&4294967295,M=I+(N<<11&4294967295|N>>>21),N=R+(M^I^A)+C[15]+530742520&4294967295,R=M+(N<<16&4294967295|N>>>16),N=A+(R^M^I)+C[2]+3299628645&4294967295,A=R+(N<<23&4294967295|N>>>9),N=I+(R^(A|~M))+C[0]+4096336452&4294967295,I=A+(N<<6&4294967295|N>>>26),N=M+(A^(I|~R))+C[7]+1126891415&4294967295,M=I+(N<<10&4294967295|N>>>22),N=R+(I^(M|~A))+C[14]+2878612391&4294967295,R=M+(N<<15&4294967295|N>>>17),N=A+(M^(R|~I))+C[5]+4237533241&4294967295,A=R+(N<<21&4294967295|N>>>11),N=I+(R^(A|~M))+C[12]+1700485571&4294967295,I=A+(N<<6&4294967295|N>>>26),N=M+(A^(I|~R))+C[3]+2399980690&4294967295,M=I+(N<<10&4294967295|N>>>22),N=R+(I^(M|~A))+C[10]+4293915773&4294967295,R=M+(N<<15&4294967295|N>>>17),N=A+(M^(R|~I))+C[1]+2240044497&4294967295,A=R+(N<<21&4294967295|N>>>11),N=I+(R^(A|~M))+C[8]+1873313359&4294967295,I=A+(N<<6&4294967295|N>>>26),N=M+(A^(I|~R))+C[15]+4264355552&4294967295,M=I+(N<<10&4294967295|N>>>22),N=R+(I^(M|~A))+C[6]+2734768916&4294967295,R=M+(N<<15&4294967295|N>>>17),N=A+(M^(R|~I))+C[13]+1309151649&4294967295,A=R+(N<<21&4294967295|N>>>11),N=I+(R^(A|~M))+C[4]+4149444226&4294967295,I=A+(N<<6&4294967295|N>>>26),N=M+(A^(I|~R))+C[11]+3174756917&4294967295,M=I+(N<<10&4294967295|N>>>22),N=R+(I^(M|~A))+C[2]+718787259&4294967295,R=M+(N<<15&4294967295|N>>>17),N=A+(M^(R|~I))+C[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(R+(N<<21&4294967295|N>>>11))&4294967295,k.g[2]=k.g[2]+R&4294967295,k.g[3]=k.g[3]+M&4294967295}r.prototype.v=function(k,I){I===void 0&&(I=k.length);const A=I-this.blockSize,C=this.C;let R=this.h,M=0;for(;M<I;){if(R==0)for(;M<=A;)o(this,k,M),M+=this.blockSize;if(typeof k=="string"){for(;M<I;)if(C[R++]=k.charCodeAt(M++),R==this.blockSize){o(this,C),R=0;break}}else for(;M<I;)if(C[R++]=k[M++],R==this.blockSize){o(this,C),R=0;break}}this.h=R,this.o+=I},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;I=this.o*8;for(var A=k.length-8;A<k.length;++A)k[A]=I&255,I/=256;for(this.v(k),k=Array(16),I=0,A=0;A<4;++A)for(let C=0;C<32;C+=8)k[I++]=this.g[A]>>>C&255;return k};function c(k,I){var A=p;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=I(k)}function d(k,I){this.h=I;const A=[];let C=!0;for(let R=k.length-1;R>=0;R--){const M=k[R]|0;C&&M==I||(A[R]=M,C=!1)}this.g=A}var p={};function g(k){return-128<=k&&k<128?c(k,function(I){return new d([I|0],I<0?-1:0)}):new d([k|0],k<0?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return w;if(k<0)return U(y(-k));const I=[];let A=1;for(let C=0;k>=A;C++)I[C]=k/A|0,A*=4294967296;return new d(I,0)}function x(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return U(x(k.substring(1),I));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(I,8));let C=w;for(let M=0;M<k.length;M+=8){var R=Math.min(8,k.length-M);const N=parseInt(k.substring(M,M+R),I);R<8?(R=y(Math.pow(I,R)),C=C.j(R).add(y(N))):(C=C.j(A),C=C.add(y(N)))}return C}var w=g(0),T=g(1),D=g(16777216);s=d.prototype,s.m=function(){if(X(this))return-U(this).m();let k=0,I=1;for(let A=0;A<this.g.length;A++){const C=this.i(A);k+=(C>=0?C:4294967296+C)*I,I*=4294967296}return k},s.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(q(this))return"0";if(X(this))return"-"+U(this).toString(k);const I=y(Math.pow(k,6));var A=this;let C="";for(;;){const R=fe(A,I).g;A=oe(A,R.j(I));let M=((A.g.length>0?A.g[0]:A.h)>>>0).toString(k);if(A=R,q(A))return M+C;for(;M.length<6;)M="0"+M;C=M+C}},s.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function q(k){if(k.h!=0)return!1;for(let I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function X(k){return k.h==-1}s.l=function(k){return k=oe(this,k),X(k)?-1:q(k)?0:1};function U(k){const I=k.g.length,A=[];for(let C=0;C<I;C++)A[C]=~k.g[C];return new d(A,~k.h).add(T)}s.abs=function(){return X(this)?U(this):this},s.add=function(k){const I=Math.max(this.g.length,k.g.length),A=[];let C=0;for(let R=0;R<=I;R++){let M=C+(this.i(R)&65535)+(k.i(R)&65535),N=(M>>>16)+(this.i(R)>>>16)+(k.i(R)>>>16);C=N>>>16,M&=65535,N&=65535,A[R]=N<<16|M}return new d(A,A[A.length-1]&-2147483648?-1:0)};function oe(k,I){return k.add(U(I))}s.j=function(k){if(q(this)||q(k))return w;if(X(this))return X(k)?U(this).j(U(k)):U(U(this).j(k));if(X(k))return U(this.j(U(k)));if(this.l(D)<0&&k.l(D)<0)return y(this.m()*k.m());const I=this.g.length+k.g.length,A=[];for(var C=0;C<2*I;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(let R=0;R<k.g.length;R++){const M=this.i(C)>>>16,N=this.i(C)&65535,we=k.i(R)>>>16,be=k.i(R)&65535;A[2*C+2*R]+=N*be,ae(A,2*C+2*R),A[2*C+2*R+1]+=M*be,ae(A,2*C+2*R+1),A[2*C+2*R+1]+=N*we,ae(A,2*C+2*R+1),A[2*C+2*R+2]+=M*we,ae(A,2*C+2*R+2)}for(k=0;k<I;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=I;k<2*I;k++)A[k]=0;return new d(A,0)};function ae(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function de(k,I){this.g=k,this.h=I}function fe(k,I){if(q(I))throw Error("division by zero");if(q(k))return new de(w,w);if(X(k))return I=fe(U(k),I),new de(U(I.g),U(I.h));if(X(I))return I=fe(k,U(I)),new de(U(I.g),I.h);if(k.g.length>30){if(X(k)||X(I))throw Error("slowDivide_ only works with positive integers.");for(var A=T,C=I;C.l(k)<=0;)A=Oe(A),C=Oe(C);var R=ge(A,1),M=ge(C,1);for(C=ge(C,2),A=ge(A,2);!q(C);){var N=M.add(C);N.l(k)<=0&&(R=R.add(A),M=N),C=ge(C,1),A=ge(A,1)}return I=oe(k,R.j(I)),new de(R,I)}for(R=w;k.l(I)>=0;){for(A=Math.max(1,Math.floor(k.m()/I.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),M=y(A),N=M.j(I);X(N)||N.l(k)>0;)A-=C,M=y(A),N=M.j(I);q(M)&&(M=T),R=R.add(M),k=oe(k,N)}return new de(R,k)}s.B=function(k){return fe(this,k).h},s.and=function(k){const I=Math.max(this.g.length,k.g.length),A=[];for(let C=0;C<I;C++)A[C]=this.i(C)&k.i(C);return new d(A,this.h&k.h)},s.or=function(k){const I=Math.max(this.g.length,k.g.length),A=[];for(let C=0;C<I;C++)A[C]=this.i(C)|k.i(C);return new d(A,this.h|k.h)},s.xor=function(k){const I=Math.max(this.g.length,k.g.length),A=[];for(let C=0;C<I;C++)A[C]=this.i(C)^k.i(C);return new d(A,this.h^k.h)};function Oe(k){const I=k.g.length+1,A=[];for(let C=0;C<I;C++)A[C]=k.i(C)<<1|k.i(C-1)>>>31;return new d(A,k.h)}function ge(k,I){const A=I>>5;I%=32;const C=k.g.length-A,R=[];for(let M=0;M<C;M++)R[M]=I>0?k.i(M+A)>>>I|k.i(M+A+1)<<32-I:k.i(M+A);return new d(R,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Sw=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=x,Or=d}).apply(typeof Db<"u"?Db:typeof self<"u"?self:typeof window<"u"?window:{});var Ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Aw,xc,Nw,Uh,Vp,Rw,Iw,Cw;(function(){var s,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ah=="object"&&Ah];for(var v=0;v<u.length;++v){var b=u[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function o(u,v){if(v)e:{var b=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var L=u[S];if(!(L in b))break e;b=b[L]}u=u[u.length-1],S=b[u],v=v(S),v!=S&&v!=null&&e(b,u,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(v){var b=[],S;for(S in v)Object.prototype.hasOwnProperty.call(v,S)&&b.push([S,v[S]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function g(u,v,b){return u.call.apply(u.bind,arguments)}function y(u,v,b){return y=g,y.apply(null,arguments)}function x(u,v){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function w(u,v){function b(){}b.prototype=v.prototype,u.Z=v.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(S,L,$){for(var he=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)he[Be-2]=arguments[Be];return v.prototype[L].apply(S,he)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function D(u){const v=u.length;if(v>0){const b=Array(v);for(let S=0;S<v;S++)b[S]=u[S];return b}return[]}function q(u,v){for(let S=1;S<arguments.length;S++){const L=arguments[S];var b=typeof L;if(b=b!="object"?b:L?Array.isArray(L)?"array":b:"null",b=="array"||b=="object"&&typeof L.length=="number"){b=u.length||0;const $=L.length||0;u.length=b+$;for(let he=0;he<$;he++)u[b+he]=L[he]}else u.push(L)}}class X{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function U(u){d.setTimeout(()=>{throw u},0)}function oe(){var u=k;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class ae{constructor(){this.h=this.g=null}add(v,b){const S=de.get();S.set(v,b),this.h?this.h.next=S:this.g=S,this.h=S}}var de=new X(()=>new fe,u=>u.reset());class fe{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Oe,ge=!1,k=new ae,I=()=>{const u=Promise.resolve(void 0);Oe=()=>{u.then(A)}};function A(){for(var u;u=oe();){try{u.h.call(u.g)}catch(b){U(b)}var v=de;v.j(u),v.h<100&&(v.h++,u.next=v.g,v.g=u)}ge=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};d.addEventListener("test",b,v),d.removeEventListener("test",b,v)}catch{}return u})();function N(u){return/^[\s\xa0]*$/.test(u)}function we(u,v){R.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,v)}w(we,R),we.prototype.init=function(u,v){const b=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget,v||(b=="mouseover"?v=u.fromElement:b=="mouseout"&&(v=u.toElement)),this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),F=0;function se(u,v,b,S,L){this.listener=u,this.proxy=null,this.src=v,this.type=b,this.capture=!!S,this.ha=L,this.key=++F,this.da=this.fa=!1}function me(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Se(u,v,b){for(const S in u)v.call(b,u[S],S,u)}function Ve(u,v){for(const b in u)v.call(void 0,u[b],b,u)}function j(u){const v={};for(const b in u)v[b]=u[b];return v}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(u,v){let b,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(b in S)u[b]=S[b];for(let $=0;$<G.length;$++)b=G[$],Object.prototype.hasOwnProperty.call(S,b)&&(u[b]=S[b])}}function re(u){this.src=u,this.g={},this.h=0}re.prototype.add=function(u,v,b,S,L){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const he=Q(u,v,S,L);return he>-1?(v=u[he],b||(v.fa=!1)):(v=new se(v,this.src,$,!!S,L),v.fa=b,u.push(v)),v};function te(u,v){const b=v.type;if(b in u.g){var S=u.g[b],L=Array.prototype.indexOf.call(S,v,void 0),$;($=L>=0)&&Array.prototype.splice.call(S,L,1),$&&(me(v),u.g[b].length==0&&(delete u.g[b],u.h--))}}function Q(u,v,b,S){for(let L=0;L<u.length;++L){const $=u[L];if(!$.da&&$.listener==v&&$.capture==!!b&&$.ha==S)return L}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),Ne={};function xe(u,v,b,S,L){if(Array.isArray(v)){for(let $=0;$<v.length;$++)xe(u,v[$],b,S,L);return null}return b=jn(b),u&&u[be]?u.J(v,b,p(S)?!!S.capture:!1,L):nt(u,v,b,!1,S,L)}function nt(u,v,b,S,L,$){if(!v)throw Error("Invalid event type");const he=p(L)?!!L.capture:!!L;let Be=mi(u);if(Be||(u[ce]=Be=new re(u)),b=Be.add(v,b,S,he,$),b.proxy)return b;if(S=Fe(),b.proxy=S,S.src=u,S.listener=b,u.addEventListener)M||(L=he),L===void 0&&(L=!1),u.addEventListener(v.toString(),S,L);else if(u.attachEvent)u.attachEvent(Bt(v.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Fe(){function u(b){return v.call(u.src,u.listener,b)}const v=yn;return u}function wt(u,v,b,S,L){if(Array.isArray(v))for(var $=0;$<v.length;$++)wt(u,v[$],b,S,L);else S=p(S)?!!S.capture:!!S,b=jn(b),u&&u[be]?(u=u.i,$=String(v).toString(),$ in u.g&&(v=u.g[$],b=Q(v,b,S,L),b>-1&&(me(v[b]),Array.prototype.splice.call(v,b,1),v.length==0&&(delete u.g[$],u.h--)))):u&&(u=mi(u))&&(v=u.g[v.toString()],u=-1,v&&(u=Q(v,b,S,L)),(b=u>-1?v[u]:null)&&tn(b))}function tn(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[be])te(v.i,u);else{var b=u.type,S=u.proxy;v.removeEventListener?v.removeEventListener(b,S,u.capture):v.detachEvent?v.detachEvent(Bt(b),S):v.addListener&&v.removeListener&&v.removeListener(S),(b=mi(v))?(te(b,u),b.h==0&&(b.src=null,v[ce]=null)):me(u)}}}function Bt(u){return u in Ne?Ne[u]:Ne[u]="on"+u}function yn(u,v){if(u.da)u=!0;else{v=new we(v,this);const b=u.listener,S=u.ha||u.src;u.fa&&tn(u),u=b.call(S,v)}return u}function mi(u){return u=u[ce],u instanceof re?u:null}var Wr="__closure_events_fn_"+(Math.random()*1e9>>>0);function jn(u){return typeof u=="function"?u:(u[Wr]||(u[Wr]=function(v){return u.handleEvent(v)}),u[Wr])}function Rt(){C.call(this),this.i=new re(this),this.M=this,this.G=null}w(Rt,C),Rt.prototype[be]=!0,Rt.prototype.removeEventListener=function(u,v,b,S){wt(this,u,v,b,S)};function Vt(u,v){var b,S=u.G;if(S)for(b=[];S;S=S.G)b.push(S);if(u=u.M,S=v.type||v,typeof v=="string")v=new R(v,u);else if(v instanceof R)v.target=v.target||u;else{var L=v;v=new R(S,u),le(v,L)}L=!0;let $,he;if(b)for(he=b.length-1;he>=0;he--)$=v.g=b[he],L=qs($,S,!0,v)&&L;if($=v.g=u,L=qs($,S,!0,v)&&L,L=qs($,S,!1,v)&&L,b)for(he=0;he<b.length;he++)$=v.g=b[he],L=qs($,S,!1,v)&&L}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var u=this.i;for(const v in u.g){const b=u.g[v];for(let S=0;S<b.length;S++)me(b[S]);delete u.g[v],u.h--}}this.G=null},Rt.prototype.J=function(u,v,b,S){return this.i.add(String(u),v,!1,b,S)},Rt.prototype.K=function(u,v,b,S){return this.i.add(String(u),v,!0,b,S)};function qs(u,v,b,S){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();let L=!0;for(let $=0;$<v.length;++$){const he=v[$];if(he&&!he.da&&he.capture==b){const Be=he.listener,Pt=he.ha||he.src;he.fa&&te(u.i,he),L=Be.call(Pt,S)!==!1&&L}}return L&&!S.defaultPrevented}function ml(u,v){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(u,v||0)}function $a(u){u.g=ml(()=>{u.g=null,u.i&&(u.i=!1,$a(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class cn extends C{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:$a(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pi(u){C.call(this),this.h=u,this.g={}}w(pi,C);var Jr=[];function Zr(u){Se(u.g,function(v,b){this.g.hasOwnProperty(b)&&tn(v)},u),u.g={}}pi.prototype.N=function(){pi.Z.N.call(this),Zr(this)},pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var W=d.JSON.stringify,Ae=d.JSON.parse,Re=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function ct(){}function ue(){}var Te={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Me(){R.call(this,"d")}w(Me,R);function yt(){R.call(this,"c")}w(yt,R);var Qe={},St=null;function ke(){return St=St||new Rt}Qe.Ia="serverreachability";function Hn(u){R.call(this,Qe.Ia,u)}w(Hn,R);function An(u){const v=ke();Vt(v,new Hn(v))}Qe.STAT_EVENT="statevent";function gi(u,v){R.call(this,Qe.STAT_EVENT,u),this.stat=v}w(gi,R);function _t(u){const v=ke();Vt(v,new gi(v,u))}Qe.Ja="timingevent";function Fn(u,v){R.call(this,Qe.Ja,u),this.size=v}w(Fn,R);function Es(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},v)}function Ts(){this.g=!0}Ts.prototype.ua=function(){this.g=!1};function $d(u,v,b,S,L,$){u.info(function(){if(u.g)if($){var he="",Be=$.split("&");for(let at=0;at<Be.length;at++){var Pt=Be[at].split("=");if(Pt.length>1){const At=Pt[0];Pt=Pt[1];const hs=At.split("_");he=hs.length>=2&&hs[1]=="type"?he+(At+"="+Pt+"&"):he+(At+"=redacted&")}}}else he=null;else he=$;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+v+`
`+b+`
`+he})}function tu(u,v,b,S,L,$,he){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+v+`
`+b+`
`+$+" "+he})}function Hs(u,v,b,S){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+Kd(u,b)+(S?" "+S:"")})}function ea(u,v){u.info(function(){return"TIMEOUT: "+v})}Ts.prototype.info=function(){};function Kd(u,v){if(!u.g)return v;if(!v)return null;try{const $=JSON.parse(v);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var b=$[u];if(!(b.length<2)){var S=b[1];if(Array.isArray(S)&&!(S.length<1)){var L=S[0];if(L!="noop"&&L!="stop"&&L!="close")for(let he=1;he<S.length;he++)S[he]=""}}}}return W($)}catch{return v}}var ta={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},pl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gl;function na(){}w(na,ct),na.prototype.g=function(){return new XMLHttpRequest},gl=new na;function yi(u){return encodeURIComponent(String(u))}function nu(u){var v=1;u=u.split(":");const b=[];for(;v>0&&u.length;)b.push(u.shift()),v--;return u.length&&b.push(u.join(":")),b}function Ss(u,v,b,S){this.j=u,this.i=v,this.l=b,this.S=S||1,this.V=new pi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new As}function As(){this.i=null,this.g="",this.h=!1}var qt={},nn={};function Fs(u,v,b){u.M=1,u.A=sa(Ft(v)),u.u=b,u.R=!0,Ka(u,null)}function Ka(u,v){u.F=Date.now(),Gs(u),u.B=Ft(u.A);var b=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),Wa(b.i,"t",S),u.C=0,b=u.j.L,u.h=new As,u.g=yu(u.j,b?v:null,!u.u),u.P>0&&(u.O=new cn(y(u.Y,u,u.g),u.P)),v=u.V,b=u.g,S=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(Jr[0]=L.toString()),L=Jr);for(let $=0;$<L.length;$++){const he=xe(b,L[$],S||v.handleEvent,!1,v.h||v);if(!he)break;v.g[he.key]=he}v=u.J?j(u.J):{},u.u?(u.v||(u.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,v)):(u.v="GET",u.g.ea(u.B,u.v,null,v)),An(),$d(u.i,u.v,u.B,u.l,u.S,u.u)}Ss.prototype.ba=function(u){u=u.target;const v=this.O;v&&Is(u)==3?v.j():this.Y(u)},Ss.prototype.Y=function(u){try{if(u==this.g)e:{const Be=Is(this.g),Pt=this.g.ya(),at=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||un(this.g)))){this.K||Be!=4||Pt==7||(Pt==8||at<=0?An(3):An(2)),$s(this);var v=this.g.ca();this.X=v;var b=Qd(this);if(this.o=v==200,tu(this.i,this.v,this.B,this.l,this.S,Be,v),this.o){if(this.U&&!this.L){t:{if(this.g){var S,L=this.g;if((S=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(S)){var $=S;break t}}$=null}if(u=$)Hs(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ks(this,u);else{this.o=!1,this.m=3,_t(12),Gn(this),ls(this);break e}}if(this.R){u=!0;let At;for(;!this.K&&this.C<b.length;)if(At=iu(this,b),At==nn){Be==4&&(this.m=4,_t(14),u=!1),Hs(this.i,this.l,null,"[Incomplete Response]");break}else if(At==qt){this.m=4,_t(15),Hs(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else Hs(this.i,this.l,At,null),Ks(this,At);if(su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||b.length!=0||this.h.h||(this.m=1,_t(16),u=!1),this.o=this.o&&u,!u)Hs(this.i,this.l,b,"[Invalid Chunked Response]"),Gn(this),ls(this);else if(b.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Dl(he),he.P=!0,_t(11))}}else Hs(this.i,this.l,b,null),Ks(this,b);Be==4&&Gn(this),this.o&&!this.K&&(Be==4?fu(this.j,this):(this.o=!1,Gs(this)))}else _i(this.g),v==400&&b.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),Gn(this),ls(this)}}}catch{}finally{}};function Qd(u){if(!su(u))return u.g.la();const v=un(u.g);if(v==="")return"";let b="";const S=v.length,L=Is(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Gn(u),ls(u),"";u.h.i=new d.TextDecoder}for(let $=0;$<S;$++)u.h.h=!0,b+=u.h.i.decode(v[$],{stream:!(L&&$==S-1)});return v.length=0,u.h.g+=b,u.C=0,u.h.g}function su(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function iu(u,v){var b=u.C,S=v.indexOf(`
`,b);return S==-1?nn:(b=Number(v.substring(b,S)),isNaN(b)?qt:(S+=1,S+b>v.length?nn:(v=v.slice(S,S+b),u.C=S+b,v)))}Ss.prototype.cancel=function(){this.K=!0,Gn(this)};function Gs(u){u.T=Date.now()+u.H,Qa(u,u.H)}function Qa(u,v){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Es(y(u.aa,u),v)}function $s(u){u.D&&(d.clearTimeout(u.D),u.D=null)}Ss.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ea(this.i,this.B),this.M!=2&&(An(),_t(17)),Gn(this),this.m=2,ls(this)):Qa(this,this.T-u)};function ls(u){u.j.I==0||u.K||fu(u.j,u)}function Gn(u){$s(u);var v=u.O;v&&typeof v.dispose=="function"&&v.dispose(),u.O=null,Zr(u.V),u.g&&(v=u.g,u.g=null,v.abort(),v.dispose())}function Ks(u,v){try{var b=u.j;if(b.I!=0&&(b.g==u||Ys(b.h,u))){if(!u.L&&Ys(b.h,u)&&b.I==3){try{var S=b.Ba.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)no(b),ir(b);else break e;ua(b),_t(18)}}else b.xa=L[1],0<b.xa-b.K&&L[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Es(y(b.Va,b),6e3));Qs(b.h)<=1&&b.ta&&(b.ta=void 0)}else ti(b,11)}else if((u.L||b.g==u)&&no(b),!N(v))for(L=b.Ba.g.parse(v),v=0;v<L.length;v++){let at=L[v];const At=at[0];if(!(At<=b.K))if(b.K=At,at=at[1],b.I==2)if(at[0]=="c"){b.M=at[1],b.ba=at[2];const hs=at[3];hs!=null&&(b.ka=hs,b.j.info("VER="+b.ka));const ni=at[4];ni!=null&&(b.za=ni,b.j.info("SVER="+b.za));const Cs=at[5];Cs!=null&&typeof Cs=="number"&&Cs>0&&(S=1.5*Cs,b.O=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const Ds=u.g;if(Ds){const ha=Ds.g?Ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ha){var $=S.h;$.g||ha.indexOf("spdy")==-1&&ha.indexOf("quic")==-1&&ha.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(_l($,$.h),$.h=null))}if(S.G){const so=Ds.g?Ds.g.getResponseHeader("X-HTTP-Session-Id"):null;so&&(S.wa=so,ut(S.J,S.G,so))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),S=b;var he=u;if(S.na=gu(S,S.L?S.ba:null,S.W),he.L){bl(S.h,he);var Be=he,Pt=S.O;Pt&&(Be.H=Pt),Be.D&&($s(Be),Gs(Be)),S.g=he}else hu(S);b.i.length>0&&ei(b)}else at[0]!="stop"&&at[0]!="close"||ti(b,7);else b.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?ti(b,7):Il(b):at[0]!="noop"&&b.l&&b.l.qa(at),b.A=0)}}An(4)}catch{}}var Ht=class{constructor(u,v){this.g=u,this.map=v}};function yl(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vl(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Qs(u){return u.h?1:u.g?u.g.size:0}function Ys(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function _l(u,v){u.g?u.g.add(v):u.h=v}function bl(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}yl.prototype.cancel=function(){if(this.i=xl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function xl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const b of u.g.values())v=v.concat(b.G);return v}return D(u.i)}var ru=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ya(u,v){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const S=u[b].indexOf("=");let L,$=null;S>=0?(L=u[b].substring(0,S),$=u[b].substring(S+1)):L=u[b],v(L,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function $n(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;u instanceof $n?(this.l=u.l,sn(this,u.j),this.o=u.o,this.g=u.g,Wi(this,u.u),this.h=u.h,wl(this,cu(u.i)),this.m=u.m):u&&(v=String(u).match(ru))?(this.l=!1,sn(this,v[1]||"",!0),this.o=Xs(v[2]||""),this.g=Xs(v[3]||"",!0),Wi(this,v[4]),this.h=Xs(v[5]||"",!0),wl(this,v[6]||"",!0),this.m=Xs(v[7]||"")):(this.l=!1,this.i=new Zi(null,this.l))}$n.prototype.toString=function(){const u=[];var v=this.j;v&&u.push(ia(v,Xa,!0),":");var b=this.g;return(b||v=="file")&&(u.push("//"),(v=this.o)&&u.push(ia(v,Xa,!0),"@"),u.push(yi(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(ia(b,b.charAt(0)=="/"?El:au,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",ia(b,ou)),u.join("")},$n.prototype.resolve=function(u){const v=Ft(this);let b=!!u.j;b?sn(v,u.j):b=!!u.o,b?v.o=u.o:b=!!u.g,b?v.g=u.g:b=u.u!=null;var S=u.h;if(b)Wi(v,u.u);else if(b=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var L=v.h.lastIndexOf("/");L!=-1&&(S=v.h.slice(0,L+1)+S)}if(L=S,L==".."||L==".")S="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){S=L.lastIndexOf("/",0)==0,L=L.split("/");const $=[];for(let he=0;he<L.length;){const Be=L[he++];Be=="."?S&&he==L.length&&$.push(""):Be==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),S&&he==L.length&&$.push("")):($.push(Be),S=!0)}S=$.join("/")}else S=L}return b?v.h=S:b=u.i.toString()!=="",b?wl(v,cu(u.i)):b=!!u.m,b&&(v.m=u.m),v};function Ft(u){return new $n(u)}function sn(u,v,b){u.j=b?Xs(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function Wi(u,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);u.u=v}else u.u=null}function wl(u,v,b){v instanceof Zi?(u.i=v,Ja(u.i,u.l)):(b||(v=ia(v,Ji)),u.i=new Zi(v,u.l))}function ut(u,v,b){u.i.set(v,b)}function sa(u){return ut(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Xs(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ia(u,v,b){return typeof u=="string"?(u=encodeURI(u).replace(v,kn),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function kn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Xa=/[#\/\?@]/g,au=/[#\?:]/g,El=/[#\?]/g,Ji=/[#\?@]/g,ou=/#/g;function Zi(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function On(u){u.g||(u.g=new Map,u.h=0,u.i&&Ya(u.i,function(v,b){u.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}s=Zi.prototype,s.add=function(u,v){On(this),this.i=null,u=er(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(v),this.h+=1,this};function lu(u,v){On(u),v=er(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function Tl(u,v){return On(u),v=er(u,v),u.g.has(v)}s.forEach=function(u,v){On(this),this.g.forEach(function(b,S){b.forEach(function(L){u.call(v,L,S,this)},this)},this)};function Sl(u,v){On(u);let b=[];if(typeof v=="string")Tl(u,v)&&(b=b.concat(u.g.get(er(u,v))));else for(u=Array.from(u.g.values()),v=0;v<u.length;v++)b=b.concat(u[v]);return b}s.set=function(u,v){return On(this),this.i=null,u=er(this,u),Tl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},s.get=function(u,v){return u?(u=Sl(this,u),u.length>0?String(u[0]):v):v};function Wa(u,v,b){lu(u,v),b.length>0&&(u.i=null,u.g.set(er(u,v),D(b)),u.h+=b.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(let S=0;S<v.length;S++){var b=v[S];const L=yi(b);b=Sl(this,b);for(let $=0;$<b.length;$++){let he=L;b[$]!==""&&(he+="="+yi(b[$])),u.push(he)}}return this.i=u.join("&")};function cu(u){const v=new Zi;return v.i=u.i,u.g&&(v.g=new Map(u.g),v.h=u.h),v}function er(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function Ja(u,v){v&&!u.j&&(On(u),u.i=null,u.g.forEach(function(b,S){const L=S.toLowerCase();S!=L&&(lu(this,S),Wa(this,L,b))},u)),u.j=v}function Ns(u,v){const b=new Ts;if(d.Image){const S=new Image;S.onload=x(cs,b,"TestLoadImage: loaded",!0,v,S),S.onerror=x(cs,b,"TestLoadImage: error",!1,v,S),S.onabort=x(cs,b,"TestLoadImage: abort",!1,v,S),S.ontimeout=x(cs,b,"TestLoadImage: timeout",!1,v,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else v(!1)}function Al(u,v){const b=new Ts,S=new AbortController,L=setTimeout(()=>{S.abort(),cs(b,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:S.signal}).then($=>{clearTimeout(L),$.ok?cs(b,"TestPingServer: ok",!0,v):cs(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(L),cs(b,"TestPingServer: error",!1,v)})}function cs(u,v,b,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(b)}catch{}}function tr(){this.g=new Re}function Ws(u){this.i=u.Sb||null,this.h=u.ab||!1}w(Ws,ct),Ws.prototype.g=function(){return new ra(this.i,this.h)};function ra(u,v){Rt.call(this),this.H=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(ra,Rt),s=ra.prototype,s.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=v,this.readyState=1,Rs(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(v.body=u),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,nr(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Rs(this)),this.g&&(this.readyState=3,Rs(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Za(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Za(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?nr(this):Rs(this),this.readyState==3&&Za(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,nr(this))},s.Na=function(u){this.g&&(this.response=u,nr(this))},s.ga=function(){this.g&&nr(this)};function nr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Rs(u)}s.setRequestHeader=function(u,v){this.A.append(u,v)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=v.next();return u.join(`\r
`)};function Rs(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function us(u){let v="";return Se(u,function(b,S){v+=S,v+=":",v+=b,v+=`\r
`}),v}function aa(u,v,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=us(b),typeof u=="string"?b!=null&&yi(b):ut(u,v,b))}function ft(u){Rt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(ft,Rt);var Js=/^https?$/i,Nl=["POST","PUT"];s=ft.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,v,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gl.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch($){oa(this,$);return}if(u=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)b.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const $ of S.keys())b.set($,S.get($));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find($=>$.toLowerCase()=="content-type"),L=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(Nl,v,void 0)>=0)||S||L||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,he]of b)this.g.setRequestHeader($,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){oa(this,$)}};function oa(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.o=5,Rl(u),vi(u)}function Rl(u){u.A||(u.A=!0,Vt(u,"complete"),Vt(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Vt(this,"complete"),Vt(this,"abort"),vi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vi(this,!0)),ft.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?la(this):this.Xa())},s.Xa=function(){la(this)};function la(u){if(u.h&&typeof c<"u"){if(u.v&&Is(u)==4)setTimeout(u.Ca.bind(u),0);else if(Vt(u,"readystatechange"),Is(u)==4){u.h=!1;try{const $=u.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var S;if(S=$===0){let he=String(u.D).match(ru)[1]||null;!he&&d.self&&d.self.location&&(he=d.self.location.protocol.slice(0,-1)),S=!Js.test(he?he.toLowerCase():"")}b=S}if(b)Vt(u,"complete"),Vt(u,"success");else{u.o=6;try{var L=Is(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",Rl(u)}}finally{vi(u)}}}}function vi(u,v){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,v||Vt(u,"ready");try{b.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Is(u){return u.g?u.g.readyState:0}s.ca=function(){try{return Is(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),Ae(v)}};function un(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function _i(u){const v={};u=(u.g&&Is(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(N(u[S]))continue;var b=nu(u[S]);const L=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const $=v[L]||[];v[L]=$,$.push(b)}Ve(v,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zs(u,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||v}function sr(u){this.za=0,this.i=[],this.j=new Ts,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zs("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zs("baseRetryDelayMs",5e3,u),this.Za=Zs("retryDelaySeedMs",1e4,u),this.Ta=Zs("forwardChannelMaxRetries",2,u),this.va=Zs("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new yl(u&&u.concurrentRequestLimit),this.Ba=new tr,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=sr.prototype,s.ka=8,s.I=1,s.connect=function(u,v,b,S){_t(0),this.W=u,this.H=v||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.J=gu(this,null,this.W),ei(this)};function Il(u){if(eo(u),u.I==3){var v=u.V++,b=Ft(u.J);if(ut(b,"SID",u.M),ut(b,"RID",v),ut(b,"TYPE","terminate"),ca(u,b),v=new Ss(u,u.j,v),v.M=2,v.A=sa(Ft(b)),b=!1,d.navigator&&d.navigator.sendBeacon)try{b=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!b&&d.Image&&(new Image().src=v.A,b=!0),b||(v.g=yu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Gs(v)}pu(u)}function ir(u){u.g&&(Dl(u),u.g.cancel(),u.g=null)}function eo(u){ir(u),u.v&&(d.clearTimeout(u.v),u.v=null),no(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function ei(u){if(!vl(u.h)&&!u.m){u.m=!0;var v=u.Ea;Oe||I(),ge||(Oe(),ge=!0),k.add(v,u),u.D=0}}function to(u,v){return Qs(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=v.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Es(y(u.Ea,u,v),mu(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new Ss(this,this.j,u);let $=this.o;if(this.U&&($?($=j($),le($,this.U)):$=this.U),this.u!==null||this.R||(L.J=$,$=null),this.S)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,v>4096){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=uu(this,L,v),b=Ft(this.J),ut(b,"RID",u),ut(b,"CVER",22),this.G&&ut(b,"X-HTTP-Session-Id",this.G),ca(this,b),$&&(this.R?v="headers="+yi(us($))+"&"+v:this.u&&aa(b,this.u,$)),_l(this.h,L),this.Ra&&ut(b,"TYPE","init"),this.S?(ut(b,"$req",v),ut(b,"SID","null"),L.U=!0,Fs(L,b,null)):Fs(L,b,v),this.I=2}}else this.I==3&&(u?Cl(this,u):this.i.length==0||vl(this.h)||Cl(this))};function Cl(u,v){var b;v?b=v.l:b=u.V++;const S=Ft(u.J);ut(S,"SID",u.M),ut(S,"RID",b),ut(S,"AID",u.K),ca(u,S),u.u&&u.o&&aa(S,u.u,u.o),b=new Ss(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),v&&(u.i=v.G.concat(u.i)),v=uu(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),_l(u.h,b),Fs(b,S,v)}function ca(u,v){u.H&&Se(u.H,function(b,S){ut(v,S,b)}),u.l&&Se({},function(b,S){ut(v,S,b)})}function uu(u,v,b){b=Math.min(u.i.length,b);const S=u.l?y(u.l.Ka,u.l,u):null;e:{var L=u.i;let Be=-1;for(;;){const Pt=["count="+b];Be==-1?b>0?(Be=L[0].g,Pt.push("ofs="+Be)):Be=0:Pt.push("ofs="+Be);let at=!0;for(let At=0;At<b;At++){var $=L[At].g;const hs=L[At].map;if($-=Be,$<0)Be=Math.max(0,L[At].g-100),at=!1;else try{$="req"+$+"_"||"";try{var he=hs instanceof Map?hs:Object.entries(hs);for(const[ni,Cs]of he){let Ds=Cs;p(Cs)&&(Ds=W(Cs)),Pt.push($+ni+"="+encodeURIComponent(Ds))}}catch(ni){throw Pt.push($+"type="+encodeURIComponent("_badmap")),ni}}catch{S&&S(hs)}}if(at){he=Pt.join("&");break e}}he=void 0}return u=u.i.splice(0,b),v.G=u,he}function hu(u){if(!u.g&&!u.v){u.Y=1;var v=u.Da;Oe||I(),ge||(Oe(),ge=!0),k.add(v,u),u.A=0}}function ua(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Es(y(u.Da,u),mu(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,du(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Es(y(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),ir(this),du(this))};function Dl(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function du(u){u.g=new Ss(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var v=Ft(u.na);ut(v,"RID","rpc"),ut(v,"SID",u.M),ut(v,"AID",u.K),ut(v,"CI",u.F?"0":"1"),!u.F&&u.ia&&ut(v,"TO",u.ia),ut(v,"TYPE","xmlhttp"),ca(u,v),u.u&&u.o&&aa(v,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=sa(Ft(v)),b.u=null,b.R=!0,Ka(b,u)}s.Va=function(){this.C!=null&&(this.C=null,ir(this),ua(this),_t(19))};function no(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function fu(u,v){var b=null;if(u.g==v){no(u),Dl(u),u.g=null;var S=2}else if(Ys(u.h,v))b=v.G,bl(u.h,v),S=1;else return;if(u.I!=0){if(v.o)if(S==1){b=v.u?v.u.length:0,v=Date.now()-v.F;var L=u.D;S=ke(),Vt(S,new Fn(S,b)),ei(u)}else hu(u);else if(L=v.m,L==3||L==0&&v.X>0||!(S==1&&to(u,v)||S==2&&ua(u)))switch(b&&b.length>0&&(v=u.h,v.i=v.i.concat(b)),L){case 1:ti(u,5);break;case 4:ti(u,10);break;case 3:ti(u,6);break;default:ti(u,2)}}}function mu(u,v){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*v}function ti(u,v){if(u.j.info("Error code "+v),v==2){var b=y(u.bb,u),S=u.Ua;const L=!S;S=new $n(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||sn(S,"https"),sa(S),L?Ns(S.toString(),b):Al(S.toString(),b)}else _t(2);u.I=0,u.l&&u.l.pa(v),pu(u),eo(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function pu(u){if(u.I=0,u.ja=[],u.l){const v=xl(u.h);(v.length!=0||u.i.length!=0)&&(q(u.ja,v),q(u.ja,u.i),u.h.i.length=0,D(u.i),u.i.length=0),u.l.oa()}}function gu(u,v,b){var S=b instanceof $n?Ft(b):new $n(b);if(S.g!="")v&&(S.g=v+"."+S.g),Wi(S,S.u);else{var L=d.location;S=L.protocol,v=v?v+"."+L.hostname:L.hostname,L=+L.port;const $=new $n(null);S&&sn($,S),v&&($.g=v),L&&Wi($,L),b&&($.h=b),S=$}return b=u.G,v=u.wa,b&&v&&ut(S,b,v),ut(S,"VER",u.ka),ca(u,S),S}function yu(u,v,b){if(v&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Aa&&!u.ma?new ft(new Ws({ab:b})):new ft(u.ma),v.Fa(u.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function vu(){}s=vu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function rr(){}rr.prototype.g=function(u,v){return new Nn(u,v)};function Nn(u,v){Rt.call(this),this.g=new sr(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(u?u["X-WebChannel-Client-Profile"]=v.sa:u={"X-WebChannel-Client-Profile":v.sa}),this.g.U=u,(u=v&&v.Qb)&&!N(u)&&(this.g.u=u),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!N(v)&&(this.g.G=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new bi(this)}w(Nn,Rt),Nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){Il(this.g)},Nn.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=W(u),u=b);v.i.push(new Ht(v.Ya++,u)),v.I==3&&ei(v)},Nn.prototype.N=function(){this.g.l=null,delete this.j,Il(this.g),delete this.g,Nn.Z.N.call(this)};function _u(u){Me.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const b in v){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}w(_u,Me);function bu(){yt.call(this),this.status=1}w(bu,yt);function bi(u){this.g=u}w(bi,vu),bi.prototype.ra=function(){Vt(this.g,"a")},bi.prototype.qa=function(u){Vt(this.g,new _u(u))},bi.prototype.pa=function(u){Vt(this.g,new bu)},bi.prototype.oa=function(){Vt(this.g,"b")},rr.prototype.createWebChannel=rr.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,Cw=function(){return new rr},Iw=function(){return ke()},Rw=Qe,Vp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,Uh=ta,pl.COMPLETE="complete",Nw=pl,ue.EventType=Te,Te.OPEN="a",Te.CLOSE="b",Te.ERROR="c",Te.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,xc=ue,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,Aw=ft}).apply(typeof Ah<"u"?Ah:typeof self<"u"?self:typeof window<"u"?window:{});const jb="@firebase/firestore",kb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=new vd("@firebase/firestore");function Oo(){return Va.logLevel}function ve(s,...e){if(Va.logLevel<=We.DEBUG){const n=e.map(Sg);Va.debug(`Firestore (${al}): ${s}`,...n)}}function Qi(s,...e){if(Va.logLevel<=We.ERROR){const n=e.map(Sg);Va.error(`Firestore (${al}): ${s}`,...n)}}function Pa(s,...e){if(Va.logLevel<=We.WARN){const n=e.map(Sg);Va.warn(`Firestore (${al}): ${s}`,...n)}}function Sg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Dw(s,r,n)}function Dw(s,e,n){let r=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Qi(r),new Error(r)}function lt(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||Dw(e,o,r)}function Ue(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends ws{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(wn.UNAUTHENTICATED)))}shutdown(){}}class t4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class n4{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){lt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let c=new Fi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Fi,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Fi)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt(typeof r.accessToken=="string",31837,{l:r}),new jw(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new wn(e)}}class s4{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class i4{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new s4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(wn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ob{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,es(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){lt(this.o===void 0,3512);const r=c=>{c.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ob(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ob(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=a4(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function Je(s,e){return s<e?-1:s>e?1:0}function Pp(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const o=s.charAt(r),c=e.charAt(r);if(o!==c)return op(o)===op(c)?Je(o,c):op(o)?1:-1}return Je(s.length,e.length)}const o4=55296,l4=57343;function op(s){const e=s.charCodeAt(0);return e>=o4&&e<=l4}function Xo(s,e,n){return s.length===e.length&&s.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="__name__";class oi{constructor(e,n,r){n===void 0?n=0:n>e.length&&je(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&je(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return oi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oi?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=oi.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Je(e.length,n.length)}static compareSegments(e,n){const r=oi.isNumericId(e),o=oi.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?oi.extractNumericId(e).compare(oi.extractNumericId(n)):Pp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Or.fromString(e.substring(4,e.length-2))}}class bt extends oi{construct(e,n,r){return new bt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new bt(n)}static emptyPath(){return new bt([])}}const c4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends oi{construct(e,n,r){return new on(e,n,r)}static isValidIdentifier(e){return c4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mb}static keyField(){return new on([Mb])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new pe(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new pe(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(r+=p,o++):(c(),o++)}if(c(),d)throw new pe(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(n)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(bt.fromString(e))}static fromName(e){return new Ie(bt.fromString(e).popFirst(5))}static empty(){return new Ie(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(s,e,n){if(!n)throw new pe(Z.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Mw(s,e,n,r){if(e===!0&&r===!0)throw new pe(Z.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Vb(s){if(!Ie.isDocumentKey(s))throw new pe(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Pb(s){if(Ie.isDocumentKey(s))throw new pe(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Vw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ad(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":je(12329,{type:typeof s})}function Tn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new pe(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ad(s);throw new pe(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Gc(s,e){if(!Vw(s))throw new pe(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const d=s[r];if(o&&typeof d!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new pe(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=-62135596800,Ub=1e6;class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ub);return new xt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Lb)throw new pe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ub}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gc(e,xt._jsonSchema))return new xt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Lb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xt._jsonSchemaVersion="firestore/timestamp/1.0",xt._jsonSchema={type:Jt("string",xt._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new xt(0,0))}static max(){return new Pe(new xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=-1;function u4(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Pe.fromTimestamp(r===1e9?new xt(n+1,0):new xt(n,r));return new Ur(o,Ie.empty(),e)}function h4(s){return new Ur(s.readTime,s.key,Pc)}class Ur{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ur(Pe.min(),Ie.empty(),Pc)}static max(){return new Ur(Pe.max(),Ie.empty(),Pc)}}function d4(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(s.documentKey,e.documentKey),n!==0?n:Je(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class m4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==f4)throw s;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ne.reject(n)}static resolve(e){return new ne(((n,r)=>{n(e)}))}static reject(e){return new ne(((n,r)=>{r(e)}))}static waitFor(e){return new ne(((n,r)=>{let o=0,c=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++c,d&&c===o&&n()}),(g=>r(g)))})),d=!0,c===o&&n()}))}static or(e){let n=ne.resolve(!1);for(const r of e)n=n.next((o=>o?ne.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,c)=>{r.push(n.call(this,o,c))})),this.waitFor(r)}static mapArray(e,n){return new ne(((r,o)=>{const c=e.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((x=>{d[y]=x,++p,p===c&&r(d)}),(x=>o(x)))}}))}static doWhile(e,n){return new ne(((r,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):r()};c()}))}}function p4(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ll(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag=-1;function Rd(s){return s==null}function nd(s){return s===0&&1/s==-1/0}function g4(s){return typeof s=="number"&&Number.isInteger(s)&&!nd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="";function y4(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=zb(e)),e=v4(s.get(n),e);return zb(e)}function v4(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const c=s.charAt(o);switch(c){case"\0":n+="";break;case Pw:n+="";break;default:n+=c}}return n}function zb(s){return s+Pw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Qr(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Lw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n){this.comparator=e,this.root=n||gn.EMPTY}insert(e,n){return new Dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nh(this.root,e,this.comparator,!0)}}class Nh{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??gn.RED,this.left=o??gn.EMPTY,this.right=c??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new gn(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return gn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qb(this.data.getIterator())}getIteratorFrom(e){return new qb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new en(this.comparator);return n.data=e,n}}class qb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new ns([])}unionWith(e){let n=new en(on.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ns(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Uw("Invalid base64 string: "+c):c}})(e);return new ln(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new ln(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const _4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(s){if(lt(!!s,39018),typeof s=="string"){let e=0;const n=_4.exec(s);if(lt(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zt(s.seconds),nanos:zt(s.nanos)}}function zt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Br(s){return typeof s=="string"?ln.fromBase64String(s):ln.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="server_timestamp",Bw="__type__",qw="__previous_value__",Hw="__local_write_time__";function Ng(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[Bw])==null?void 0:r.stringValue)===zw}function Id(s){const e=s.mapValue.fields[qw];return Ng(e)?Id(e):e}function Lc(s){const e=zr(s.mapValue.fields[Hw].timestampValue);return new xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n,r,o,c,d,p,g,y,x){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=x}}const sd="(default)";class Wo{constructor(e,n){this.projectId=e,this.database=n||sd}static empty(){return new Wo("","")}get isDefaultDatabase(){return this.database===sd}isEqual(e){return e instanceof Wo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="__type__",x4="__max__",Rh={mapValue:{}},Gw="__vector__",id="value";function qr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ng(s)?4:E4(s)?9007199254740991:w4(s)?10:11:je(28295,{value:s})}function fi(s,e){if(s===e)return!0;const n=qr(s);if(n!==qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Lc(s).isEqual(Lc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=zr(o.timestampValue),p=zr(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return Br(o.bytesValue).isEqual(Br(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return zt(o.geoPointValue.latitude)===zt(c.geoPointValue.latitude)&&zt(o.geoPointValue.longitude)===zt(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return zt(o.integerValue)===zt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=zt(o.doubleValue),p=zt(c.doubleValue);return d===p?nd(d)===nd(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return Xo(s.arrayValue.values||[],e.arrayValue.values||[],fi);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},p=c.mapValue.fields||{};if(Bb(d)!==Bb(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!fi(d[g],p[g])))return!1;return!0})(s,e);default:return je(52216,{left:s})}}function Uc(s,e){return(s.values||[]).find((n=>fi(n,e)))!==void 0}function Jo(s,e){if(s===e)return 0;const n=qr(s),r=qr(e);if(n!==r)return Je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Je(s.booleanValue,e.booleanValue);case 2:return(function(c,d){const p=zt(c.integerValue||c.doubleValue),g=zt(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return Hb(s.timestampValue,e.timestampValue);case 4:return Hb(Lc(s),Lc(e));case 5:return Pp(s.stringValue,e.stringValue);case 6:return(function(c,d){const p=Br(c),g=Br(d);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(c,d){const p=c.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const x=Je(p[y],g[y]);if(x!==0)return x}return Je(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,d){const p=Je(zt(c.latitude),zt(d.latitude));return p!==0?p:Je(zt(c.longitude),zt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Fb(s.arrayValue,e.arrayValue);case 10:return(function(c,d){var T,D,q,X;const p=c.fields||{},g=d.fields||{},y=(T=p[id])==null?void 0:T.arrayValue,x=(D=g[id])==null?void 0:D.arrayValue,w=Je(((q=y==null?void 0:y.values)==null?void 0:q.length)||0,((X=x==null?void 0:x.values)==null?void 0:X.length)||0);return w!==0?w:Fb(y,x)})(s.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Rh.mapValue&&d===Rh.mapValue)return 0;if(c===Rh.mapValue)return 1;if(d===Rh.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=d.fields||{},x=Object.keys(y);g.sort(),x.sort();for(let w=0;w<g.length&&w<x.length;++w){const T=Pp(g[w],x[w]);if(T!==0)return T;const D=Jo(p[g[w]],y[x[w]]);if(D!==0)return D}return Je(g.length,x.length)})(s.mapValue,e.mapValue);default:throw je(23264,{he:n})}}function Hb(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Je(s,e);const n=zr(s),r=zr(e),o=Je(n.seconds,r.seconds);return o!==0?o:Je(n.nanos,r.nanos)}function Fb(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=Jo(n[o],r[o]);if(c)return c}return Je(n.length,r.length)}function Zo(s){return Lp(s)}function Lp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=zr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Br(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Ie.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=Lp(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of r)c?c=!1:o+=",",o+=`${d}:${Lp(n.fields[d])}`;return o+"}"})(s.mapValue):je(61005,{value:s})}function zh(s){switch(qr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Id(s);return e?16+zh(e):16;case 5:return 2*s.stringValue.length;case 6:return Br(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+zh(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Qr(r.fields,((c,d)=>{o+=c.length+zh(d)})),o})(s.mapValue);default:throw je(13486,{value:s})}}function Gb(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Up(s){return!!s&&"integerValue"in s}function Rg(s){return!!s&&"arrayValue"in s}function $b(s){return!!s&&"nullValue"in s}function Kb(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Bh(s){return!!s&&"mapValue"in s}function w4(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[Fw])==null?void 0:r.stringValue)===Gw}function Ic(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Qr(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ic(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ic(s.arrayValue.values[n]);return e}return{...s}}function E4(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===x4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ic(n)}setAll(e){let n=on.emptyPath(),r={},o=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=p.popLast()}d?r[p.lastSegment()]=Ic(d):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());Bh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Bh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){Qr(n,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new Bn(Ic(this.value))}}function $w(s){const e=[];return Qr(s.fields,((n,r)=>{const o=new on([n]);if(Bh(r)){const c=$w(r.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new ns(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n,r,o,c,d,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new En(e,0,Pe.min(),Pe.min(),Pe.min(),Bn.empty(),0)}static newFoundDocument(e,n,r,o){return new En(e,1,n,Pe.min(),r,o,0)}static newNoDocument(e,n){return new En(e,2,n,Pe.min(),Pe.min(),Bn.empty(),0)}static newUnknownDocument(e,n){return new En(e,3,n,Pe.min(),Pe.min(),Bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n){this.position=e,this.inclusive=n}}function Qb(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const c=e[o],d=s.position[o];if(c.field.isKeyField()?r=Ie.comparator(Ie.fromName(d.referenceValue),n.key):r=Jo(d,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function Yb(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!fi(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n="asc"){this.field=e,this.dir=n}}function T4(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{}class Wt extends Kw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new A4(e,n,r):n==="array-contains"?new I4(e,r):n==="in"?new C4(e,r):n==="not-in"?new D4(e,r):n==="array-contains-any"?new j4(e,r):new Wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new N4(e,r):new R4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Jo(n,this.value)):n!==null&&qr(this.value)===qr(n)&&this.matchesComparison(Jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zs extends Kw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new zs(e,n)}matches(e){return Qw(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Qw(s){return s.op==="and"}function Yw(s){return S4(s)&&Qw(s)}function S4(s){for(const e of s.filters)if(e instanceof zs)return!1;return!0}function zp(s){if(s instanceof Wt)return s.field.canonicalString()+s.op.toString()+Zo(s.value);if(Yw(s))return s.filters.map((e=>zp(e))).join(",");{const e=s.filters.map((n=>zp(n))).join(",");return`${s.op}(${e})`}}function Xw(s,e){return s instanceof Wt?(function(r,o){return o instanceof Wt&&r.op===o.op&&r.field.isEqual(o.field)&&fi(r.value,o.value)})(s,e):s instanceof zs?(function(r,o){return o instanceof zs&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,d,p)=>c&&Xw(d,o.filters[p])),!0):!1})(s,e):void je(19439)}function Ww(s){return s instanceof Wt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Zo(n.value)}`})(s):s instanceof zs?(function(n){return n.op.toString()+" {"+n.getFilters().map(Ww).join(" ,")+"}"})(s):"Filter"}class A4 extends Wt{constructor(e,n,r){super(e,n,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class N4 extends Wt{constructor(e,n){super(e,"in",n),this.keys=Jw("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class R4 extends Wt{constructor(e,n){super(e,"not-in",n),this.keys=Jw("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Jw(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Ie.fromName(r.referenceValue)))}class I4 extends Wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rg(n)&&Uc(n.arrayValue,this.value)}}class C4 extends Wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uc(this.value.arrayValue,n)}}class D4 extends Wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Uc(this.value.arrayValue,n)}}class j4 extends Wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Uc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,n=null,r=[],o=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function Xb(s,e=null,n=[],r=[],o=null,c=null,d=null){return new k4(s,e,n,r,o,c,d)}function Ig(s){const e=Ue(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>zp(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Rd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Zo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Zo(r))).join(",")),e.Te=n}return e.Te}function Cg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!T4(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Xw(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Yb(s.startAt,e.startAt)&&Yb(s.endAt,e.endAt)}function Bp(s){return Ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n=null,r=[],o=[],c=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function O4(s,e,n,r,o,c,d,p){return new $c(s,e,n,r,o,c,d,p)}function Cd(s){return new $c(s)}function Wb(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Zw(s){return s.collectionGroup!==null}function Cc(s){const e=Ue(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new en(on.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new ad(c,r))})),n.has(on.keyField().canonicalString())||e.Ie.push(new ad(on.keyField(),r))}return e.Ie}function ui(s){const e=Ue(s);return e.Ee||(e.Ee=M4(e,Cc(s))),e.Ee}function M4(s,e){if(s.limitType==="F")return Xb(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new ad(o.field,c)}));const n=s.endAt?new rd(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new rd(s.startAt.position,s.startAt.inclusive):null;return Xb(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function qp(s,e){const n=s.filters.concat([e]);return new $c(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Hp(s,e,n){return new $c(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Dd(s,e){return Cg(ui(s),ui(e))&&s.limitType===e.limitType}function eE(s){return`${Ig(ui(s))}|lt:${s.limitType}`}function Mo(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>Ww(o))).join(", ")}]`),Rd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>Zo(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>Zo(o))).join(",")),`Target(${r})`})(ui(s))}; limitType=${s.limitType})`}function jd(s,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Ie.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,o){for(const c of Cc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(d,p,g){const y=Qb(d,p,g);return d.inclusive?y<=0:y<0})(r.startAt,Cc(r),o)||r.endAt&&!(function(d,p,g){const y=Qb(d,p,g);return d.inclusive?y>=0:y>0})(r.endAt,Cc(r),o))})(s,e)}function V4(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function tE(s){return(e,n)=>{let r=!1;for(const o of Cc(s)){const c=P4(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function P4(s,e,n){const r=s.field.isKeyField()?Ie.comparator(e.key,n.key):(function(c,d,p){const g=d.data.field(c),y=p.data.field(c);return g!==null&&y!==null?Jo(g,y):je(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return je(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Qr(this.inner,((n,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return Lw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=new Dt(Ie.comparator);function Yi(){return L4}const nE=new Dt(Ie.comparator);function wc(...s){let e=nE;for(const n of s)e=e.insert(n.key,n);return e}function sE(s){let e=nE;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Da(){return Dc()}function iE(){return Dc()}function Dc(){return new Ha((s=>s.toString()),((s,e)=>s.isEqual(e)))}const U4=new Dt(Ie.comparator),z4=new en(Ie.comparator);function Ze(...s){let e=z4;for(const n of s)e=e.add(n);return e}const B4=new en(Je);function q4(){return B4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nd(e)?"-0":e}}function rE(s){return{integerValue:""+s}}function H4(s,e){return g4(e)?rE(e):Dg(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(){this._=void 0}}function F4(s,e,n){return s instanceof od?(function(o,c){const d={fields:{[Bw]:{stringValue:zw},[Hw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Ng(c)&&(c=Id(c)),c&&(d.fields[qw]=c),{mapValue:d}})(n,e):s instanceof el?oE(s,e):s instanceof tl?lE(s,e):(function(o,c){const d=aE(o,c),p=Jb(d)+Jb(o.Ae);return Up(d)&&Up(o.Ae)?rE(p):Dg(o.serializer,p)})(s,e)}function G4(s,e,n){return s instanceof el?oE(s,e):s instanceof tl?lE(s,e):n}function aE(s,e){return s instanceof ld?(function(r){return Up(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class od extends kd{}class el extends kd{constructor(e){super(),this.elements=e}}function oE(s,e){const n=cE(e);for(const r of s.elements)n.some((o=>fi(o,r)))||n.push(r);return{arrayValue:{values:n}}}class tl extends kd{constructor(e){super(),this.elements=e}}function lE(s,e){let n=cE(e);for(const r of s.elements)n=n.filter((o=>!fi(o,r)));return{arrayValue:{values:n}}}class ld extends kd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Jb(s){return zt(s.integerValue||s.doubleValue)}function cE(s){return Rg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n){this.field=e,this.transform=n}}function $4(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof el&&o instanceof el||r instanceof tl&&o instanceof tl?Xo(r.elements,o.elements,fi):r instanceof ld&&o instanceof ld?fi(r.Ae,o.Ae):r instanceof od&&o instanceof od})(s.transform,e.transform)}class K4{constructor(e,n){this.version=e,this.transformResults=n}}class Dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Od{}function hE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Md(s.key,Dn.none()):new Kc(s.key,s.data,Dn.none());{const n=s.data,r=Bn.empty();let o=new en(on.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?r.delete(c):r.set(c,d),o=o.add(c)}return new Yr(s.key,r,new ns(o.toArray()),Dn.none())}}function Q4(s,e,n){s instanceof Kc?(function(o,c,d){const p=o.value.clone(),g=ex(o.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):s instanceof Yr?(function(o,c,d){if(!qh(o.precondition,c))return void c.convertToUnknownDocument(d.version);const p=ex(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(dE(o)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function jc(s,e,n,r){return s instanceof Kc?(function(c,d,p,g){if(!qh(c.precondition,d))return p;const y=c.value.clone(),x=tx(c.fieldTransforms,g,d);return y.setAll(x),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,n,r):s instanceof Yr?(function(c,d,p,g){if(!qh(c.precondition,d))return p;const y=tx(c.fieldTransforms,g,d),x=d.data;return x.setAll(dE(c)),x.setAll(y),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(s,e,n,r):(function(c,d,p){return qh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,n)}function Y4(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),c=aE(r.transform,o||null);c!=null&&(n===null&&(n=Bn.empty()),n.set(r.field,c))}return n||null}function Zb(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Xo(r,o,((c,d)=>$4(c,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Kc extends Od{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Yr extends Od{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function dE(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function ex(s,e,n){const r=new Map;lt(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const c=s[o],d=c.transform,p=e.data.field(c.field);r.set(c.field,G4(d,p,n[o]))}return r}function tx(s,e,n){const r=new Map;for(const o of s){const c=o.transform,d=n.data.field(o.field);r.set(o.field,F4(c,d,e))}return r}class Md extends Od{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X4 extends Od{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&Q4(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=jc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=jc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=iE();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(o.key)?null:p;const g=hE(d,p);g!==null&&r.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Pe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,((n,r)=>Zb(n,r)))&&Xo(this.baseMutations,e.baseMutations,((n,r)=>Zb(n,r)))}}class jg{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){lt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return U4})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,r[d].version);return new jg(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,tt;function eD(s){switch(s){case Z.OK:return je(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return je(15467,{code:s})}}function fE(s){if(s===void 0)return Qi("GRPC error has no .code"),Z.UNKNOWN;switch(s){case Yt.OK:return Z.OK;case Yt.CANCELLED:return Z.CANCELLED;case Yt.UNKNOWN:return Z.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return Z.INTERNAL;case Yt.UNAVAILABLE:return Z.UNAVAILABLE;case Yt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Yt.NOT_FOUND:return Z.NOT_FOUND;case Yt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Yt.ABORTED:return Z.ABORTED;case Yt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Yt.DATA_LOSS:return Z.DATA_LOSS;default:return je(39323,{code:s})}}(tt=Yt||(Yt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=new Or([4294967295,4294967295],0);function nx(s){const e=tD().encode(s),n=new Sw;return n.update(e),new Uint8Array(n.digest())}function sx(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Or([n,r],0),new Or([o,c],0)]}class kg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ec(`Invalid padding: ${n}`);if(r<0)throw new Ec(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ec(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ec(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Or.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(Or.fromNumber(r)));return o.compare(nD)===1&&(o=new Or([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=nx(e),[r,o]=sx(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,o,c);if(!this.we(d))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new kg(c,o,n);return r.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=nx(e),[r,o]=sx(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,o,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Qc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vd(Pe.min(),o,new Dt(Je),Yi(),Ze())}}class Qc{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Qc(r,n,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class mE{constructor(e,n){this.targetId=e,this.Ce=n}}class pE{constructor(e,n,r=ln.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class ix{constructor(){this.ve=0,this.Fe=rx(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),n=Ze(),r=Ze();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:je(38017,{changeType:c})}})),new Qc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=rx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class sD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yi(),this.Je=Ih(),this.He=Ih(),this.Ye=new Dt(Je)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:je(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(Bp(c))if(r===0){const d=new Ie(c.path);this.et(n,d,En.newNoDocument(d,Pe.min()))}else lt(r===1,20013,{expectedCount:r});else{const d=this._t(n);if(d!==r){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let d,p;try{d=Br(r).toUint8Array()}catch(g){if(g instanceof Uw)return Pa("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new kg(d,o,c)}catch(g){return Pa(g instanceof Ec?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&Bp(p.target)){const g=new Ie(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,En.newNoDocument(g,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let r=Ze();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new Vd(e,n,this.Ye,this.je,r);return this.je=Yi(),this.Je=Ih(),this.He=Ih(),this.Ye=new Dt(Je),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ix,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new en(Je),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new en(Je),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ix),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ih(){return new Dt(Ie.comparator)}function rx(){return new Dt(Ie.comparator)}const iD={asc:"ASCENDING",desc:"DESCENDING"},rD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aD={and:"AND",or:"OR"};class oD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fp(s,e){return s.useProto3Json||Rd(e)?e:{value:e}}function cd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function lD(s,e){return cd(s,e.toTimestamp())}function hi(s){return lt(!!s,49232),Pe.fromTimestamp((function(n){const r=zr(n);return new xt(r.seconds,r.nanos)})(s))}function Og(s,e){return Gp(s,e).canonicalString()}function Gp(s,e){const n=(function(o){return new bt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function yE(s){const e=bt.fromString(s);return lt(wE(e),10190,{key:e.toString()}),e}function $p(s,e){return Og(s.databaseId,e.path)}function lp(s,e){const n=yE(e);if(n.get(1)!==s.databaseId.projectId)throw new pe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new pe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Ie(_E(n))}function vE(s,e){return Og(s.databaseId,e)}function cD(s){const e=yE(s);return e.length===4?bt.emptyPath():_E(e)}function Kp(s){return new bt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function _E(s){return lt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function ax(s,e,n){return{name:$p(s,e),fields:n.value.mapValue.fields}}function uD(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:je(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,x){return y.useProto3Json?(lt(x===void 0||typeof x=="string",58123),ln.fromBase64String(x||"")):(lt(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),ln.fromUint8Array(x||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const x=y.code===void 0?Z.UNKNOWN:fE(y.code);return new pe(x,y.message||"")})(d);n=new pE(r,o,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=lp(s,r.document.name),c=hi(r.document.updateTime),d=r.document.createTime?hi(r.document.createTime):Pe.min(),p=new Bn({mapValue:{fields:r.document.fields}}),g=En.newFoundDocument(o,c,d,p),y=r.targetIds||[],x=r.removedTargetIds||[];n=new Hh(y,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=lp(s,r.document),c=r.readTime?hi(r.readTime):Pe.min(),d=En.newNoDocument(o,c),p=r.removedTargetIds||[];n=new Hh([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=lp(s,r.document),c=r.removedTargetIds||[];n=new Hh([],c,o,null)}else{if(!("filter"in e))return je(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,d=new Z4(o,c),p=r.targetId;n=new mE(p,d)}}return n}function hD(s,e){let n;if(e instanceof Kc)n={update:ax(s,e.key,e.value)};else if(e instanceof Md)n={delete:$p(s,e.key)};else if(e instanceof Yr)n={update:ax(s,e.key,e.data),updateMask:bD(e.fieldMask)};else{if(!(e instanceof X4))return je(16599,{Vt:e.type});n={verify:$p(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,d){const p=d.transform;if(p instanceof od)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof el)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof tl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof ld)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw je(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:lD(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:je(27497)})(s,e.precondition)),n}function dD(s,e){return s&&s.length>0?(lt(e!==void 0,14353),s.map((n=>(function(o,c){let d=o.updateTime?hi(o.updateTime):hi(c);return d.isEqual(Pe.min())&&(d=hi(c)),new K4(d,o.transformResults||[])})(n,e)))):[]}function fD(s,e){return{documents:[vE(s,e.path)]}}function mD(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vE(s,o);const c=(function(y){if(y.length!==0)return xE(zs.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((x=>(function(T){return{field:Vo(T.field),direction:yD(T.dir)}})(x)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Fp(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function pD(s){let e=cD(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){lt(r===1,65062);const x=n.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let c=[];n.where&&(c=(function(w){const T=bE(w);return T instanceof zs&&Yw(T)?T.getFilters():[T]})(n.where));let d=[];n.orderBy&&(d=(function(w){return w.map((T=>(function(q){return new ad(Po(q.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(T)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let T;return T=typeof w=="object"?w.value:w,Rd(T)?null:T})(n.limit));let g=null;n.startAt&&(g=(function(w){const T=!!w.before,D=w.values||[];return new rd(D,T)})(n.startAt));let y=null;return n.endAt&&(y=(function(w){const T=!w.before,D=w.values||[];return new rd(D,T)})(n.endAt)),O4(e,o,d,c,p,"F",g,y)}function gD(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bE(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Po(n.unaryFilter.field);return Wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Po(n.unaryFilter.field);return Wt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Po(n.unaryFilter.field);return Wt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Po(n.unaryFilter.field);return Wt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Wt.create(Po(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return zs.create(n.compositeFilter.filters.map((r=>bE(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return je(1026)}})(n.compositeFilter.op))})(s):je(30097,{filter:s})}function yD(s){return iD[s]}function vD(s){return rD[s]}function _D(s){return aD[s]}function Vo(s){return{fieldPath:s.canonicalString()}}function Po(s){return on.fromServerFormat(s.fieldPath)}function xE(s){return s instanceof Wt?(function(n){if(n.op==="=="){if(Kb(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NAN"}};if($b(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kb(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NAN"}};if($b(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(n.field),op:vD(n.op),value:n.value}}})(s):s instanceof zs?(function(n){const r=n.getFilters().map((o=>xE(o)));return r.length===1?r[0]:{compositeFilter:{op:_D(n.op),filters:r}}})(s):je(54877,{filter:s})}function bD(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function wE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n,r,o,c=Pe.min(),d=Pe.min(),p=ln.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.yt=e}}function wD(s){const e=pD({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Hp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(){this.Cn=new TD}addToCollectionParentIndex(e,n){return this.Cn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(Ur.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(Ur.min())}updateCollectionGroup(e,n,r){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class TD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new en(bt.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new en(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},EE=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(EE,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new nl(0)}static cr(){return new nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="LruGarbageCollector",SD=1048576;function cx([s,e],[n,r]){const o=Je(s,n);return o===0?Je(e,r):o}class AD{constructor(e){this.Ir=e,this.buffer=new en(cx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();cx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ND{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(lx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ll(n)?ve(lx,"Ignoring IndexedDB error during garbage collection: ",n):await ol(n)}await this.Vr(3e5)}))}}class RD{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(Nd.ce);const r=new AD(n);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(ox)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ox):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,c,d,p,g,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,d=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(r=w,p=Date.now(),this.removeTargets(e,r,n)))).next((w=>(c=w,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(y=Date.now(),Oo()<=We.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-x}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-x}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:w}))))}}function ID(s,e){return new RD(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.changes=new Ha((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ne.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&jc(r.mutation,o,ns.empty(),xt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ze()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ze()){const o=Da();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((c=>{let d=wc();return c.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const r=Da();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ze())))}populateOverlays(e,n,r){const o=[];return r.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,r,o){let c=Yi();const d=Dc(),p=(function(){return Dc()})();return n.forEach(((g,y)=>{const x=r.get(y.key);o.has(y.key)&&(x===void 0||x.mutation instanceof Yr)?c=c.insert(y.key,y):x!==void 0?(d.set(y.key,x.mutation.getFieldMask()),jc(x.mutation,y,x.mutation.getFieldMask(),xt.now())):d.set(y.key,ns.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,x)=>d.set(y,x))),n.forEach(((y,x)=>p.set(y,new DD(x,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=Dc();let o=new Dt(((d,p)=>d-p)),c=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let x=r.get(g)||ns.empty();x=p.applyToLocalView(y,x),r.set(g,x);const w=(o.get(p.batchId)||Ze()).add(g);o=o.insert(p.batchId,w)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,x=g.value,w=iE();x.forEach((T=>{if(!c.has(T)){const D=hE(n.get(T),r.get(T));D!==null&&w.set(T,D),c=c.add(T)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,w))}return ne.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(d){return Ie.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Zw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):ne.resolve(Da());let p=Pc,g=c;return d.next((y=>ne.forEach(y,((x,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),c.get(x)?ne.resolve():this.remoteDocumentCache.getEntry(e,x).next((T=>{g=g.insert(x,T)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Ze()))).next((x=>({batchId:p,changes:sE(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next((r=>{let o=wc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let d=wc();return this.indexManager.getCollectionParents(e,c).next((p=>ne.forEach(p,(g=>{const y=(function(w,T){return new $c(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((x=>{x.forEach(((w,T)=>{d=d.insert(w,T)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o)))).next((d=>{c.forEach(((g,y)=>{const x=y.getKey();d.get(x)===null&&(d=d.insert(x,En.newInvalidDocument(x)))}));let p=wc();return d.forEach(((g,y)=>{const x=c.get(g);x!==void 0&&jc(x.mutation,y,ns.empty(),xt.now()),jd(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ne.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:hi(o.createTime)}})(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:wD(o.bundledQuery),readTime:hi(o.readTime)}})(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.overlays=new Dt(Ie.comparator),this.qr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Da();return ne.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,c)=>{this.St(e,n,c)})),ne.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),ne.resolve()}getOverlaysForCollection(e,n,r){const o=Da(),c=n.length+1,d=new Ie(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new Dt(((y,x)=>y-x));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let x=c.get(y.largestBatchId);x===null&&(x=Da(),c=c.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const p=Da(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,x)=>p.set(y,x))),!(p.size()>=o)););return ne.resolve(p)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new J4(n,r));let c=this.qr.get(n);c===void 0&&(c=Ze(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(){this.Qr=new en(an.$r),this.Ur=new en(an.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new an(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new an(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Ie(new bt([])),r=new an(n,e),o=new an(n,e+1),c=[];return this.Ur.forEachInRange([r,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ie(new bt([])),r=new an(n,e),o=new an(n,e+1);let c=Ze();return this.Ur.forEachInRange([r,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new an(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class an{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ie.comparator(e.key,n.key)||Je(e.Yr,n.Yr)}static Kr(e,n){return Je(e.Yr,n.Yr)||Ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new en(an.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new W4(c,n,r,o);this.mutationQueue.push(d);for(const p of o)this.Zr=this.Zr.add(new an(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ne.resolve(d)}lookupMutationBatch(e,n){return ne.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),c=o<0?0:o;return ne.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Ag:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new an(n,0),o=new an(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(d=>{const p=this.Xr(d.Yr);c.push(p)})),ne.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new en(Je);return n.forEach((o=>{const c=new an(o,0),d=new an(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{r=r.add(p.Yr)}))})),ne.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;Ie.isDocumentKey(c)||(c=c.child(""));const d=new an(new Ie(c),0);let p=new en(Je);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Yr)),!0)}),d),ne.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){lt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ne.forEach(n.mutations,(o=>{const c=new an(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new an(n,0),o=this.Zr.firstAfterOrEqual(r);return ne.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.ri=e,this.docs=(function(){return new Dt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ne.resolve(r?r.document.mutableCopy():En.newInvalidDocument(n))}getEntries(e,n){let r=Yi();return n.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():En.newInvalidDocument(o))})),ne.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=Yi();const d=n.path,p=new Ie(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:x}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||d4(h4(x),r)<=0||(o.has(x.key)||jd(n,x))&&(c=c.insert(x.key,x.mutableCopy()))}return ne.resolve(c)}getAllFromCollectionGroup(e,n,r,o){je(9500)}ii(e,n){return ne.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new LD(this)}getSize(e){return ne.resolve(this.size)}}class LD extends CD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),ne.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.persistence=e,this.si=new Ha((n=>Ig(n)),Cg),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Mg,this.targetCount=0,this.ai=nl.ur()}forEachTarget(e,n){return this.si.forEach(((r,o)=>n(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ne.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new nl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.Pr(n),ne.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ne.waitFor(c).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ne.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ne.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),ne.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ne.resolve(r)}containsKey(e,n){return ne.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Nd(0),this.li=!1,this.li=!0,this.hi=new MD,this.referenceDelegate=e(this),this.Pi=new UD(this),this.indexManager=new ED,this.remoteDocumentCache=(function(o){return new PD(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new xD(n),this.Ii=new kD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new VD(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ve("MemoryPersistence","Starting transaction:",e);const o=new zD(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return ne.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class zD extends m4{constructor(e){super(),this.currentSequenceNumber=e}}class Vg{constructor(e){this.persistence=e,this.Ri=new Mg,this.Vi=null}static mi(e){return new Vg(e)}get fi(){if(this.Vi)return this.Vi;throw je(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ne.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(r=>{const o=Ie.fromPath(r);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Pe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ne.or([()=>ne.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ud{constructor(e,n){this.persistence=e,this.pi=new Ha((r=>y4(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=ID(this,n)}static mi(e,n){return new ud(e,n)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return ne.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?ne.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((p=>{p||(r++,c.removeEntry(d,Pe.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zh(e.data.value)),n}br(e,n,r){return ne.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ne.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=Ze(),o=Ze();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Pg(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return KA()?8:p4(Sn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,o,r).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new BD;return this.Ss(e,n,d).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,d,p.size)}))})).next((()=>c.result))}bs(e,n,r,o){return r.documentReadCount<this.fs?(Oo()<=We.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(Oo()<=We.DEBUG&&ve("QueryEngine","Query:",Mo(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Oo()<=We.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(n))):ne.resolve())}ys(e,n){if(Wb(n))return ne.resolve(null);let r=ui(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Hp(n,null,"F"),r=ui(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const d=Ze(...c);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,r).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,d,g.readTime)?this.ys(e,Hp(n,null,"F")):this.vs(e,y,n,g)}))))})))))}ws(e,n,r,o){return Wb(n)||o.isEqual(Pe.min())?ne.resolve(null):this.ps.getDocuments(e,r).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,r,o)?ne.resolve(null):(Oo()<=We.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Mo(n)),this.vs(e,d,n,u4(o,Pc)).next((p=>p)))}))}Ds(e,n){let r=new en(tE(e));return n.forEach(((o,c)=>{jd(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,r){return Oo()<=We.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Mo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ur.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="LocalStore",HD=3e8;class FD{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Dt(Je),this.xs=new Ha((c=>Ig(c)),Cg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function GD(s,e,n,r){return new FD(s,e,n,r)}async function SE(s,e){const n=Ue(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const d=[],p=[];let g=Ze();for(const y of o){d.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}for(const y of c){p.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}return n.localDocuments.getDocuments(r,g).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function $D(s,e){const n=Ue(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,x){const w=y.batch,T=w.keys();let D=ne.resolve();return T.forEach((q=>{D=D.next((()=>x.getEntry(g,q))).next((X=>{const U=y.docVersions.get(q);lt(U!==null,48541),X.version.compareTo(U)<0&&(w.applyToRemoteDocument(X,y),X.isValidDocument()&&(X.setReadTime(y.commitVersion),x.addEntry(X)))}))})),D.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let g=Ze();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function AE(s){const e=Ue(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function KD(s,e){const n=Ue(s),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((x,w)=>{const T=o.get(w);if(!T)return;p.push(n.Pi.removeMatchingKeys(c,x.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(c,x.addedDocuments,w))));let D=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?D=D.withResumeToken(ln.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):x.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(x.resumeToken,r)),o=o.insert(w,D),(function(X,U,oe){return X.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=HD?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0})(T,D,x)&&p.push(n.Pi.updateTargetData(c,D))}));let g=Yi(),y=Ze();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,x))})),p.push(QD(c,d,e.documentUpdates).next((x=>{g=x.ks,y=x.qs}))),!r.isEqual(Pe.min())){const x=n.Pi.getLastRemoteSnapshotVersion(c).next((w=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(x)}return ne.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=o,c)))}function QD(s,e,n){let r=Ze(),o=Ze();return n.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let d=Yi();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Pe.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):ve(Lg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function YD(s,e){const n=Ue(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ag),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function XD(s,e){const n=Ue(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,e).next((c=>c?(o=c,ne.resolve(o)):n.Pi.allocateTargetId(r).next((d=>(o=new Cr(e,d,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Qp(s,e,n){const r=Ue(s),o=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!ll(d))throw d;ve(Lg,`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function ux(s,e,n){const r=Ue(s);let o=Pe.min(),c=Ze();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,x){const w=Ue(g),T=w.xs.get(x);return T!==void 0?ne.resolve(w.Ms.get(T)):w.Pi.getTargetData(y,x)})(r,d,ui(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(d,p.targetId).next((g=>{c=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(d,e,n?o:Pe.min(),n?c:Ze()))).next((p=>(WD(r,V4(e),p),{documents:p,Qs:c})))))}function WD(s,e,n){let r=s.Os.get(e)||Pe.min();n.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Os.set(e,r)}class hx{constructor(){this.activeTargetIds=q4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JD{constructor(){this.Mo=new hx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="ConnectivityMonitor";class fx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(dx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(dx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch=null;function Yp(){return Ch===null?Ch=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ch++,"0x"+Ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="RestConnection",ej={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===sd?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,c){const d=Yp(),p=this.zo(e,n.toUriEncodedString());ve(cp,`Sending RPC '${e}' ${d}:`,p,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:y}=new URL(p),x=Gr(y);return this.Jo(e,p,g,r,x).then((w=>(ve(cp,`Received RPC '${e}' ${d}: `,w),w)),(w=>{throw Pa(cp,`RPC '${e}' ${d} failed with error: `,w,"url: ",p,"request:",r),w}))}Ho(e,n,r,o,c,d){return this.Go(e,n,r,o,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+al})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const r=ej[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class sj extends tj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,c){const d=Yp();return new Promise(((p,g)=>{const y=new Aw;y.setWithCredentials(!0),y.listenOnce(Nw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Uh.NO_ERROR:const w=y.getResponseJson();ve(_n,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),p(w);break;case Uh.TIMEOUT:ve(_n,`RPC '${e}' ${d} timed out`),g(new pe(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Uh.HTTP_ERROR:const T=y.getStatus();if(ve(_n,`RPC '${e}' ${d} failed with status:`,T,"response text:",y.getResponseText()),T>0){let D=y.getResponseJson();Array.isArray(D)&&(D=D[0]);const q=D==null?void 0:D.error;if(q&&q.status&&q.message){const X=(function(oe){const ae=oe.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(ae)>=0?ae:Z.UNKNOWN})(q.status);g(new pe(X,q.message))}else g(new pe(Z.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new pe(Z.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ve(_n,`RPC '${e}' ${d} completed.`)}}));const x=JSON.stringify(o);ve(_n,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",x,r,15)}))}T_(e,n,r){const o=Yp(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Cw(),p=Iw(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const x=c.join("");ve(_n,`Creating RPC '${e}' stream ${o}: ${x}`,g);const w=d.createWebChannel(x,g);this.I_(w);let T=!1,D=!1;const q=new nj({Yo:U=>{D?ve(_n,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(T||(ve(_n,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),ve(_n,`RPC '${e}' stream ${o} sending:`,U),w.send(U))},Zo:()=>w.close()}),X=(U,oe,ae)=>{U.listen(oe,(de=>{try{ae(de)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return X(w,xc.EventType.OPEN,(()=>{D||(ve(_n,`RPC '${e}' stream ${o} transport opened.`),q.o_())})),X(w,xc.EventType.CLOSE,(()=>{D||(D=!0,ve(_n,`RPC '${e}' stream ${o} transport closed`),q.a_(),this.E_(w))})),X(w,xc.EventType.ERROR,(U=>{D||(D=!0,Pa(_n,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),q.a_(new pe(Z.UNAVAILABLE,"The operation could not be completed")))})),X(w,xc.EventType.MESSAGE,(U=>{var oe;if(!D){const ae=U.data[0];lt(!!ae,16349);const de=ae,fe=(de==null?void 0:de.error)||((oe=de[0])==null?void 0:oe.error);if(fe){ve(_n,`RPC '${e}' stream ${o} received error:`,fe);const Oe=fe.status;let ge=(function(A){const C=Yt[A];if(C!==void 0)return fE(C)})(Oe),k=fe.message;ge===void 0&&(ge=Z.INTERNAL,k="Unknown error status: "+Oe+" with message "+fe.message),D=!0,q.a_(new pe(ge,k)),w.close()}else ve(_n,`RPC '${e}' stream ${o} received:`,ae),q.u_(ae)}})),X(p,Rw.STAT_EVENT,(U=>{U.stat===Vp.PROXY?ve(_n,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Vp.NOPROXY&&ve(_n,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function up(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(s){return new oD(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="PersistentStream";class RE{constructor(e,n,r,o,c,d,p,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new NE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Qi(n.toString()),Qi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new pe(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(mx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ve(mx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ij extends RE{constructor(e,n,r,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=uD(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Pe.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Pe.min():d.readTime?hi(d.readTime):Pe.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Kp(this.serializer),n.addTarget=(function(c,d){let p;const g=d.target;if(p=Bp(g)?{documents:fD(c,g)}:{query:mD(c,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=gE(c,d.resumeToken);const y=Fp(c,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(Pe.min())>0){p.readTime=cd(c,d.snapshotVersion.toTimestamp());const y=Fp(c,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const r=gD(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Kp(this.serializer),n.removeTarget=e,this.q_(n)}}class rj extends RE{constructor(e,n,r,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=dD(e.writeResults,e.commitTime),r=hi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Kp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>hD(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{}class oj extends aj{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Gp(n,r),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(Z.UNKNOWN,c.toString())}))}Ho(e,n,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,Gp(n,r),o,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new pe(Z.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class lj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qi(n),this.aa=!1):ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="RemoteStore";class cj{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{r.enqueueAndForget((async()=>{Fa(this)&&(ve(La,"Restarting streams for network reachability change."),await(async function(g){const y=Ue(g);y.Ea.add(4),await Yc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Ld(y)})(this))}))})),this.Ra=new lj(r,o)}}async function Ld(s){if(Fa(s))for(const e of s.da)await e(!0)}async function Yc(s){for(const e of s.da)await e(!1)}function IE(s,e){const n=Ue(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),qg(n)?Bg(n):cl(n).O_()&&zg(n,e))}function Ug(s,e){const n=Ue(s),r=cl(n);n.Ia.delete(e),r.O_()&&CE(n,e),n.Ia.size===0&&(r.O_()?r.L_():Fa(n)&&n.Ra.set("Unknown"))}function zg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}cl(s).Y_(e)}function CE(s,e){s.Va.Ue(e),cl(s).Z_(e)}function Bg(s){s.Va=new sD({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),cl(s).start(),s.Ra.ua()}function qg(s){return Fa(s)&&!cl(s).x_()&&s.Ia.size>0}function Fa(s){return Ue(s).Ea.size===0}function DE(s){s.Va=void 0}async function uj(s){s.Ra.set("Online")}async function hj(s){s.Ia.forEach(((e,n)=>{zg(s,e)}))}async function dj(s,e){DE(s),qg(s)?(s.Ra.ha(e),Bg(s)):s.Ra.set("Unknown")}async function fj(s,e,n){if(s.Ra.set("Online"),e instanceof pE&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.Va.removeTarget(p))})(s,e)}catch(r){ve(La,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hd(s,r)}else if(e instanceof Hh?s.Va.Ze(e):e instanceof mE?s.Va.st(e):s.Va.tt(e),!n.isEqual(Pe.min()))try{const r=await AE(s.localStore);n.compareTo(r)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const x=c.Ia.get(y);x&&c.Ia.set(y,x.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const x=c.Ia.get(g);if(!x)return;c.Ia.set(g,x.withResumeToken(ln.EMPTY_BYTE_STRING,x.snapshotVersion)),CE(c,g);const w=new Cr(x.target,g,y,x.sequenceNumber);zg(c,w)})),c.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(r){ve(La,"Failed to raise snapshot:",r),await hd(s,r)}}async function hd(s,e,n){if(!ll(e))throw e;s.Ea.add(1),await Yc(s),s.Ra.set("Offline"),n||(n=()=>AE(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ve(La,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Ld(s)}))}function jE(s,e){return e().catch((n=>hd(s,n,e)))}async function Ud(s){const e=Ue(s),n=Hr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ag;for(;mj(e);)try{const o=await YD(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,pj(e,o)}catch(o){await hd(e,o)}kE(e)&&OE(e)}function mj(s){return Fa(s)&&s.Ta.length<10}function pj(s,e){s.Ta.push(e);const n=Hr(s);n.O_()&&n.X_&&n.ea(e.mutations)}function kE(s){return Fa(s)&&!Hr(s).x_()&&s.Ta.length>0}function OE(s){Hr(s).start()}async function gj(s){Hr(s).ra()}async function yj(s){const e=Hr(s);for(const n of s.Ta)e.ea(n.mutations)}async function vj(s,e,n){const r=s.Ta.shift(),o=jg.from(r,e,n);await jE(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Ud(s)}async function _j(s,e){e&&Hr(s).X_&&await(async function(r,o){if((function(d){return eD(d)&&d!==Z.ABORTED})(o.code)){const c=r.Ta.shift();Hr(r).B_(),await jE(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Ud(r)}})(s,e),kE(s)&&OE(s)}async function px(s,e){const n=Ue(s);n.asyncQueue.verifyOperationInProgress(),ve(La,"RemoteStore received new credentials");const r=Fa(n);n.Ea.add(3),await Yc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ld(n)}async function bj(s,e){const n=Ue(s);e?(n.Ea.delete(2),await Ld(n)):e||(n.Ea.add(2),await Yc(n),n.Ra.set("Unknown"))}function cl(s){return s.ma||(s.ma=(function(n,r,o){const c=Ue(n);return c.sa(),new ij(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:uj.bind(null,s),t_:hj.bind(null,s),r_:dj.bind(null,s),H_:fj.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),qg(s)?Bg(s):s.Ra.set("Unknown")):(await s.ma.stop(),DE(s))}))),s.ma}function Hr(s){return s.fa||(s.fa=(function(n,r,o){const c=Ue(n);return c.sa(),new rj(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:gj.bind(null,s),r_:_j.bind(null,s),ta:yj.bind(null,s),na:vj.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Ud(s)):(await s.fa.stop(),s.Ta.length>0&&(ve(La,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new Fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const d=Date.now()+r,p=new Hg(e,n,d,o,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fg(s,e){if(Qi("AsyncQueue",`${e}: ${s}`),ll(s))return new pe(Z.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{static emptySet(e){return new $o(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ie.comparator(n.key,r.key):(n,r)=>Ie.comparator(n.key,r.key),this.keyedMap=wc(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $o)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $o;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.ga=new Dt(Ie.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):je(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class sl{constructor(e,n,r,o,c,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new sl(e,n,$o.emptySet(n),d,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class wj{constructor(){this.queries=yx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Ue(n),c=o.queries;o.queries=yx(),c.forEach(((d,p)=>{for(const g of p.Sa)g.onError(r)}))})(this,new pe(Z.ABORTED,"Firestore shutting down"))}}function yx(){return new Ha((s=>eE(s)),Dd)}async function Gg(s,e){const n=Ue(s);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new xj,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const p=Fg(d,`Initialization of query '${Mo(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Kg(n)}async function $g(s,e){const n=Ue(s),r=e.query;let o=3;const c=n.queries.get(r);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ej(s,e){const n=Ue(s);let r=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const p of d.Sa)p.Fa(o)&&(r=!0);d.wa=o}}r&&Kg(n)}function Tj(s,e,n){const r=Ue(s),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);r.queries.delete(e)}function Kg(s){s.Ca.forEach((e=>{e.next()}))}var Xp,vx;(vx=Xp||(Xp={})).Ma="default",vx.Cache="cache";class Qg{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new sl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.key=e}}class VE{constructor(e){this.key=e}}class Sj{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=tE(e),this.tu=new $o(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new gx,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,w)=>{const T=o.get(x),D=jd(this.query,w)?w:null,q=!!T&&this.mutatedKeys.has(T.key),X=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let U=!1;T&&D?T.data.isEqual(D.data)?q!==X&&(r.track({type:3,doc:D}),U=!0):this.su(T,D)||(r.track({type:2,doc:D}),U=!0,(g&&this.eu(D,g)>0||y&&this.eu(D,y)<0)&&(p=!0)):!T&&D?(r.track({type:0,doc:D}),U=!0):T&&!D&&(r.track({type:1,doc:T}),U=!0,(g||y)&&(p=!0)),U&&(D?(d=d.add(D),c=X?c.add(x):c.delete(x)):(d=d.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),c=c.delete(x.key),r.track({type:1,doc:x})}return{tu:d,iu:r,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((x,w)=>(function(D,q){const X=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Rt:U})}};return X(D)-X(q)})(x.type,w.type)||this.eu(x.doc,w.doc))),this.ou(r),o=o??!1;const p=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,d.length!==0||y?{snapshot:new sl(this.query,e.tu,c,d,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new VE(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new ME(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Yg="SyncEngine";class Aj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Nj{constructor(e){this.key=e,this.hu=!1}}class Rj{constructor(e,n,r,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ha((p=>eE(p)),Dd),this.Iu=new Map,this.Eu=new Set,this.du=new Dt(Ie.comparator),this.Au=new Map,this.Ru=new Mg,this.Vu={},this.mu=new Map,this.fu=nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ij(s,e,n=!0){const r=qE(s);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await PE(r,e,n,!0),o}async function Cj(s,e){const n=qE(s);await PE(n,e,!0,!1)}async function PE(s,e,n,r){const o=await XD(s.localStore,ui(e)),c=o.targetId,d=s.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await Dj(s,e,c,d==="current",o.resumeToken)),s.isPrimaryClient&&n&&IE(s.remoteStore,o),p}async function Dj(s,e,n,r,o){s.pu=(w,T,D)=>(async function(X,U,oe,ae){let de=U.view.ru(oe);de.Cs&&(de=await ux(X.localStore,U.query,!1).then((({documents:k})=>U.view.ru(k,de))));const fe=ae&&ae.targetChanges.get(U.targetId),Oe=ae&&ae.targetMismatches.get(U.targetId)!=null,ge=U.view.applyChanges(de,X.isPrimaryClient,fe,Oe);return bx(X,U.targetId,ge.au),ge.snapshot})(s,w,T,D);const c=await ux(s.localStore,e,!0),d=new Sj(e,c.Qs),p=d.ru(c.documents),g=Qc.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),y=d.applyChanges(p,s.isPrimaryClient,g);bx(s,n,y.au);const x=new Aj(e,n,d);return s.Tu.set(e,x),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function jj(s,e,n){const r=Ue(s),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((d=>!Dd(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Qp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Ug(r.remoteStore,o.targetId),Wp(r,o.targetId)})).catch(ol)):(Wp(r,o.targetId),await Qp(r.localStore,o.targetId,!0))}async function kj(s,e){const n=Ue(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ug(n.remoteStore,r.targetId))}async function Oj(s,e,n){const r=Bj(s);try{const o=await(function(d,p){const g=Ue(d),y=xt.now(),x=p.reduce(((D,q)=>D.add(q.key)),Ze());let w,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let q=Yi(),X=Ze();return g.Ns.getEntries(D,x).next((U=>{q=U,q.forEach(((oe,ae)=>{ae.isValidDocument()||(X=X.add(oe))}))})).next((()=>g.localDocuments.getOverlayedDocuments(D,q))).next((U=>{w=U;const oe=[];for(const ae of p){const de=Y4(ae,w.get(ae.key).overlayedDocument);de!=null&&oe.push(new Yr(ae.key,de,$w(de.value.mapValue),Dn.exists(!0)))}return g.mutationQueue.addMutationBatch(D,y,oe,p)})).next((U=>{T=U;const oe=U.applyToLocalDocumentSet(w,X);return g.documentOverlayCache.saveOverlays(D,U.batchId,oe)}))})).then((()=>({batchId:T.batchId,changes:sE(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let y=d.Vu[d.currentUser.toKey()];y||(y=new Dt(Je)),y=y.insert(p,g),d.Vu[d.currentUser.toKey()]=y})(r,o.batchId,n),await Xc(r,o.changes),await Ud(r.remoteStore)}catch(o){const c=Fg(o,"Failed to persist write");n.reject(c)}}async function LE(s,e){const n=Ue(s);try{const r=await KD(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Au.get(c);d&&(lt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?lt(d.hu,14607):o.removedDocuments.size>0&&(lt(d.hu,42227),d.hu=!1))})),await Xc(n,r,e)}catch(r){await ol(r)}}function _x(s,e,n){const r=Ue(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((c,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=Ue(d);g.onlineState=p;let y=!1;g.queries.forEach(((x,w)=>{for(const T of w.Sa)T.va(p)&&(y=!0)})),y&&Kg(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Mj(s,e,n){const r=Ue(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),c=o&&o.key;if(c){let d=new Dt(Ie.comparator);d=d.insert(c,En.newNoDocument(c,Pe.min()));const p=Ze().add(c),g=new Vd(Pe.min(),new Map,new Dt(Je),d,p);await LE(r,g),r.du=r.du.remove(c),r.Au.delete(e),Xg(r)}else await Qp(r.localStore,e,!1).then((()=>Wp(r,e,n))).catch(ol)}async function Vj(s,e){const n=Ue(s),r=e.batch.batchId;try{const o=await $D(n.localStore,e);zE(n,r,null),UE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xc(n,o)}catch(o){await ol(o)}}async function Pj(s,e,n){const r=Ue(s);try{const o=await(function(d,p){const g=Ue(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return g.mutationQueue.lookupMutationBatch(y,p).next((w=>(lt(w!==null,37113),x=w.keys(),g.mutationQueue.removeMutationBatch(y,w)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,x,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>g.localDocuments.getDocuments(y,x)))}))})(r.localStore,e);zE(r,e,n),UE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Xc(r,o)}catch(o){await ol(o)}}function UE(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function zE(s,e,n){const r=Ue(s);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Wp(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||BE(s,r)}))}function BE(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(Ug(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Xg(s))}function bx(s,e,n){for(const r of n)r instanceof ME?(s.Ru.addReference(r.key,e),Lj(s,r)):r instanceof VE?(ve(Yg,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||BE(s,r.key)):je(19791,{wu:r})}function Lj(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(ve(Yg,"New document in limbo: "+n),s.Eu.add(r),Xg(s))}function Xg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Ie(bt.fromString(e)),r=s.fu.next();s.Au.set(r,new Nj(n)),s.du=s.du.insert(n,r),IE(s.remoteStore,new Cr(ui(Cd(n.path)),r,"TargetPurposeLimboResolution",Nd.ce))}}async function Xc(s,e,n){const r=Ue(s),o=[],c=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,g)=>{d.push(r.pu(g,e,n).then((y=>{var x;if((y||n)&&r.isPrimaryClient){const w=y?!y.fromCache:(x=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:x.current;r.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Pg.As(g.targetId,y);c.push(w)}})))})),await Promise.all(d),r.Pu.H_(o),await(async function(g,y){const x=Ue(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ne.forEach(y,(T=>ne.forEach(T.Es,(D=>x.persistence.referenceDelegate.addReference(w,T.targetId,D))).next((()=>ne.forEach(T.ds,(D=>x.persistence.referenceDelegate.removeReference(w,T.targetId,D)))))))))}catch(w){if(!ll(w))throw w;ve(Lg,"Failed to update sequence numbers: "+w)}for(const w of y){const T=w.targetId;if(!w.fromCache){const D=x.Ms.get(T),q=D.snapshotVersion,X=D.withLastLimboFreeSnapshotVersion(q);x.Ms=x.Ms.insert(T,X)}}})(r.localStore,c))}async function Uj(s,e){const n=Ue(s);if(!n.currentUser.isEqual(e)){ve(Yg,"User change. New user:",e.toKey());const r=await SE(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new pe(Z.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xc(n,r.Ls)}}function zj(s,e){const n=Ue(s),r=n.Au.get(e);if(r&&r.hu)return Ze().add(r.key);{let o=Ze();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const p=n.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function qE(s){const e=Ue(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=LE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mj.bind(null,e),e.Pu.H_=Ej.bind(null,e.eventManager),e.Pu.yu=Tj.bind(null,e.eventManager),e}function Bj(s){const e=Ue(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pj.bind(null,e),e}class dd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return GD(this.persistence,new qD,e.initialUser,this.serializer)}Cu(e){return new TE(Vg.mi,this.serializer)}Du(e){return new JD}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dd.provider={build:()=>new dd};class qj extends dd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){lt(this.persistence.referenceDelegate instanceof ud,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ND(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new TE((r=>ud.mi(r,n)),this.serializer)}}class Jp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_x(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Uj.bind(null,this.syncEngine),await bj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new wj})()}createDatastore(e){const n=Pd(e.databaseInfo.databaseId),r=(function(c){return new sj(c)})(e.databaseInfo);return(function(c,d,p,g){return new oj(c,d,p,g)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,c,d,p){return new cj(r,o,c,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>_x(this.syncEngine,n,0)),(function(){return fx.v()?new fx:new ZD})())}createSyncEngine(e,n){return(function(o,c,d,p,g,y,x){const w=new Rj(o,c,d,p,g,y);return x&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const c=Ue(o);ve(La,"RemoteStore shutting down."),c.Ea.add(5),await Yc(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Jp.provider={build:()=>new Jp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="FirestoreClient";class Hj{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=wn.UNAUTHENTICATED,this.clientId=Sd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async d=>{ve(Fr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(ve(Fr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Fg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function hp(s,e){s.asyncQueue.verifyOperationInProgress(),ve(Fr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await SE(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function xx(s,e){s.asyncQueue.verifyOperationInProgress();const n=await Fj(s);ve(Fr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>px(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>px(e.remoteStore,o))),s._onlineComponents=e}async function Fj(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ve(Fr,"Using user provided OfflineComponentProvider");try{await hp(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Pa("Error using user provided cache. Falling back to memory cache: "+n),await hp(s,new dd)}}else ve(Fr,"Using default OfflineComponentProvider"),await hp(s,new qj(void 0));return s._offlineComponents}async function HE(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ve(Fr,"Using user provided OnlineComponentProvider"),await xx(s,s._uninitializedComponentsProvider._online)):(ve(Fr,"Using default OnlineComponentProvider"),await xx(s,new Jp))),s._onlineComponents}function Gj(s){return HE(s).then((e=>e.syncEngine))}async function fd(s){const e=await HE(s),n=e.eventManager;return n.onListen=Ij.bind(null,e.syncEngine),n.onUnlisten=jj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Cj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=kj.bind(null,e.syncEngine),n}function $j(s,e,n={}){const r=new Fi;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const x=new Wg({next:T=>{x.Nu(),d.enqueueAndForget((()=>$g(c,w)));const D=T.docs.has(p);!D&&T.fromCache?y.reject(new pe(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&T.fromCache&&g&&g.source==="server"?y.reject(new pe(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new Qg(Cd(p.path),x,{includeMetadataChanges:!0,qa:!0});return Gg(c,w)})(await fd(s),s.asyncQueue,e,n,r))),r.promise}function Kj(s,e,n={}){const r=new Fi;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const x=new Wg({next:T=>{x.Nu(),d.enqueueAndForget((()=>$g(c,w))),T.fromCache&&g.source==="server"?y.reject(new pe(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new Qg(p,x,{includeMetadataChanges:!0,qa:!0});return Gg(c,w)})(await fd(s),s.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="firestore.googleapis.com",Ex=!0;class Tx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GE,this.ssl=Ex}else this.host=e.host,this.ssl=e.ssl??Ex;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=EE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SD)throw new pe(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Mw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zd{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new kw;switch(r.type){case"firstParty":return new i4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=wx.get(n);r&&(ve("ComponentProvider","Removing Datastore"),wx.delete(n),r.terminate())})(this),Promise.resolve()}}function $E(s,e,n,r={}){var y;s=Tn(s,zd);const o=Gr(e),c=s._getSettings(),d={...c,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;o&&(ag(`https://${p}`),og("Firestore",!0)),c.host!==GE&&c.host!==p&&Pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:o,emulatorOptions:r};if(!di(g,d)&&(s._setSettings(g),r.mockUserToken)){let x,w;if(typeof r.mockUserToken=="string")x=r.mockUserToken,w=wn.MOCK_USER;else{x=Wx(r.mockUserToken,(y=s._app)==null?void 0:y.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new pe(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new wn(T)}s._authCredentials=new t4(new jw(x,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xr(this.firestore,e,this._query)}}class Ct{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Gc(n,Ct._jsonSchema))return new Ct(e,r||null,new Ie(bt.fromString(n.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:Jt("string",Ct._jsonSchemaVersion),referencePath:Jt("string")};class Gi extends Xr{constructor(e,n,r){super(e,n,Cd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new Ie(e))}withConverter(e){return new Gi(this.firestore,e,this._path)}}function pn(s,e,...n){if(s=rt(s),Ow("collection","path",e),s instanceof zd){const r=bt.fromString(e,...n);return Pb(r),new Gi(s,null,r)}{if(!(s instanceof Ct||s instanceof Gi))throw new pe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(bt.fromString(e,...n));return Pb(r),new Gi(s.firestore,null,r)}}function It(s,e,...n){if(s=rt(s),arguments.length===1&&(e=Sd.newId()),Ow("doc","path",e),s instanceof zd){const r=bt.fromString(e,...n);return Vb(r),new Ct(s,null,new Ie(r))}{if(!(s instanceof Ct||s instanceof Gi))throw new pe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(bt.fromString(e,...n));return Vb(r),new Ct(s.firestore,s instanceof Gi?s.converter:null,new Ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="AsyncQueue";class Ax{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new NE(this,"async_queue_retry"),this._c=()=>{const r=up();r&&ve(Sx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=up();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=up();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Fi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ll(e))throw e;ve(Sx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Qi("INTERNAL UNHANDLED ERROR: ",Nx(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Hg.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&je(47125,{Pc:Nx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Nx(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(s){return(function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of r)if(c in o&&typeof o[c]=="function")return!0;return!1})(s,["next","error","complete"])}class Bs extends zd{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new Ax,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ax(e),this._firestoreClient=void 0,await e}}}function KE(s,e){const n=typeof s=="object"?s:_d(),r=typeof s=="string"?s:sd,o=$r(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=Qx("firestore");c&&$E(o,...c)}return o}function ul(s){if(s._terminated)throw new pe(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||Qj(s),s._firestoreClient}function Qj(s){var r,o,c;const e=s._freezeSettings(),n=(function(p,g,y,x){return new b4(p,g,y,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,FE(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new Hj(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ts(ln.fromBase64String(e))}catch(n){throw new pe(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ts(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ts._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gc(e,ts._jsonSchema))return ts.fromBase64String(e.bytes)}}ts._jsonSchemaVersion="firestore/bytes/1.0",ts._jsonSchema={type:Jt("string",ts._jsonSchemaVersion),bytes:Jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vs._jsonSchemaVersion}}static fromJSON(e){if(Gc(e,Vs._jsonSchema))return new Vs(e.latitude,e.longitude)}}Vs._jsonSchemaVersion="firestore/geoPoint/1.0",Vs._jsonSchema={type:Jt("string",Vs._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ps._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gc(e,Ps._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ps(e.vectorValues);throw new pe(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ps._jsonSchemaVersion="firestore/vectorValue/1.0",Ps._jsonSchema={type:Jt("string",Ps._jsonSchemaVersion),vectorValues:Jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=/^__.*__$/;class Xj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kc(e,this.data,n,this.fieldTransforms)}}class QE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function YE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ac:s})}}class Bd{constructor(e,n,r,o,c,d){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Bd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return md(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(YE(this.Ac)&&Yj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Wj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Pd(e)}Cc(e,n,r,o=!1){return new Bd({Ac:e,methodName:n,Dc:r,path:on.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wc(s){const e=s._freezeSettings(),n=Pd(s._databaseId);return new Wj(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Jg(s,e,n,r,o,c={}){const d=s.Cc(c.merge||c.mergeFields?2:0,e,n,o);ty("Data must be an object, but it was:",d,r);const p=ZE(r,d);let g,y;if(c.merge)g=new ns(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const x=[];for(const w of c.mergeFields){const T=Zp(e,w,n);if(!d.contains(T))throw new pe(Z.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);tT(x,T)||x.push(T)}g=new ns(x),y=d.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,y=d.fieldTransforms;return new Xj(new Bn(p),g,y)}class Jc extends dl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jc}}function XE(s,e,n){return new Bd({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Zg extends dl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=XE(this,e,!0),r=this.vc.map((c=>Ga(c,n))),o=new el(r);return new uE(e.path,o)}isEqual(e){return e instanceof Zg&&di(this.vc,e.vc)}}class ey extends dl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=XE(this,e,!0),r=this.vc.map((c=>Ga(c,n))),o=new tl(r);return new uE(e.path,o)}isEqual(e){return e instanceof ey&&di(this.vc,e.vc)}}function WE(s,e,n,r){const o=s.Cc(1,e,n);ty("Data must be an object, but it was:",o,r);const c=[],d=Bn.empty();Qr(r,((g,y)=>{const x=ny(e,g,n);y=rt(y);const w=o.yc(x);if(y instanceof Jc)c.push(x);else{const T=Ga(y,w);T!=null&&(c.push(x),d.set(x,T))}}));const p=new ns(c);return new QE(d,p,o.fieldTransforms)}function JE(s,e,n,r,o,c){const d=s.Cc(1,e,n),p=[Zp(e,r,n)],g=[o];if(c.length%2!=0)throw new pe(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)p.push(Zp(e,c[T])),g.push(c[T+1]);const y=[],x=Bn.empty();for(let T=p.length-1;T>=0;--T)if(!tT(y,p[T])){const D=p[T];let q=g[T];q=rt(q);const X=d.yc(D);if(q instanceof Jc)y.push(D);else{const U=Ga(q,X);U!=null&&(y.push(D),x.set(D,U))}}const w=new ns(y);return new QE(x,w,d.fieldTransforms)}function Jj(s,e,n,r=!1){return Ga(n,s.Cc(r?4:3,e))}function Ga(s,e){if(eT(s=rt(s)))return ty("Unsupported field value:",e,s),ZE(s,e);if(s instanceof dl)return(function(r,o){if(!YE(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let d=0;for(const p of r){let g=Ga(p,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(s,e)}return(function(r,o){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return H4(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=xt.fromDate(r);return{timestampValue:cd(o.serializer,c)}}if(r instanceof xt){const c=new xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cd(o.serializer,c)}}if(r instanceof Vs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ts)return{bytesValue:gE(o.serializer,r._byteString)};if(r instanceof Ct){const c=o.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Og(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ps)return(function(d,p){return{mapValue:{fields:{[Fw]:{stringValue:Gw},[id]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return Dg(p.serializer,y)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Ad(r)}`)})(s,e)}function ZE(s,e){const n={};return Lw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qr(s,((r,o)=>{const c=Ga(o,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function eT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof xt||s instanceof Vs||s instanceof ts||s instanceof Ct||s instanceof dl||s instanceof Ps)}function ty(s,e,n){if(!eT(n)||!Vw(n)){const r=Ad(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Zp(s,e,n){if((e=rt(e))instanceof hl)return e._internalPath;if(typeof e=="string")return ny(s,e);throw md("Field path arguments must be of type string or ",s,!1,void 0,n)}const Zj=new RegExp("[~\\*/\\[\\]]");function ny(s,e,n){if(e.search(Zj)>=0)throw md(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new hl(...e.split("."))._internalPath}catch{throw md(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function md(s,e,n,r,o){const c=r&&!r.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${r}`),d&&(g+=` in document ${o}`),g+=")"),new pe(Z.INVALID_ARGUMENT,p+s+g)}function tT(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ek(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ek extends nT{data(){return super.data()}}function sy(s,e){return typeof e=="string"?ny(s,e):e instanceof hl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new pe(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iy{}class iT extends iy{}function Vi(s,e,...n){let r=[];e instanceof iy&&r.push(e),r=r.concat(n),(function(c){const d=c.filter((g=>g instanceof qd)).length,p=c.filter((g=>g instanceof Zc)).length;if(d>1||d>0&&p>0)throw new pe(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Zc extends iT{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zc(e,n,r)}_apply(e){const n=this._parse(e);return rT(e._query,n),new Xr(e.firestore,e.converter,qp(e._query,n))}_parse(e){const n=Wc(e.firestore);return(function(c,d,p,g,y,x,w){let T;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new pe(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){Cx(w,x);const q=[];for(const X of w)q.push(Ix(g,c,X));T={arrayValue:{values:q}}}else T=Ix(g,c,w)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||Cx(w,x),T=Jj(p,d,w,x==="in"||x==="not-in");return Wt.create(y,x,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ra(s,e,n){const r=e,o=sy("where",s);return Zc._create(o,r,n)}class qd extends iy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new qd(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:zs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const p=c.getFlattenedFilters();for(const g of p)rT(d,g),d=qp(d,g)})(e._query,n),new Xr(e.firestore,e.converter,qp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Ix(s,e,n){if(typeof(n=rt(n))=="string"){if(n==="")throw new pe(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zw(e)&&n.indexOf("/")!==-1)throw new pe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(bt.fromString(n));if(!Ie.isDocumentKey(r))throw new pe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gb(s,new Ie(r))}if(n instanceof Ct)return Gb(s,n._key);throw new pe(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ad(n)}.`)}function Cx(s,e){if(!Array.isArray(s)||s.length===0)throw new pe(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rT(s,e){const n=(function(o,c){for(const d of o)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class aT{convertValue(e,n="none"){switch(qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qr(e,((o,c)=>{r[o]=this.convertValue(c,n)})),r}convertVectorValue(e){var r,o,c;const n=(c=(o=(r=e.fields)==null?void 0:r[id].arrayValue)==null?void 0:o.values)==null?void 0:c.map((d=>zt(d.doubleValue)));return new Ps(n)}convertGeoPoint(e){return new Vs(zt(e.latitude),zt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Id(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lc(e));default:return null}}convertTimestamp(e){const n=zr(e);return new xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=bt.fromString(e);lt(wE(r),9688,{name:e});const o=new Wo(r.get(1),r.get(3)),c=new Ie(r.popFirst(5));return o.isEqual(n)||Qi(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(s,e,n){let r;return r=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,r}class Uo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mr extends nT{constructor(e,n,r,o,c,d){super(e,n,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(sy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Mr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Mr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mr._jsonSchema={type:Jt("string",Mr._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class kc extends Mr{data(e={}){return super.data(e)}}class Vr{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Uo(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new kc(this._firestore,this._userDataWriter,r.key,r,new Uo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new kc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Uo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new kc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Uo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,x=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),x=d.indexOf(p.doc.key)),{type:tk(p.type),doc:g,oldIndex:y,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tk(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(s){s=Tn(s,Ct);const e=Tn(s.firestore,Bs);return $j(ul(e),s._key).then((n=>lT(e,s,n)))}Vr._jsonSchemaVersion="firestore/querySnapshot/1.0",Vr._jsonSchema={type:Jt("string",Vr._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class ay extends aT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}function Pr(s){s=Tn(s,Xr);const e=Tn(s.firestore,Bs),n=ul(e),r=new ay(e);return sT(s._query),Kj(n,s._query).then((o=>new Vr(e,r,s,o)))}function oT(s,e,n){s=Tn(s,Ct);const r=Tn(s.firestore,Bs),o=ry(s.converter,e,n);return fl(r,[Jg(Wc(r),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Dn.none())])}function bn(s,e,n,...r){s=Tn(s,Ct);const o=Tn(s.firestore,Bs),c=Wc(o);let d;return d=typeof(e=rt(e))=="string"||e instanceof hl?JE(c,"updateDoc",s._key,e,n,r):WE(c,"updateDoc",s._key,e),fl(o,[d.toMutation(s._key,Dn.exists(!0))])}function eg(s){return fl(Tn(s.firestore,Bs),[new Md(s._key,Dn.none())])}function tg(s,e){const n=Tn(s.firestore,Bs),r=It(s),o=ry(s.converter,e);return fl(n,[Jg(Wc(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,Dn.exists(!1))]).then((()=>r))}function ng(s,...e){var g,y,x;s=rt(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Rx(e[r])||(n=e[r++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Rx(e[r])){const w=e[r];e[r]=(g=w.next)==null?void 0:g.bind(w),e[r+1]=(y=w.error)==null?void 0:y.bind(w),e[r+2]=(x=w.complete)==null?void 0:x.bind(w)}let c,d,p;if(s instanceof Ct)d=Tn(s.firestore,Bs),p=Cd(s._key.path),c={next:w=>{e[r]&&e[r](lT(d,s,w))},error:e[r+1],complete:e[r+2]};else{const w=Tn(s,Xr);d=Tn(w.firestore,Bs),p=w._query;const T=new ay(d);c={next:D=>{e[r]&&e[r](new Vr(d,T,w,D))},error:e[r+1],complete:e[r+2]},sT(s._query)}return(function(T,D,q,X){const U=new Wg(X),oe=new Qg(D,U,q);return T.asyncQueue.enqueueAndForget((async()=>Gg(await fd(T),oe))),()=>{U.Nu(),T.asyncQueue.enqueueAndForget((async()=>$g(await fd(T),oe)))}})(ul(d),p,o,c)}function fl(s,e){return(function(r,o){const c=new Fi;return r.asyncQueue.enqueueAndForget((async()=>Oj(await Gj(r),o,c))),c.promise})(ul(s),e)}function lT(s,e,n){const r=n.docs.get(e._key),o=new ay(s);return new Mr(s,o,e._key,r,new Uo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Wc(e)}set(e,n,r){this._verifyNotCommitted();const o=dp(e,this._firestore),c=ry(o.converter,n,r),d=Jg(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,r);return this._mutations.push(d.toMutation(o._key,Dn.none())),this}update(e,n,r,...o){this._verifyNotCommitted();const c=dp(e,this._firestore);let d;return d=typeof(n=rt(n))=="string"||n instanceof hl?JE(this._dataReader,"WriteBatch.update",c._key,n,r,o):WE(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,Dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=dp(e,this._firestore);return this._mutations=this._mutations.concat(new Md(n._key,Dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dp(s,e){if((s=rt(s)).firestore!==e)throw new pe(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(){return new Jc("deleteField")}function Gh(...s){return new Zg("arrayUnion",s)}function uT(...s){return new ey("arrayRemove",s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(s){return ul(s=Tn(s,Bs)),new cT(s,(e=>fl(s,e)))}(function(e,n=!0){(function(o){al=o})(Ba),Ls(new bs("firestore",((r,{instanceIdentifier:o,options:c})=>{const d=r.getProvider("app").getImmediate(),p=new Bs(new n4(r.getProvider("auth-internal")),new r4(d,r.getProvider("app-check-internal")),(function(y,x){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new pe(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wo(y.options.projectId,x)})(d,o),d);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),qn(jb,kb,e),qn(jb,kb,"esm2020")})();const fp=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:aT,Bytes:ts,CollectionReference:Gi,DocumentReference:Ct,DocumentSnapshot:Mr,FieldPath:hl,FieldValue:dl,Firestore:Bs,FirestoreError:pe,GeoPoint:Vs,Query:Xr,QueryCompositeFilterConstraint:qd,QueryConstraint:iT,QueryDocumentSnapshot:kc,QueryFieldFilterConstraint:Zc,QuerySnapshot:Vr,SnapshotMetadata:Uo,Timestamp:xt,VectorValue:Ps,WriteBatch:cT,_AutoId:Sd,_ByteString:ln,_DatabaseId:Wo,_DocumentKey:Ie,_EmptyAuthCredentialsProvider:kw,_FieldPath:on,_cast:Tn,_logWarn:Pa,_validateIsNotUsedTogether:Mw,addDoc:tg,arrayRemove:uT,arrayUnion:Gh,collection:pn,connectFirestoreEmulator:$E,deleteDoc:eg,deleteField:Fh,doc:It,ensureFirestoreConfigured:ul,executeWrite:fl,getDoc:Pi,getDocs:Pr,getFirestore:KE,onSnapshot:ng,query:Vi,setDoc:oT,updateDoc:bn,where:Ra,writeBatch:hT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="firebasestorage.googleapis.com",fT="storageBucket",nk=120*1e3,sk=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt extends ws{constructor(e,n,r=0){super(mp(e),`Firebase Storage: ${n} (${mp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ot;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ot||(Ot={}));function mp(s){return"storage/"+s}function oy(){const s="An unknown error occurred, please check the error payload for server response.";return new Mt(Ot.UNKNOWN,s)}function ik(s){return new Mt(Ot.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function rk(s){return new Mt(Ot.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ak(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Mt(Ot.UNAUTHENTICATED,s)}function ok(){return new Mt(Ot.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function lk(s){return new Mt(Ot.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function ck(){return new Mt(Ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function uk(){return new Mt(Ot.CANCELED,"User canceled the upload/download.")}function hk(s){return new Mt(Ot.INVALID_URL,"Invalid URL '"+s+"'.")}function dk(s){return new Mt(Ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function fk(){return new Mt(Ot.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fT+"' property when initializing the app?")}function mk(){return new Mt(Ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function pk(){return new Mt(Ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function gk(s){return new Mt(Ot.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sg(s){return new Mt(Ot.INVALID_ARGUMENT,s)}function mT(){return new Mt(Ot.APP_DELETED,"The Firebase app was deleted.")}function yk(s){return new Mt(Ot.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Oc(s,e){return new Mt(Ot.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function yc(s){throw new Mt(Ot.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ss.makeFromUrl(e,n)}catch{return new ss(e,"")}if(r.path==="")return r;throw dk(e)}static makeFromUrl(e,n){let r=null;const o="([A-Za-z0-9.\\-_]+)";function c(fe){fe.path.charAt(fe.path.length-1)==="/"&&(fe.path_=fe.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function y(fe){fe.path_=decodeURIComponent(fe.path)}const x="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",D=new RegExp(`^https?://${w}/${x}/b/${o}/o${T}`,"i"),q={bucket:1,path:3},X=n===dT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",oe=new RegExp(`^https?://${X}/${o}/${U}`,"i"),de=[{regex:p,indices:g,postModify:c},{regex:D,indices:q,postModify:y},{regex:oe,indices:{bucket:1,path:2},postModify:y}];for(let fe=0;fe<de.length;fe++){const Oe=de[fe],ge=Oe.regex.exec(e);if(ge){const k=ge[Oe.indices.bucket];let I=ge[Oe.indices.path];I||(I=""),r=new ss(k,I),Oe.postModify(r);break}}if(r==null)throw hk(e);return r}}class vk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(s,e,n){let r=1,o=null,c=null,d=!1,p=0;function g(){return p===2}let y=!1;function x(...U){y||(y=!0,e.apply(null,U))}function w(U){o=setTimeout(()=>{o=null,s(D,g())},U)}function T(){c&&clearTimeout(c)}function D(U,...oe){if(y){T();return}if(U){T(),x.call(null,U,...oe);return}if(g()||d){T(),x.call(null,U,...oe);return}r<64&&(r*=2);let de;p===1?(p=2,de=0):de=(r+Math.random())*1e3,w(de)}let q=!1;function X(U){q||(q=!0,T(),!y&&(o!==null?(U||(p=2),clearTimeout(o),w(0)):U||(p=1)))}return w(0),c=setTimeout(()=>{d=!0,X(!0)},n),X}function bk(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(s){return s!==void 0}function wk(s){return typeof s=="object"&&!Array.isArray(s)}function ly(s){return typeof s=="string"||s instanceof String}function Dx(s){return cy()&&s instanceof Blob}function cy(){return typeof Blob<"u"}function jx(s,e,n,r){if(r<e)throw sg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>n)throw sg(`Invalid value for '${s}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(s,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${s}`}function pT(s){const e=encodeURIComponent;let n="?";for(const r in s)if(s.hasOwnProperty(r)){const o=e(r)+"="+e(s[r]);n=n+o+"&"}return n=n.slice(0,-1),n}var ja;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(ja||(ja={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n,r,o,c,d,p,g,y,x,w,T=!0,D=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=x,this.connectionFactory_=w,this.retry=T,this.isUsingEmulator=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,X)=>{this.resolve_=q,this.reject_=X,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new Dh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const p=c.getErrorCode()===ja.NO_ERROR,g=c.getStatus();if(!p||Ek(g,this.additionalRetryCodes_)&&this.retry){const x=c.getErrorCode()===ja.ABORT;r(!1,new Dh(!1,null,x));return}const y=this.successCodes_.indexOf(g)!==-1;r(!0,new Dh(y,c))})},n=(r,o)=>{const c=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());xk(g)?c(g):c()}catch(g){d(g)}else if(p!==null){const g=oy();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(o.canceled){const g=this.appDelete_?mT():uk();d(g)}else{const g=ck();d(g)}};this.canceled_?n(!1,new Dh(!1,null,!0)):this.backoffId_=_k(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&bk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Dh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Sk(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function Ak(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Nk(s,e){e&&(s["X-Firebase-GMPID"]=e)}function Rk(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function Ik(s,e,n,r,o,c,d=!0,p=!1){const g=pT(s.urlParams),y=s.url+g,x=Object.assign({},s.headers);return Nk(x,e),Sk(x,n),Ak(x,c),Rk(x,r),new Tk(y,s.method,x,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d,p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Dk(...s){const e=Ck();if(e!==void 0){const n=new e;for(let r=0;r<s.length;r++)n.append(s[r]);return n.getBlob()}else{if(cy())return new Blob(s);throw new Mt(Ot.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jk(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(s){if(typeof atob>"u")throw gk("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pp{constructor(e,n){this.data=e,this.contentType=n||null}}function Ok(s,e){switch(s){case ci.RAW:return new pp(gT(e));case ci.BASE64:case ci.BASE64URL:return new pp(yT(s,e));case ci.DATA_URL:return new pp(Vk(e),Pk(e))}throw oy()}function gT(s){const e=[];for(let n=0;n<s.length;n++){let r=s.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const c=r,d=s.charCodeAt(++n);r=65536|(c&1023)<<10|d&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Mk(s){let e;try{e=decodeURIComponent(s)}catch{throw Oc(ci.DATA_URL,"Malformed data URL.")}return gT(e)}function yT(s,e){switch(s){case ci.BASE64:{const o=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(o||c)throw Oc(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case ci.BASE64URL:{const o=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(o||c)throw Oc(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=kk(e)}catch(o){throw o.message.includes("polyfill")?o:Oc(s,"Invalid character found")}const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}class vT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Oc(ci.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Lk(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Vk(s){const e=new vT(s);return e.base64?yT(ci.BASE64,e.rest):Mk(e.rest)}function Pk(s){return new vT(s).contentType}function Lk(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n){let r=0,o="";Dx(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(Dx(this.data_)){const r=this.data_,o=jk(r,e,n);return o===null?null:new Ir(o)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ir(r,!0)}}static getBlob(...e){if(cy()){const n=e.map(r=>r instanceof Ir?r.data_:r);return new Ir(Dk.apply(null,n))}else{const n=e.map(d=>ly(d)?Ok(ci.RAW,d).data:d.data_);let r=0;n.forEach(d=>{r+=d.byteLength});const o=new Uint8Array(r);let c=0;return n.forEach(d=>{for(let p=0;p<d.length;p++)o[c++]=d[p]}),new Ir(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(s){let e;try{e=JSON.parse(s)}catch{return null}return wk(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function zk(s,e){const n=e.split("/").filter(r=>r.length>0).join("/");return s.length===0?n:s+"/"+n}function bT(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(s,e){return e}class In{constructor(e,n,r,o){this.server=e,this.local=n||e,this.writable=!!r,this.xform=o||Bk}}let jh=null;function qk(s){return!ly(s)||s.length<2?s:bT(s)}function xT(){if(jh)return jh;const s=[];s.push(new In("bucket")),s.push(new In("generation")),s.push(new In("metageneration")),s.push(new In("name","fullPath",!0));function e(c,d){return qk(d)}const n=new In("name");n.xform=e,s.push(n);function r(c,d){return d!==void 0?Number(d):d}const o=new In("size");return o.xform=r,s.push(o),s.push(new In("timeCreated")),s.push(new In("updated")),s.push(new In("md5Hash",null,!0)),s.push(new In("cacheControl",null,!0)),s.push(new In("contentDisposition",null,!0)),s.push(new In("contentEncoding",null,!0)),s.push(new In("contentLanguage",null,!0)),s.push(new In("contentType",null,!0)),s.push(new In("metadata","customMetadata",!0)),jh=s,jh}function Hk(s,e){function n(){const r=s.bucket,o=s.fullPath,c=new ss(r,o);return e._makeStorageReference(c)}Object.defineProperty(s,"ref",{get:n})}function Fk(s,e,n){const r={};r.type="file";const o=n.length;for(let c=0;c<o;c++){const d=n[c];r[d.local]=d.xform(r,e[d.server])}return Hk(r,s),r}function wT(s,e,n){const r=_T(e);return r===null?null:Fk(s,r,n)}function Gk(s,e,n,r){const o=_T(e);if(o===null||!ly(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const d=encodeURIComponent;return c.split(",").map(y=>{const x=s.bucket,w=s.fullPath,T="/b/"+d(x)+"/o/"+d(w),D=uy(T,n,r),q=pT({alt:"media",token:y});return D+q})[0]}function $k(s,e){const n={},r=e.length;for(let o=0;o<r;o++){const c=e[o];c.writable&&(n[c.server]=s[c.local])}return JSON.stringify(n)}class ET{constructor(e,n,r,o){this.url=e,this.method=n,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(s){if(!s)throw oy()}function Kk(s,e){function n(r,o){const c=wT(s,o,e);return TT(c!==null),c}return n}function Qk(s,e){function n(r,o){const c=wT(s,o,e);return TT(c!==null),Gk(c,o,s.host,s._protocol)}return n}function ST(s){function e(n,r){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=ok():o=ak():n.getStatus()===402?o=rk(s.bucket):n.getStatus()===403?o=lk(s.path):o=r,o.status=n.getStatus(),o.serverResponse=r.serverResponse,o}return e}function Yk(s){const e=ST(s);function n(r,o){let c=e(r,o);return r.getStatus()===404&&(c=ik(s.path)),c.serverResponse=o.serverResponse,c}return n}function Xk(s,e,n){const r=e.fullServerUrl(),o=uy(r,s.host,s._protocol),c="GET",d=s.maxOperationRetryTime,p=new ET(o,c,Qk(s,n),d);return p.errorHandler=Yk(e),p}function Wk(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function Jk(s,e,n){const r=Object.assign({},n);return r.fullPath=s.path,r.size=e.size(),r.contentType||(r.contentType=Wk(null,e)),r}function Zk(s,e,n,r,o){const c=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let de="";for(let fe=0;fe<2;fe++)de=de+Math.random().toString().slice(2);return de}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const y=Jk(e,r,o),x=$k(y,n),w="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+g+"--",D=Ir.getBlob(w,r,T);if(D===null)throw mk();const q={name:y.fullPath},X=uy(c,s.host,s._protocol),U="POST",oe=s.maxUploadRetryTime,ae=new ET(X,U,Kk(s,n),oe);return ae.urlParams=q,ae.headers=d,ae.body=D.uploadData(),ae.errorHandler=ST(e),ae}class eO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ja.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ja.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ja.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,o,c){if(this.sent_)throw yc("cannot .send() more than once");if(Gr(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),c!==void 0)for(const d in c)c.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,c[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class tO extends eO{initXhr(){this.xhr_.responseType="text"}}function AT(){return new tO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n){this._service=e,n instanceof ss?this._location=n:this._location=ss.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ua(e,n)}get root(){const e=new ss(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return bT(this._location.path)}get storage(){return this._service}get parent(){const e=Uk(this._location.path);if(e===null)return null;const n=new ss(this._location.bucket,e);return new Ua(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw yk(e)}}function nO(s,e,n){s._throwIfRoot("uploadBytes");const r=Zk(s.storage,s._location,xT(),new Ir(e,!0),n);return s.storage.makeRequestWithTokens(r,AT).then(o=>({metadata:o,ref:s}))}function sO(s){s._throwIfRoot("getDownloadURL");const e=Xk(s.storage,s._location,xT());return s.storage.makeRequestWithTokens(e,AT).then(n=>{if(n===null)throw pk();return n})}function iO(s,e){const n=zk(s._location.path,e),r=new ss(s._location.bucket,n);return new Ua(s.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(s){return/^[A-Za-z]+:\/\//.test(s)}function aO(s,e){return new Ua(s,e)}function NT(s,e){if(s instanceof hy){const n=s;if(n._bucket==null)throw fk();const r=new Ua(n,n._bucket);return e!=null?NT(r,e):r}else return e!==void 0?iO(s,e):s}function oO(s,e){if(e&&rO(e)){if(s instanceof hy)return aO(s,e);throw sg("To use ref(service, url), the first argument must be a Storage instance.")}else return NT(s,e)}function kx(s,e){const n=e==null?void 0:e[fT];return n==null?null:ss.makeFromBucketSpec(n,s)}function lO(s,e,n,r={}){s.host=`${e}:${n}`;const o=Gr(e);o&&(ag(`https://${s.host}/b`),og("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:c}=r;c&&(s._overrideAuthToken=typeof c=="string"?c:Wx(c,s.app.options.projectId))}class hy{constructor(e,n,r,o,c,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=dT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nk,this._maxUploadRetryTime=sk,this._requests=new Set,o!=null?this._bucket=ss.makeFromBucketSpec(o,this._host):this._bucket=kx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ss.makeFromBucketSpec(this._url,e):this._bucket=kx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(es(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ua(this,e)}_makeRequest(e,n,r,o,c=!0){if(this._deleted)return new vk(mT());{const d=Ik(e,this._appId,r,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,o).getPromise()}}const Ox="@firebase/storage",Mx="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="storage";function Vx(s,e,n){return s=rt(s),nO(s,e,n)}function Px(s){return s=rt(s),sO(s)}function Lx(s,e){return s=rt(s),oO(s,e)}function cO(s=_d(),e){s=rt(s);const r=$r(s,RT).getImmediate({identifier:e}),o=Qx("storage");return o&&uO(r,...o),r}function uO(s,e,n,r={}){lO(s,e,n,r)}function hO(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new hy(n,r,o,e,Ba)}function dO(){Ls(new bs(RT,hO,"PUBLIC").setMultipleInstances(!0)),qn(Ox,Mx,""),qn(Ox,Mx,"esm2020")}dO();const fO={apiKey:"AIzaSyCdarhgeDVba6Dz5xNGcyvkBFK7Vp8XMSg",authDomain:"ladakh-connect1.firebaseapp.com",projectId:"ladakh-connect1",storageBucket:"ladakh-connect1.firebasestorage.app",messagingSenderId:"665150606046",appId:"1:665150606046:web:a3f2ce2cdf7b460987904f",measurementId:"G-WS5L3SL28C"},Hd=i1(fO),xn=sw(Hd);new li;XC(Hd);const Ge=KE(Hd),Ux=cO(Hd),IT=ie.createContext(void 0),mO=({children:s})=>{const[e,n]=ie.useState(null),[r,o]=ie.useState([]),[c,d]=ie.useState([]);ie.useEffect(()=>{const A=H1(xn,async C=>{if(C)try{const R=It(Ge,"users",C.uid),M=await Pi(R);if(M.exists()){const N=M.data();n({...N,uid:C.uid})}}catch(R){console.error("Error fetching user profile:",R)}else n(null),o([]),d([])});return()=>A()},[]),ie.useEffect(()=>{if(!e)return;const A=Vi(pn(Ge,"rideOffers")),C=ng(A,N=>{const we=N.docs.map(be=>({id:be.id,...be.data()}));d(we)},N=>{console.warn("Permission denied for RideOffers. Check Firestore Rules in Console.",N.message)});let R;e.role==="passenger"?R=Vi(pn(Ge,"trips"),Ra("passengerUid","==",e.uid)):e.role==="owner"?R=Vi(pn(Ge,"trips"),Ra("driverId","==",e.uid)):R=Vi(pn(Ge,"trips"));const M=ng(R,N=>{const we=N.docs.map(be=>({id:be.id,...be.data()}));o(we)},N=>{console.warn("Permission denied for Trips. Check Firestore Rules in Console.",N.message)});return()=>{C(),M()}},[e]),ie.useEffect(()=>{(async()=>{try{const C=new Date,R=pn(Ge,"rideOffers"),M=await Pr(R),N=hT(Ge);let we=0;for(const be of M.docs){const F=be.data();if(!(F.status==="COMPLETED"||F.status==="CANCELLED"))try{const[se,me]=F.time.split(" "),[Se,Ve]=se.split(":");let j=parseInt(Se);me==="PM"&&j!==12&&(j+=12),me==="AM"&&j===12&&(j=0);const G=new Date(F.date);if(G.setHours(j,parseInt(Ve),0,0),G<C){if(!F.bookedSeats||F.bookedSeats.length===0)console.log(`[Cleanup] Deleting expired empty offer: ${be.id}`),N.delete(It(Ge,"rideOffers",be.id)),we++;else if(F.status!=="EN_ROUTE"){console.log(`[Cleanup] Cancelling expired unattended offer: ${be.id}`),N.update(It(Ge,"rideOffers",be.id),{status:"CANCELLED"});const le=Vi(pn(Ge,"trips"),Ra("offerId","==",be.id));(await Pr(le)).forEach(te=>{te.data().status!=="CANCELLED"&&N.update(It(Ge,"trips",te.id),{status:"CANCELLED"})}),we++}}}catch{console.warn("Skipping offer with invalid date/time:",F.id)}}we>0&&(await N.commit(),console.log(`[Cleanup] Committed ${we} updates.`))}catch(C){console.error("Cleanup failed:",C)}})()},[]);const p=ie.useCallback(async(A,C)=>{var be;let R=(be=xn.currentUser)==null?void 0:be.uid;if(!R)if(A==="admin")R="admin-mock-uid";else if(A==="owner"&&C.mobile==="9999999999")R="owner-mock-uid";else return;const M=It(Ge,"users",R),N=await Pi(M);if(N.exists()){const F=N.data().role;throw F==="passenger"&&A==="owner"?new Error("User already registered as passenger. Please login or use 'Forgot password'."):F==="owner"&&A==="passenger"?new Error("User already registered as driver. Please login or use 'Forgot password'."):new Error("User already registered. Please login or use 'Forgot password'.")}const we={...C,role:A,uid:R,verificationStatus:C.verificationStatus||"none",documents:C.documents||{}};await oT(M,we),n(we)},[]),g=ie.useCallback(async(A,C)=>{const R=`${A}@ladakhconnect.com`,M=await z1(xn,R,C),N=It(Ge,"users",M.user.uid);if(!(await Pi(N)).exists())throw await Wh(xn),new Error("User not registered. Please register first.")},[]),y=ie.useCallback(async(A,C)=>{if(!xn.currentUser)throw new Error("No user logged in to set password");const R=`${A}@ladakhconnect.com`,M=Kr.credential(R,C);try{await U1(xn.currentUser,M)}catch(N){if(console.error("Link Credential Error:",N),N.code==="auth/provider-already-linked")await kp(xn.currentUser,C);else throw N.code==="auth/credential-already-in-use"?new Error("Account already exists. Please Login with Password."):N}},[]),x=ie.useCallback(async A=>{if(!xn.currentUser)throw new Error("No user logged in to reset password");await kp(xn.currentUser,A)},[]),w=ie.useCallback(async A=>{!e||!e.uid||(await bn(It(Ge,"users",e.uid),A),n(C=>C?{...C,...A}:null))},[e]),T=ie.useCallback(async()=>{await Wh(xn),n(null)},[]),D=ie.useCallback(async()=>{if(!(!e||!e.uid||!xn.currentUser))try{const{deleteDoc:A,writeBatch:C,getDocs:R}=await Th(async()=>{const{deleteDoc:Se,writeBatch:Ve,getDocs:j}=await Promise.resolve().then(()=>fp);return{deleteDoc:Se,writeBatch:Ve,getDocs:j}},void 0),M=C(Ge),N=[],we=e.role==="owner"?"driverId":"passengerUid",be=Vi(pn(Ge,"trips"),Ra(we,"==",e.uid));if((await R(be)).forEach(Se=>M.delete(Se.ref)),e.role==="owner"){const Se=Vi(pn(Ge,"rideOffers"),Ra("driverId","==",e.uid));(await R(Se)).forEach(j=>M.delete(j.ref))}const se=It(Ge,"users",e.uid);M.delete(se),await M.commit();const{deleteUser:me}=await Th(async()=>{const{deleteUser:Se}=await Promise.resolve().then(()=>kI);return{deleteUser:Se}},void 0);await me(xn.currentUser),n(null),o([]),d([]),alert("Account and all associated data deleted successfully.")}catch(A){console.error("Error deleting account:",A),A.code==="auth/requires-recent-login"?alert("For security, please logout and login again before deleting your account."):alert("Error deleting account: "+A.message)}},[e]),q=ie.useCallback(async(A,C,R)=>{var M;if(!e)return!1;try{if(R){const N=It(Ge,"rideOffers",R),we=await Pi(N);if(we.exists()){const be=we.data();if(be.totalSeats-(((M=be.bookedSeats)==null?void 0:M.length)||0)<=0)return alert("Sorry, seats are no longer available."),!1}}if(console.log("Creating trip doc...",A),await tg(pn(Ge,"trips"),{passengerUid:e.uid,passengerName:e.name,passengerMobile:e.mobile,driverName:A.driverName||"Unknown",vehicleNo:A.vehicleNo||"Unknown",from:A.from,to:A.to,date:A.date,time:A.time,cost:C,status:"WAITING_CONFIRMATION",createdAt:Date.now(),offerId:R||null,seats:A.seats||[],paymentRequested:!1,driverId:A.driverId||null,messages:[]}),R&&A.seats){console.log("Updating offer seats...",R);const N=It(Ge,"rideOffers",R);await bn(N,{bookedSeats:Gh(...A.seats)})}return alert("Booking Request Sent! Waiting for driver confirmation."),!0}catch(N){return console.error("Booking Error:",N),alert(`Booking Failed: ${N.message}`),!1}},[e]),X=ie.useCallback(async A=>{var N;if(!e||e.role!=="owner")return;const C=new Date(A.date),R=new Date;if(R.setDate(R.getDate()+60),C>R){alert("Cannot post rides more than 60 days in advance.");return}const M={driverName:e.name,driverId:e.uid||e.mobile,driverMobile:e.mobile,vehicleImage:((N=e.documents)==null?void 0:N.vehicleSide)||null,bookedSeats:[],rating:5,createdAt:Date.now(),activeSeats:A.activeSeats||[],...A};await tg(pn(Ge,"rideOffers"),M)},[e]),U=ie.useCallback(async(A,C)=>{const R=r.find(we=>we.id===A);if(!R)return;if(C==="CANCELLED"){if(R.status==="COMPLETED"){alert("Cannot cancel a completed ride!");return}if(R.status==="CONFIRMED"){alert("Confirmed rides cannot be cancelled. Please contact support.");return}let we=0;try{if(R.date&&R.time){const[be,F]=R.time.split(" "),[se,me]=be.split(":");let Se=parseInt(se);F==="PM"&&Se!==12&&(Se+=12),F==="AM"&&Se===12&&(Se=0);const Ve=new Date(R.date);Ve.setHours(Se,parseInt(me),0,0);const j=new Date;we=(Ve.getTime()-j.getTime())/(1e3*60*60)}}catch(be){console.error("Error parsing date/time for cancellation",be),we=12}if(R.offerId&&R.seats&&R.seats.length>0)try{const be=It(Ge,"rideOffers",R.offerId);await bn(be,{bookedSeats:uT(...R.seats)})}catch(be){console.error("Error freeing up seats:",be)}alert("Ride Cancelled.")}const M=It(Ge,"trips",A),N={status:C};if(C==="COMPLETED"&&(N.completedAt=Date.now(),N.paymentRequested=!1),await bn(M,N),C==="EN_ROUTE"||C==="ARRIVED"){const we=C==="EN_ROUTE"?"Your ride has started! The driver is en route.":"The driver has arrived at the pickup location.",be={id:Date.now().toString(),senderId:"system",text:we,timestamp:Date.now()};await bn(M,{messages:Gh(be)})}},[r]),oe=ie.useCallback(async(A,C)=>{const R=It(Ge,"trips",A);await bn(R,{userRating:C})},[]),ae=ie.useCallback(async A=>{const C=It(Ge,"trips",A);await bn(C,{paymentRequested:!0})},[]),de=ie.useCallback(async A=>{const C=It(Ge,"trips",A);await bn(C,{status:"COMPLETED",paymentRequested:!1,completedAt:Date.now()})},[]),fe=ie.useCallback(async(A,C)=>{const R=It(Ge,"trips",A),M=await Pi(R);M.exists()&&(M.data(),C?await bn(R,{status:"COMPLETED",paymentRequested:!1,completedAt:Date.now()}):(await bn(R,{status:"DISPUTED",paymentRequested:!1}),alert("Ride marked as Disputed. Support will contact you.")))},[]),Oe=ie.useCallback(async(A,C)=>{if(!e)return;const R={id:Date.now().toString(),senderId:e.name,text:C,timestamp:Date.now()},M=It(Ge,"trips",A);await bn(M,{messages:Gh(R)})},[e]),ge=ie.useCallback(async A=>{const C=It(Ge,"rideOffers",A),R=await Pi(C);if(R.exists()){R.data();const N=Vi(pn(Ge,"trips"),Ra("offerId","==",A)),{getDocs:we}=await Th(async()=>{const{getDocs:se}=await Promise.resolve().then(()=>fp);return{getDocs:se}},void 0);if((await we(N)).docs.some(se=>{const me=se.data().status;return me==="BOOKED"||me==="WAITING_CONFIRMATION"||me==="CONFIRMED"||me==="EN_ROUTE"||me==="ARRIVED"})){alert("Cannot cancel ride with active bookings. Please contact support.");return}}const{deleteDoc:M}=await Th(async()=>{const{deleteDoc:N}=await Promise.resolve().then(()=>fp);return{deleteDoc:N}},void 0);await M(C)},[]),k=ie.useCallback(async(A,C,R)=>{const M=It(Ge,"rideOffers",A);await bn(M,{pricePerSeat:C,seatPrices:R})},[]),I=ie.useCallback(async(A,C)=>{var be;const R=It(Ge,"rideOffers",A),M=await Pi(R);if(!M.exists())return;const N=M.data(),we=((be=N.bookedSeats)==null?void 0:be.length)||0;if(we===0){await bn(R,C);return}if(C.pricePerSeat&&C.pricePerSeat>N.pricePerSeat){alert("Cannot increase price for a ride with active bookings.");return}if(C.vehicleType&&C.vehicleType!==N.vehicleType){alert("Cannot change vehicle type for a ride with active bookings.");return}if(C.totalSeats&&C.totalSeats<we){alert(`Cannot reduce seats below currently booked count (${we}).`);return}await bn(R,C)},[]);return h.jsx(IT.Provider,{value:{user:e,login:p,updateUser:w,logout:T,trips:r,rideOffers:c,bookTrip:q,publishRide:X,updateTripStatus:U,sendMessage:Oe,rateTrip:oe,requestPayment:ae,cancelRideOffer:ge,updateRideOfferPrice:k,updateRideOffer:I,completeRide:de,confirmRideCompletion:fe,loginWithPassword:g,setupPassword:y,resetPassword:x,deleteAccount:D},children:s})},xs=()=>{const s=ie.useContext(IT);if(!s)throw new Error("useApp must be used within an AppProvider");return s};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gO=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),zx=s=>{const e=gO(s);return e.charAt(0).toUpperCase()+e.slice(1)},CT=(...s)=>s.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),yO=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=ie.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:c,iconNode:d,...p},g)=>ie.createElement("svg",{ref:g,...vO,width:e,height:e,stroke:s,strokeWidth:r?Number(n)*24/Number(e):n,className:CT("lucide",o),...!c&&!yO(p)&&{"aria-hidden":"true"},...p},[...d.map(([y,x])=>ie.createElement(y,x)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(s,e)=>{const n=ie.forwardRef(({className:r,...o},c)=>ie.createElement(_O,{ref:c,iconNode:e,className:CT(`lucide-${pO(zx(s))}`,`lucide-${s}`,r),...o}));return n.displayName=zx(s),n};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],xO=ze("arrow-right-left",bO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],EO=ze("arrow-right",wO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],DT=ze("bot",TO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],AO=ze("briefcase",SO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],kh=ze("calendar",NO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],IO=ze("camera",RO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],DO=ze("check",CO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],kO=ze("chevron-down",jO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],il=ze("chevron-right",OO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],eu=ze("chevron-left",MO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],jT=ze("circle-alert",VO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zo=ze("circle-check-big",PO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],UO=ze("circle-question-mark",LO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],BO=ze("circle-x",zO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],gp=ze("clock",qO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],yp=ze("eye-off",HO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vp=ze("eye",FO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],kT=ze("file-text",GO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],OT=ze("house",$O);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ia=ze("loader-circle",KO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],_p=ze("lock",QO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Fd=ze("log-out",YO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],MT=ze("mail",XO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],pd=ze("map-pin",WO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],ZO=ze("map",JO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],VT=ze("menu",eM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],nM=ze("pen-line",tM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],dy=ze("phone",sM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bp=ze("plus",iM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],aM=ze("printer",rM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],lM=ze("save",oM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],PT=ze("search",cM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],LT=ze("send",uM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],dM=ze("shield-alert",hM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],mM=ze("shield-check",fM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],gM=ze("sliders-horizontal",pM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],xp=ze("square-pen",yM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Gd=ze("star",vM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],bM=ze("ticket",_M);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ig=ze("trash-2",xM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ka=ze("user",wM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],TM=ze("users",EM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Oh=ze("wallet",SM);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Dr=ze("x",AM),Bx=["Leh","Kargil","Srinagar","Jammu","Nubra","Pangong"],gd=[{type:"Mahindra Xylo",rateMultiplier:1,seats:7,layout:[1,3,3],image:"https://imgd.aeplcdn.com/1056x594/cw/ec/26659/Mahindra-Xylo-Exterior-121541.jpg?wm=0"},{type:"Toyota Innova",rateMultiplier:1.2,seats:7,layout:[1,3,3],image:"https://upload.wikimedia.org/wikipedia/commons/2/23/2012_Toyota_Innova_2.5_G_Review.jpg"},{type:"Toyota Innova Crysta",rateMultiplier:1.4,seats:6,layout:[1,2,3],image:"https://imgd.aeplcdn.com/1056x594/n/cw/ec/140809/innova-crysta-exterior-right-front-three-quarter.jpeg?isig=0&q=80"},{type:"Tempo Traveler",rateMultiplier:1.5,seats:12,layout:[1,3,4,4],image:"https://5.imimg.com/data5/SELLER/Default/2022/9/MZ/QO/HG/3895315/tempo-traveller-hire-service-500x500.jpg"}],NM=["Mahindra Xylo","Toyota Innova","Toyota Innova Crysta"],RM=()=>{const{login:s,loginWithPassword:e,setupPassword:n,resetPassword:r}=xs(),[o,c]=ie.useState("WELCOME"),[d,p]=ie.useState(!1),[g,y]=ie.useState(null),[x,w]=ie.useState(""),[T,D]=ie.useState(""),[q,X]=ie.useState(!1),[U,oe]=ie.useState(["","","","","",""]),[ae,de]=ie.useState(""),[fe,Oe]=ie.useState(""),[ge,k]=ie.useState(gd[0].type),[I,A]=ie.useState(!1),[C,R]=ie.useState(null),M=ie.useRef(null);ie.useEffect(()=>{const Q=setTimeout(async()=>{if(!(!xn||!document.getElementById("recaptcha-container")))try{if(window.recaptchaVerifier){try{window.recaptchaVerifier.clear()}catch{}window.recaptchaVerifier=null}const Ne=new J1(xn,"recaptcha-container",{size:"invisible",callback:()=>{console.log("Recaptcha solved automatically")},"expired-callback":()=>{y("Security check expired. Please refresh the page."),p(!1)}});await Ne.render(),window.recaptchaVerifier=Ne,M.current=Ne}catch(Ne){console.error("Recaptcha Init Error",Ne)}},1e3);return()=>{if(clearTimeout(Q),window.recaptchaVerifier){try{window.recaptchaVerifier.clear()}catch{}window.recaptchaVerifier=null}}},[]);const N=()=>{w(""),D(""),oe(["","","","","",""]),de(""),Oe(""),R(null),A(!1),y(null),p(!1)},we=async()=>{if(x.length!==10){y("Please enter a valid 10-digit mobile number");return}if(y(null),p(!0),x==="9999999999"){R({}),p(!1);return}try{if(!M.current)throw new Error("Recaptcha not initialized");const te=await Z1(xn,`+91${x}`,M.current);R(te)}catch(te){console.error("OTP Error",te),y(te.message||"Failed to send OTP. Try again."),te.code==="auth/invalid-app-credential"?y("Domain Blocked. Add localhost to Firebase Console."):te.code==="auth/billing-not-enabled"&&y("SMS Limit Exceeded/Billing Required. Use Google Login or Mock Login.")}finally{p(!1)}},be=async()=>{if(!C)return;const te=U.join("");if(te.length!==6){y("Please enter valid 6-digit OTP");return}if(p(!0),x==="9999999999"){A(!0),p(!1);return}try{const Q=await C.confirm(te);if(o.startsWith("REGISTER")){const ce=It(Ge,"users",Q.user.uid),Ne=await Pi(ce);if(Ne.exists()){const xe=Ne.data().role,nt=o==="REGISTER_DRIVER"?"owner":"passenger";await Wh(xn),y(xe==="passenger"&&nt==="owner"?"User already registered as passenger. Please login or use 'Forgot password'.":xe==="owner"&&nt==="passenger"?"User already registered as driver. Please login or use 'Forgot password'.":"Account already registered. Please login or use 'Forgot password'."),p(!1);return}}A(!0),p(!1)}catch{p(!1),y("Incorrect OTP. Please check.")}},F=async()=>{if(x.length!==10||!T){y("Please enter Mobile Number and Password");return}p(!0);try{await e(x,T)}catch(te){p(!1),console.error("Login Error:",te),te.message.includes("User not registered")?y("User not found. register please"):y("Invalid Credentials. Please check or reset password.")}},se=async()=>{if(!T){y("Please fill all fields");return}if(T.length<6){y("Password must be at least 6 characters");return}p(!0);try{x!=="9999999999"&&await n(x,T);const te=o==="REGISTER_DRIVER"?"owner":"passenger";await s(te,{name:te==="owner"?ae:"New Passenger",mobile:x,...te==="owner"?{vehicleNo:fe,vehicleType:ge}:{}})}catch(te){p(!1),console.error("Registration Error:",te),te.code==="auth/operation-not-allowed"?y("Configuration Error: Email/Password Auth is not enabled in Firebase Console."):te.code==="auth/email-already-in-use"?y("Account already exists. Please Login."):te.message.includes("User already registered")?y(te.message):y("Registration Failed: "+te.message)}},me=async()=>{if(!T||T.length<6){y("Password must be at least 6 characters");return}p(!0);try{await r(T),alert("Password Reset Successfully! Please Login."),N(),c("LOGIN")}catch(te){p(!1),y("Reset Failed: "+te.message)}},Se=(te,Q)=>{if(isNaN(Number(te.value)))return;const ce=[...U];ce[Q]=te.value,oe(ce),te.nextSibling&&te.value&&te.nextSibling.focus()},Ve=()=>h.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom duration-500",children:[h.jsx("button",{onClick:()=>{N(),c("LOGIN")},className:"w-full bg-[#7209b7] text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:opacity-90 transition",children:"LOGIN"}),h.jsxs("div",{className:"flex items-center gap-4 py-2",children:[h.jsx("div",{className:"h-[1px] bg-black flex-1"}),h.jsx("span",{className:"text-black text-sm font-black uppercase tracking-wider",children:"Register"}),h.jsx("div",{className:"h-[1px] bg-black flex-1"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx("button",{onClick:()=>{N(),c("REGISTER_PASSENGER")},className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-2 rounded-xl font-bold text-base shadow-md hover:shadow-lg hover:scale-[1.02] active:scale-95 transition-all duration-300 uppercase tracking-wide",children:"Passenger"}),h.jsx("button",{onClick:()=>{N(),c("REGISTER_DRIVER")},className:"w-full bg-gradient-to-r from-sky-500 to-cyan-600 text-white py-2 rounded-xl font-bold text-base shadow-md hover:shadow-lg hover:scale-[1.02] active:scale-95 transition-all duration-300 uppercase tracking-wide",children:"Driver"})]})]}),j=()=>h.jsxs("div",{className:"animate-in fade-in slide-in-from-right duration-300",children:[h.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Login"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-[var(--login-text)] uppercase tracking-wide",children:"Mobile Number"}),h.jsxs("div",{className:"flex items-center border-b-2 border-gray-200 py-2 focus-within:border-[var(--login-focus)] transition-colors",children:[h.jsx("span",{className:"text-gray-800 font-bold mr-3 text-xl",children:"+91"}),h.jsx("input",{type:"tel",value:x,onChange:te=>w(te.target.value.replace(/\D/g,"")),className:"flex-1 outline-none font-bold text-2xl text-[var(--login-text)] bg-[var(--login-input-bg)]",placeholder:"99999 99999",maxLength:10})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-[var(--login-text)] uppercase tracking-wide",children:"Password"}),h.jsxs("div",{className:"flex items-center border-b-2 border-gray-200 py-2 focus-within:border-[var(--login-focus)] transition-colors",children:[h.jsx(_p,{size:20,className:"text-gray-400 mr-2"}),h.jsx("input",{type:q?"text":"password",value:T,onChange:te=>D(te.target.value),className:"flex-1 outline-none font-bold text-xl text-[var(--login-text)] bg-[var(--login-input-bg)]",placeholder:"Enter Password"}),h.jsx("button",{onClick:()=>X(!q),className:"text-gray-400 hover:text-gray-600",children:q?h.jsx(yp,{size:20}):h.jsx(vp,{size:20})})]})]}),h.jsx("div",{className:"flex justify-end",children:h.jsx("button",{onClick:()=>{N(),c("FORGOT_PASSWORD")},className:"text-xs font-bold text-[#7209b7] hover:underline",children:"Forgot Password?"})}),h.jsx("button",{onClick:F,disabled:d||x.length<10||!T,className:"w-full bg-[#E02E49] text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:opacity-90 transition",children:d?h.jsx(Ia,{className:"animate-spin mx-auto"}):"LOGIN"})]})]}),G=te=>h.jsxs("div",{className:"animate-in fade-in slide-in-from-right duration-300",children:[h.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:["Register as ",te==="passenger"?"Passenger":"Driver"]}),C?I?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Set Password"}),h.jsxs("div",{className:"flex items-center border-b-2 border-gray-200 py-2",children:[h.jsx(_p,{size:18,className:"text-gray-400 mr-2"}),h.jsx("input",{type:q?"text":"password",value:T,onChange:Q=>D(Q.target.value),className:"flex-1 outline-none font-bold text-lg text-gray-800 bg-transparent",placeholder:"Min 6 chars"}),h.jsx("button",{onClick:()=>X(!q),className:"text-gray-400 hover:text-gray-600",children:q?h.jsx(yp,{size:18}):h.jsx(vp,{size:18})})]})]}),h.jsx("button",{onClick:se,disabled:d||!T,className:"w-full bg-green-600 text-white py-5 rounded-xl font-black text-xl shadow-xl mt-6 hover:bg-green-700 transition transform hover:scale-[1.01]",children:d?h.jsx(Ia,{className:"animate-spin mx-auto w-8 h-8"}):"Create Account"})]}):re():h.jsxs("div",{className:"space-y-4",children:[te==="owner"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Full Name"}),h.jsx("input",{type:"text",value:ae,onChange:Q=>de(Q.target.value),className:"w-full py-3 border-b-2 border-gray-200 outline-none font-bold text-gray-800 bg-transparent",placeholder:"Enter your name"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Vehicle Number"}),h.jsx("input",{type:"text",value:fe,onChange:Q=>Oe(Q.target.value),className:"w-full py-3 border-b-2 border-gray-200 outline-none font-bold text-gray-800 uppercase bg-transparent",placeholder:"JK-10-XXXX"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Vehicle Type"}),h.jsx("select",{value:ge,onChange:Q=>k(Q.target.value),className:"w-full py-3 border-b-2 border-gray-200 outline-none font-bold text-gray-800 bg-transparent",children:gd.map(Q=>h.jsx("option",{value:Q.type,children:Q.type},Q.type))})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Mobile Number"}),h.jsxs("div",{className:"flex items-center border-b-2 border-gray-200 py-2",children:[h.jsx("span",{className:"text-gray-800 font-bold mr-3",children:"+91"}),h.jsx("input",{type:"tel",value:x,onChange:Q=>w(Q.target.value.replace(/\D/g,"")),className:"flex-1 outline-none font-bold text-xl text-black bg-transparent",placeholder:"99999 99999",maxLength:10})]})]}),h.jsx("button",{onClick:we,disabled:d||x.length<10||te==="owner"&&(!ae||!fe),className:"w-full bg-green-600 text-white py-5 rounded-xl font-black text-xl shadow-xl mt-6 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-700 transition transform hover:scale-[1.01]",children:d?h.jsx(Ia,{className:"animate-spin mx-auto w-8 h-8"}):"Verify & Register"})]})]}),le=()=>h.jsxs("div",{className:"animate-in fade-in slide-in-from-right duration-300",children:[h.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Reset Password"}),C?I?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"New Password"}),h.jsxs("div",{className:"flex items-center border-b-2 border-gray-200 py-2",children:[h.jsx(_p,{size:18,className:"text-gray-400 mr-2"}),h.jsx("input",{type:q?"text":"password",value:T,onChange:te=>D(te.target.value),className:"flex-1 outline-none font-bold text-lg text-gray-800 bg-transparent",placeholder:"Min 6 chars"}),h.jsx("button",{onClick:()=>X(!q),className:"text-gray-400 hover:text-gray-600",children:q?h.jsx(yp,{size:18}):h.jsx(vp,{size:18})})]})]}),h.jsx("button",{onClick:me,disabled:d||!T,className:"w-full bg-[#E02E49] text-white py-4 rounded-xl font-bold text-lg shadow-lg mt-4",children:d?h.jsx(Ia,{className:"animate-spin mx-auto"}):"Reset Password"})]}):re():h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Mobile Number"}),h.jsxs("div",{className:"flex items-center border-b-2 border-gray-200 py-2",children:[h.jsx("span",{className:"text-gray-800 font-bold mr-3",children:"+91"}),h.jsx("input",{type:"tel",value:x,onChange:te=>w(te.target.value.replace(/\D/g,"")),className:"flex-1 outline-none font-bold text-xl text-black bg-transparent",placeholder:"99999 99999",maxLength:10})]})]}),h.jsx("button",{onClick:we,disabled:d||x.length<10,className:"w-full bg-[#E02E49] text-white py-4 rounded-xl font-bold text-lg shadow-lg mt-4",children:d?h.jsx(Ia,{className:"animate-spin mx-auto"}):"Send OTP"})]})]}),re=()=>h.jsxs("div",{className:"animate-in fade-in slide-in-from-right duration-300",children:[h.jsxs("p",{className:"text-gray-400 text-sm mb-8",children:["Enter OTP sent to ",h.jsxs("span",{className:"font-bold text-gray-800",children:["+91 ",x]})]}),h.jsx("div",{className:"flex justify-between gap-2 mb-8",children:U.map((te,Q)=>h.jsx("input",{type:"text",maxLength:1,value:te,onChange:ce=>Se(ce.target,Q),name:`otp-${Q}`,className:"w-10 h-10 border-2 border-gray-200 rounded-xl text-center text-lg font-bold focus:border-mmt-blue outline-none bg-white text-black"},Q))}),h.jsx("button",{onClick:be,disabled:d,className:"w-full bg-[#E02E49] text-white py-4 rounded-xl font-bold text-lg shadow-lg",children:d?h.jsx(Ia,{className:"animate-spin mx-auto"}):"Verify OTP"})]});return h.jsxs("div",{className:"min-h-screen bg-[var(--login-bg)] flex flex-col relative",children:[h.jsx("div",{id:"recaptcha-container"}),h.jsx("div",{className:"h-[40vh] bg-violet-700 relative overflow-hidden rounded-b-[40px] shadow-2xl flex items-center justify-center transition-all duration-500",children:h.jsxs("div",{className:"text-center text-white pb-10",children:[h.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-md p-3 rounded-full mb-4 border border-white/30 mx-auto flex items-center justify-center",children:h.jsx(pd,{className:"text-white",size:32,fill:"currentColor"})}),h.jsx("h1",{className:"text-3xl font-extrabold tracking-tight",children:"Taxi Booking Ladakh"}),h.jsx("p",{className:"text-white/80 text-xs font-bold uppercase tracking-widest mt-1",children:"Your Journey Begins Here"})]})}),h.jsx("div",{className:"flex-1 px-6 -mt-16 relative z-20 pb-10",children:h.jsxs("div",{className:"bg-[var(--login-input-bg)] rounded-[2rem] shadow-floating p-8 min-h-[400px]",children:[o!=="WELCOME"&&h.jsxs("button",{onClick:()=>{N(),c("WELCOME"),R(null),y(null)},className:"mb-4 text-gray-400 hover:text-gray-600 flex items-center gap-1 text-xs font-bold uppercase",children:[h.jsx(eu,{size:14})," Back"]}),g&&h.jsxs("div",{className:"mb-4 bg-red-50 text-[var(--login-error)] p-3 rounded-xl text-xs font-bold flex items-center gap-2 border border-[var(--login-error)]/20",children:[h.jsx(jT,{size:16})," ",g]}),o==="WELCOME"&&Ve(),o==="LOGIN"&&j(),o==="REGISTER_PASSENGER"&&G("passenger"),o==="REGISTER_DRIVER"&&G("owner"),o==="FORGOT_PASSWORD"&&le()]})})]})},wp=({title:s,subtitle:e,showBack:n,onBack:r,rightAction:o,theme:c="dark",onProfileClick:d})=>h.jsxs("div",{className:`flex items-center p-4 sticky top-0 z-50 shadow-md ${c==="dark"?"bg-violet-600 text-white":"bg-white text-gray-800"}`,children:[n&&h.jsx("button",{onClick:r,className:"mr-3 p-1 rounded-full hover:bg-black/10 transition",children:h.jsx(il,{className:"rotate-180",size:28})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h1",{className:"text-xl font-black leading-tight",children:s}),e&&h.jsx("p",{className:`text-sm font-bold mt-0.5 ${c==="dark"?"text-white/90":"text-gray-500"}`,children:e})]}),o||h.jsx("button",{onClick:d,className:`p-2 rounded-full ${c==="dark"?"bg-white/20 hover:bg-white/30":"bg-gray-100 hover:bg-gray-200"} transition`,children:h.jsx(ka,{size:24,className:c==="dark"?"text-white":"text-gray-600"})})]}),IM=()=>{const s=()=>{confirm("EMERGENCY ALERT: Are you sure you want to call emergency services?")&&(window.location.href="tel:112",alert("Calling Emergency Services (112)... and notifying trusted contacts."))};return h.jsx("button",{onClick:s,className:"fixed top-24 right-4 z-[100] bg-red-600 text-white p-3 rounded-full shadow-lg animate-pulse hover:bg-red-700 transition-all border-4 border-red-200",children:h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx(dM,{size:24,fill:"currentColor"}),h.jsx("span",{className:"text-[10px] font-black",children:"SOS"})]})})},UT=({tripId:s,onBack:e})=>{const{trips:n,user:r,sendMessage:o}=xs(),[c,d]=ie.useState(""),p=ie.useRef(null),g=n.find(T=>T.id===s),y=(r==null?void 0:r.role)==="passenger"?g==null?void 0:g.driverName:g==null?void 0:g.passengerId,x=()=>{var T;(T=p.current)==null||T.scrollIntoView({behavior:"smooth"})};ie.useEffect(()=>{x()},[g==null?void 0:g.messages]);const w=()=>{c.trim()&&(o(s,c),d(""))};return g?h.jsxs("div",{className:"flex flex-col h-screen bg-gray-100",children:[h.jsxs("div",{className:"bg-white p-4 shadow-sm flex items-center gap-3 sticky top-0 z-50",children:[h.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition",children:h.jsx(eu,{size:24,className:"text-gray-600"})}),h.jsxs("div",{children:[h.jsx("h2",{className:"font-bold text-gray-800",children:y}),(r==null?void 0:r.role)==="passenger"&&(g==null?void 0:g.driverMobile)&&h.jsxs("p",{className:"text-xs text-gray-500 font-medium",children:[g.vehicleNo,"  +91 ",g.driverMobile]}),h.jsxs("p",{className:"text-[10px] text-green-600 flex items-center gap-1 mt-0.5",children:[h.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})," Active Trip"]})]})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-[#e5ddd5]",children:[g.messages&&g.messages.length>0?g.messages.map(T=>{const D=T.senderId===(r==null?void 0:r.name);return h.jsx("div",{className:`flex ${D?"justify-end":"justify-start"}`,children:h.jsxs("div",{className:`max-w-[80%] p-3 rounded-2xl text-sm shadow-sm relative ${D?"bg-[#dcf8c6] text-gray-800 rounded-tr-none":"bg-white text-gray-800 rounded-tl-none"}`,children:[h.jsx("p",{children:T.text}),h.jsx("p",{className:"text-[10px] mt-1 text-right text-gray-400",children:new Date(T.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},T.id)}):h.jsx("div",{className:"text-center mt-10",children:h.jsxs("div",{className:"bg-white/60 inline-block px-4 py-2 rounded-lg text-xs text-gray-500 shadow-sm",children:["Start chatting with your ",(r==null?void 0:r.role)==="passenger"?"driver":"passenger"]})}),h.jsx("div",{ref:p})]}),h.jsx("div",{className:"p-3 bg-white border-t border-gray-100 pb-8",children:h.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 px-2 py-2 rounded-3xl",children:[h.jsx("input",{type:"text",value:c,onChange:T=>d(T.target.value),onKeyPress:T=>T.key==="Enter"&&w(),placeholder:"Type a message...",className:"flex-1 bg-transparent px-4 py-2 outline-none text-sm text-gray-800"}),h.jsx("button",{onClick:w,disabled:!c.trim(),className:`p-3 rounded-full text-white shadow-md transition transform active:scale-95 ${c.trim()?"bg-blue-600 hover:bg-blue-700":"bg-gray-400"}`,children:h.jsx(LT,{size:18})})]})})]}):null},CM=({label:s,selectedDate:e,onDateSelect:n,isDark:r=!1})=>{const[o,c]=ie.useState(!1),[d,p]=ie.useState(new Date(e||new Date)),g=ae=>new Date(ae.getFullYear(),ae.getMonth()+1,0).getDate(),y=ae=>new Date(ae.getFullYear(),ae.getMonth(),1).getDay(),x=ae=>{const de=new Date(d.getFullYear(),d.getMonth(),ae),fe=de.getTimezoneOffset(),ge=new Date(de.getTime()-fe*60*1e3).toISOString().split("T")[0];n(ge),c(!1)},w=()=>p(new Date(d.getFullYear(),d.getMonth()+1,1)),T=()=>p(new Date(d.getFullYear(),d.getMonth()-1,1)),D=["January","February","March","April","May","June","July","August","September","October","November","December"],q=()=>{const ae=g(d),de=y(d),fe=Array(de).fill(null),Oe=Array.from({length:ae},(ge,k)=>k+1);return[...fe,...Oe]},X=new Date(e),U=X.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"}),oe=X.toLocaleDateString("en-GB",{weekday:"long"});return h.jsxs("div",{className:"relative",children:[h.jsxs("div",{onClick:()=>c(!0),className:"cursor-pointer",children:[h.jsx("span",{className:"text-[10px] text-gray-400 font-bold tracking-wider uppercase mb-1 block flex items-center gap-1",children:s}),h.jsxs("div",{className:"flex items-baseline gap-2",children:[h.jsx("span",{className:`font-bold text-xl ${r?"text-white":"text-gray-800"}`,children:U.split(" ")[0]}),h.jsx("span",{className:`text-lg font-medium ${r?"text-gray-200":"text-gray-600"}`,children:U.split(" ")[1]}),h.jsxs("span",{className:"text-lg text-gray-400",children:["'",U.split(" ")[2]]})]}),h.jsx("p",{className:"text-xs mt-0.5 text-gray-400",children:oe})]}),o&&h.jsx("div",{className:"fixed inset-0 z-[70] flex items-end md:items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:h.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden animate-in slide-in-from-bottom-10 duration-300",children:[h.jsxs("div",{className:"bg-gradient-to-r from-mmt-red to-mmt-darkRed p-4 flex justify-between items-center text-white",children:[h.jsx("h3",{className:"font-bold",children:"Select Date"}),h.jsx("button",{onClick:ae=>{ae.stopPropagation(),c(!1)},className:"p-1 hover:bg-white/20 rounded-full",children:h.jsx(Dr,{size:20})})]}),h.jsxs("div",{className:"p-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("button",{onClick:T,className:"p-2 hover:bg-gray-100 rounded-full text-gray-600",children:h.jsx(eu,{size:20})}),h.jsxs("span",{className:"font-bold text-gray-800",children:[D[d.getMonth()]," ",d.getFullYear()]}),h.jsx("button",{onClick:w,className:"p-2 hover:bg-gray-100 rounded-full text-gray-600",children:h.jsx(il,{size:20})})]}),h.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(ae=>h.jsx("div",{className:"text-center text-xs font-bold text-gray-400 py-2",children:ae},ae))}),h.jsx("div",{className:"grid grid-cols-7 gap-1",children:q().map((ae,de)=>{if(!ae)return h.jsx("div",{className:"h-10"},de);const fe=new Date(d.getFullYear(),d.getMonth(),ae),Oe=new Date;Oe.setHours(0,0,0,0);const ge=fe.getTimezoneOffset(),I=new Date(fe.getTime()-ge*60*1e3).toISOString().split("T")[0],A=I===e,C=I===new Date().toISOString().split("T")[0],R=fe<Oe;return h.jsx("button",{disabled:R,onClick:()=>x(ae),className:`h-10 rounded-lg flex items-center justify-center text-sm font-medium transition-all
                        ${A?"bg-mmt-red text-white font-bold shadow-md":""}
                        ${!A&&C?"border border-mmt-red text-mmt-red":""}
                        ${!A&&!R?"hover:bg-gray-100 text-gray-800":""}
                        ${R?"text-gray-300 cursor-not-allowed":""}
                      `,children:ae},de)})}),h.jsx("button",{onClick:()=>c(!1),className:"w-full mt-6 py-3 rounded-xl bg-gray-100 text-gray-600 font-bold hover:bg-gray-200",children:"Cancel"})]})]})})]})},DM=({isOpen:s,onClose:e,onNavigate:n})=>{var g;const{user:r,logout:o}=xs(),c=(r==null?void 0:r.role)==="owner",d=c?"bg-[var(--driver-bg)]":"bg-[var(--pass-primary)]",p=c?"group-hover:text-[#7209b7]":"group-hover:text-[var(--pass-primary)]";return s?h.jsxs("div",{className:"fixed inset-0 z-[100] flex",children:[h.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:e}),h.jsxs("div",{className:"relative w-[80%] max-w-xs bg-white h-full shadow-2xl animate-in slide-in-from-left duration-300 flex flex-col",children:[h.jsxs("div",{className:`${d} p-6 text-white pt-12`,children:[h.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-white/10 rounded-full hover:bg-white/20 transition",children:h.jsx(Dr,{size:20})}),h.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[h.jsx("div",{className:"w-16 h-16 bg-white rounded-full p-1 shadow-lg",children:h.jsx("div",{className:"w-full h-full bg-gray-100 rounded-full flex items-center justify-center text-gray-400 font-bold text-xl overflow-hidden",children:r!=null&&r.profileImage?h.jsx("img",{src:r.profileImage,alt:"Profile",className:"w-full h-full object-cover"}):((g=r==null?void 0:r.name)==null?void 0:g.charAt(0))||"U"})}),h.jsxs("div",{children:[h.jsx("h2",{className:"font-bold text-xl",children:(r==null?void 0:r.name)||"Guest"}),h.jsx("p",{className:"text-xs text-red-100 opacity-90",children:r==null?void 0:r.mobile})]})]}),(r==null?void 0:r.role)==="owner"&&h.jsx("span",{className:"inline-block bg-white/20 px-2 py-0.5 rounded text-[10px] font-bold uppercase border border-white/10",children:"Vehicle Owner"})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto py-4",children:[h.jsx(Ep,{icon:h.jsx(ka,{size:20}),label:"My Profile",onClick:()=>{n("profile"),e()},hoverClass:p}),h.jsx(Ep,{icon:h.jsx(bM,{size:20}),label:"My Trips",onClick:()=>{n("history"),e()},hoverClass:p}),h.jsx("div",{className:"my-2 border-t border-gray-100"}),h.jsx(Ep,{icon:h.jsx(UO,{size:20}),label:"Help & Support",onClick:()=>{n("support"),e()},hoverClass:p})]}),h.jsxs("div",{className:"p-6 border-t border-gray-100",children:[h.jsxs("button",{onClick:()=>{o(),e()},className:"w-full flex items-center justify-center gap-2 bg-[#E02E49] text-black py-4 rounded-xl font-bold shadow-lg hover:bg-red-600 transition",children:[h.jsx(Fd,{size:18})," Sign Out"]}),h.jsx("p",{className:"text-center text-[10px] text-gray-300 mt-4 uppercase tracking-widest",children:"Taxi Booking Ladakh v2.0"})]})]})]}):null},Ep=({icon:s,label:e,onClick:n,hoverClass:r})=>h.jsxs("button",{onClick:n,className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition group",children:[h.jsxs("div",{className:`flex items-center gap-4 text-gray-600 ${r}`,children:[s,h.jsx("span",{className:"font-bold text-sm",children:e})]}),h.jsx(il,{size:16,className:`text-gray-300 ${r}`})]}),jM=({trip:s,onClose:e})=>h.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[h.jsxs("div",{className:"bg-gray-50 p-4 flex items-center justify-between border-b border-gray-100",children:[h.jsx("h3",{className:"font-bold text-gray-800",children:"Trip Invoice"}),h.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-200 rounded-full transition",children:h.jsx(Dr,{size:20})})]}),h.jsxs("div",{className:"p-4 space-y-4",id:"invoice-content",children:[h.jsxs("div",{className:"text-center border-b border-gray-100 pb-4",children:[h.jsx("h1",{className:"text-2xl font-black text-violet-600 tracking-tight uppercase",children:"LADAKH TAXI"}),h.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest mt-0.5",children:"Official Receipt"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold mb-0.5",children:"Passenger"}),h.jsx("p",{className:"font-bold text-gray-800 text-xs",children:s.passengerId}),h.jsxs("p",{className:"text-[10px] text-gray-500 font-mono",children:["+91 ",s.passengerMobile||"N/A"]}),h.jsxs("p",{className:"text-[9px] text-gray-400 mt-0.5",children:["#",s.id.slice(0,8).toUpperCase()]})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold mb-0.5",children:"Driver"}),h.jsx("p",{className:"font-bold text-gray-800 text-xs",children:s.driverName}),h.jsxs("p",{className:"text-[10px] text-gray-500 font-mono",children:["+91 ",s.driverMobile||"N/A"]}),h.jsxs("p",{className:"text-[9px] text-gray-500 mt-0.5",children:[s.vehicleType," ",h.jsx("span",{className:"font-black text-gray-800",children:s.vehicleNo})]})]})]}),h.jsxs("div",{className:"flex justify-between items-center border-t border-gray-100 pt-3",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Date"}),h.jsx("p",{className:"font-bold text-gray-800 text-sm",children:new Date(s.date).toLocaleDateString()})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Time"}),h.jsx("p",{className:"font-bold text-gray-800 text-sm",children:s.time||"N/A"})]})]}),h.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),h.jsx("p",{className:"font-bold text-gray-700 text-sm",children:s.from})]}),h.jsx("div",{className:"border-l-2 border-gray-200 h-3 ml-0.5"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),h.jsx("p",{className:"font-bold text-gray-700 text-sm",children:s.to})]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsxs("div",{className:"flex justify-between text-xs",children:[h.jsx("span",{className:"text-gray-500",children:"Base Fare"}),h.jsxs("span",{className:"font-bold",children:["",s.cost]})]}),h.jsxs("div",{className:"flex justify-between text-xs",children:[h.jsx("span",{className:"text-gray-500",children:"Taxes & Fees"}),h.jsx("span",{className:"font-bold",children:"0"})]}),h.jsx("div",{className:"border-t border-dashed border-gray-200 my-2"}),h.jsxs("div",{className:"flex justify-between text-base",children:[h.jsx("span",{className:"font-bold text-gray-800",children:"Total Paid"}),h.jsxs("span",{className:"font-extrabold text-blue-600",children:["",s.cost]})]})]})]}),h.jsxs("div",{className:"p-3 border-t border-gray-100 bg-gray-50 flex gap-3",children:[h.jsx("button",{onClick:e,className:"flex-1 bg-blue-600 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-blue-700 transition shadow-lg shadow-blue-200",children:"Completed"}),h.jsx("button",{onClick:()=>window.print(),className:"px-4 py-3 bg-white text-gray-600 border border-gray-200 rounded-xl font-bold hover:bg-gray-50 transition",children:h.jsx(aM,{size:18})})]})]})}),kM=({trips:s,onChat:e})=>{const{updateTripStatus:n,rateTrip:r,confirmRideCompletion:o}=xs(),[c,d]=ie.useState("UPCOMING"),[p,g]=ie.useState(null),[y,x]=ie.useState(null),{user:w}=xs(),T=s.filter(D=>D.passengerUid===(w==null?void 0:w.uid)).filter(D=>c==="UPCOMING"?D.status==="BOOKED"||D.status==="WAITING_CONFIRMATION"||D.status==="CONFIRMED"||D.status==="EN_ROUTE"||D.status==="ARRIVED":c==="COMPLETED"?D.status==="COMPLETED":c==="CANCELLED"?D.status==="CANCELLED":!1);return h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"flex bg-gray-100 p-1.5 rounded-2xl shadow-inner overflow-x-auto no-scrollbar gap-2",children:["UPCOMING","COMPLETED","CANCELLED"].map(D=>h.jsx("button",{onClick:()=>d(D),className:`flex-1 py-4 px-4 rounded-xl text-sm font-black transition-all whitespace-nowrap uppercase tracking-wide ${c===D?"bg-white shadow-md text-[var(--pass-primary)] scale-105":"text-gray-400 hover:text-gray-600 hover:bg-white/50"}`,children:D},D))}),h.jsx("div",{className:"space-y-4 pb-20",children:T.length===0?h.jsxs("div",{className:"text-center py-10",children:[h.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:h.jsx(kT,{className:"text-gray-300",size:24})}),h.jsxs("p",{className:"text-gray-400 text-sm font-medium",children:["No ",c.toLowerCase()," bookings found."]})]}):T.map(D=>{var q;return h.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:[h.jsx("div",{className:"flex justify-between items-start mb-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[D.status==="COMPLETED"||c==="COMPLETED"?h.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600 shadow-sm shadow-blue-200"}),h.jsx("span",{className:"text-sm font-bold text-blue-600",children:"Completed"})]}):["CANCELLED","REJECTED"].includes(D.status)||c==="CANCELLED"?h.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h.jsx("div",{className:"w-3 h-3 rounded-full bg-red-600 shadow-sm shadow-red-200"}),h.jsx("span",{className:"text-sm font-bold text-red-600",children:"Cancelled"})]}):["CONFIRMED","EN_ROUTE","ARRIVED"].includes(D.status)?h.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 shadow-sm shadow-green-200 animate-pulse"}),h.jsx("span",{className:"text-sm font-bold text-green-600",children:"Confirmed"})]}):h.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400"}),h.jsx("span",{className:"text-sm font-bold text-gray-500",children:"Waiting Confirmation"})]}),h.jsxs("span",{className:"text-xs text-gray-400 font-mono absolute top-2 right-2",children:["#",D.id.slice(0,6).toUpperCase()]})]})}),h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsxs("div",{className:"flex flex-col items-center gap-1",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),h.jsx("div",{className:"w-0.5 h-8 bg-gray-200 border-l border-dashed"}),h.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"})]}),h.jsxs("div",{className:"flex-1 space-y-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-bold text-gray-800",children:D.from}),h.jsx("p",{className:"text-xs text-gray-400",children:new Date(D.date).toLocaleDateString()})]}),h.jsx("div",{children:h.jsx("p",{className:"font-bold text-gray-800",children:D.to})})]})]}),h.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-50",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center font-bold text-xs text-gray-500",children:((q=D.driverName)==null?void 0:q[0])||"D"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-lg font-black text-gray-800",children:D.driverName||"Assigned Driver"}),h.jsxs("p",{className:"text-xs text-gray-600 font-bold mt-0.5",children:[D.vehicleNo,"  ",D.driverMobile||"No Mobile"]})]})]}),c==="UPCOMING"&&h.jsx("div",{className:"flex gap-4 items-center",children:D.status==="WAITING_CONFIRMATION"&&h.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to cancel this booking request?")&&n(D.id,"CANCELLED")},className:"text-red-500 hover:scale-110 transition p-2",children:h.jsx(BO,{size:20})})})]})]},D.id)})}),p&&h.jsx(jM,{trip:p,onClose:()=>g(null)}),y&&h.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:h.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 p-6 text-center",children:[h.jsx("h3",{className:"font-bold text-lg mb-2",children:"Rate your Driver"}),h.jsx("p",{className:"text-gray-500 text-xs mb-6",children:"How was your ride?"}),h.jsx("div",{className:"flex justify-center gap-2 mb-6",children:[1,2,3,4,5].map(D=>h.jsx("button",{onClick:()=>x({...y,rating:D}),className:"transition-all hover:scale-110",children:h.jsx(Gd,{size:32,fill:D<=y.rating?"#FFD700":"none",className:D<=y.rating?"text-yellow-400":"text-gray-300"})},D))}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>x(null),className:"flex-1 py-3 rounded-xl font-bold text-gray-500 hover:bg-gray-100 transition",children:"Skip"}),h.jsx("button",{onClick:()=>{r(y.tripId,y.rating),x(null),alert("Thanks for your feedback!")},className:"flex-1 bg-mmt-blue text-white py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transition",children:"Submit"})]})]})})]})},qx=({onBack:s,onNavigate:e})=>{const{user:n,passengerBalance:r,depositToWallet:o,updateUser:c,logout:d,deleteAccount:p,trips:g}=xs(),y=ie.useRef(null),x=T=>{var q;const D=(q=T.target.files)==null?void 0:q[0];if(D){const X=new FileReader;X.onloadend=()=>{c({profileImage:X.result})},X.readAsDataURL(D)}},w=()=>{var T;(T=y.current)==null||T.click()};return h.jsxs("div",{className:"bg-gray-50 min-h-screen pb-24 relative",children:[h.jsx("input",{type:"file",ref:y,className:"hidden",accept:"image/*",onChange:x}),h.jsxs("div",{className:"transition-all duration-500 ease-in-out h-[45vh] rounded-b-[40px] relative overflow-hidden shadow-lg group bg-[var(--pass-primary)]",children:[h.jsx("div",{className:"absolute bottom-0 left-0 w-full h-32 bg-gradient-to-t from-black/20 to-transparent"}),h.jsx("div",{className:"absolute bottom-0 left-0 w-full h-24 bg-white/10 skew-y-3 origin-bottom-left"}),h.jsx("div",{className:"absolute bottom-10 right-0 w-full h-24 bg-white/10 -skew-y-3 origin-bottom-right"}),h.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10 mix-blend-overlay"}),h.jsxs("div",{className:"p-6 pt-10 relative z-10 text-white",children:[h.jsx("div",{className:"flex justify-between items-start mb-6",children:h.jsx("button",{onClick:s,className:"bg-white/10 hover:bg-white/20 p-2 rounded-full backdrop-blur-md transition border border-white/10",children:h.jsx(kO,{className:"rotate-90 text-white"})})}),h.jsxs("div",{className:"flex flex-row items-center gap-6 mt-6 px-2",children:[h.jsxs("div",{className:"w-24 h-24 bg-white p-1 rounded-full shadow-2xl relative flex-shrink-0",children:[h.jsx("div",{className:"w-full h-full bg-gray-100 rounded-full overflow-hidden flex items-center justify-center relative shadow-inner",children:n!=null&&n.profileImage?h.jsx("img",{src:n.profileImage,alt:"Profile",className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center text-pass-primary text-3xl font-black",children:n==null?void 0:n.name.charAt(0)})}),h.jsx("button",{onClick:w,className:"absolute bottom-0 right-0 w-8 h-8 bg-black text-white border-2 border-white rounded-full flex items-center justify-center hover:bg-gray-800 transition shadow-lg",children:h.jsx(IO,{size:14})})]}),h.jsxs("div",{className:"text-left flex-1",children:[h.jsx("h1",{className:"text-2xl font-black leading-tight tracking-tight drop-shadow-md mb-2",children:n==null?void 0:n.name}),h.jsxs("div",{className:"flex flex-col items-start gap-1.5 opacity-90",children:[h.jsxs("p",{className:"text-white text-sm flex items-center gap-2 font-bold bg-white/10 px-3 py-1 rounded-lg backdrop-blur-sm",children:[h.jsx(dy,{size:14})," +91 ",n==null?void 0:n.mobile]}),h.jsxs("p",{className:"text-white text-xs flex items-center gap-2 font-medium bg-white/10 px-3 py-1 rounded-lg backdrop-blur-sm",children:[h.jsx(MT,{size:12})," ",(n==null?void 0:n.email)||"user@example.com"]})]})]})]})]})]}),h.jsxs("div",{className:"px-5 -mt-16 relative z-20 space-y-6 animate-in slide-in-from-bottom-10 duration-500 fade-in",children:[h.jsx("div",{className:"grid grid-cols-3 gap-3",children:(()=>{const T=g||[],D=T.filter(ae=>ae.status==="COMPLETED").length,q=T.filter(ae=>ae.status==="CANCELLED").length,X=D+q,U=X===0?100:Math.round(D/X*100);let oe="text-green-500";return U<70?oe="text-red-500":U<90&&(oe="text-yellow-500"),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-sm border border-gray-100 text-center",children:[h.jsx("p",{className:"text-xl font-black text-[var(--pass-primary)]",children:D}),h.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:"Completed"})]}),h.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-sm border border-gray-100 text-center",children:[h.jsx("p",{className:"text-xl font-black text-red-500",children:q}),h.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:"Cancelled"})]}),h.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-sm border border-gray-100 text-center",children:[h.jsxs("p",{className:`text-xl font-black ${oe}`,children:[U,"%"]}),h.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:"Honesty Score"})]})]})})()}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase mb-4 ml-2 tracking-wider",children:"My Toolkit"}),h.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[h.jsxs("button",{onClick:()=>e("edit-profile"),className:"bg-gradient-to-r from-green-600 to-emerald-600 p-5 rounded-3xl shadow-lg hover:shadow-xl transition flex items-center gap-4 text-left group relative overflow-hidden text-white",children:[h.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10 mix-blend-overlay"}),h.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center text-white group-hover:scale-110 transition relative z-10 backdrop-blur-sm",children:h.jsx(nM,{size:22})}),h.jsxs("div",{className:"relative z-10 flex-1",children:[h.jsx("h4",{className:"font-bold text-lg",children:"Edit Profile"}),h.jsx("p",{className:"text-xs text-white/80 font-medium",children:"Update your details"})]}),h.jsx(il,{className:"text-white/50"})]}),h.jsxs("button",{onClick:()=>e("gemini-chat"),className:"bg-gradient-to-r from-blue-600 to-purple-600 p-5 rounded-3xl shadow-lg hover:shadow-xl transition flex items-center gap-4 text-left group relative overflow-hidden text-white",children:[h.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10 mix-blend-overlay"}),h.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center text-white group-hover:scale-110 transition relative z-10 backdrop-blur-sm",children:h.jsx(DT,{size:24})}),h.jsxs("div",{className:"relative z-10 flex-1",children:[h.jsx("h4",{className:"font-bold text-lg",children:"Ask Me"}),h.jsx("p",{className:"text-xs text-white/80 font-medium",children:"AI Support Assistant"})]}),h.jsx(il,{className:"text-white/50"})]})]})]}),h.jsxs("div",{className:"pt-6 pb-8",children:[h.jsxs("button",{onClick:d,className:"w-full bg-[#E02E49] text-black py-5 rounded-2xl font-bold text-lg shadow-lg hover:bg-red-600 transition flex items-center justify-center gap-2",children:[h.jsx(Fd,{size:22})," LOGOUT"]}),h.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&p()},className:"w-full mt-4 text-red-500 py-3 rounded-2xl font-bold text-sm hover:bg-red-50 transition flex items-center justify-center gap-2",children:[h.jsx(ig,{size:18})," Delete Account"]}),h.jsx("p",{className:"text-xs font-bold text-gray-300 uppercase tracking-widest text-center mt-6",children:"Taxi Booking Ladakh v2.2"})]})]})]})},OM=({onBack:s})=>{const{user:e,updateUser:n}=xs(),[r,o]=ie.useState((e==null?void 0:e.name)||""),[c,d]=ie.useState((e==null?void 0:e.mobile)||""),[p,g]=ie.useState((e==null?void 0:e.email)||"user@example.com"),[y,x]=ie.useState(!1),[w,T]=ie.useState(null),[D,q]=ie.useState(!1),X=()=>r!==(e==null?void 0:e.name)||c!==(e==null?void 0:e.mobile)||p!==((e==null?void 0:e.email)||"user@example.com"),U=()=>{const ae=c!==(e==null?void 0:e.mobile),de=p!==((e==null?void 0:e.email)||"user@example.com");if((ae||de)&&!D){T(ae?"mobile":"email"),x(!0);return}n({name:r,mobile:c,email:p}),s()},oe=()=>{setTimeout(()=>{q(!0),x(!1),U()},1500)};return h.jsxs("div",{className:"bg-gray-50 min-h-screen pb-24 relative",children:[h.jsxs("div",{className:"bg-green-600 p-4 sticky top-0 z-50 shadow-md flex items-center gap-3 text-white",children:[h.jsx("button",{onClick:s,className:"p-2 hover:bg-white/10 rounded-full transition",children:h.jsx(eu,{size:24,className:"text-white"})}),h.jsx("h1",{className:"text-xl font-bold",children:"Edit Profile"})]}),h.jsxs("div",{className:"p-6 space-y-6 max-w-md mx-auto mt-4",children:[h.jsx("div",{className:"flex justify-center mb-6",children:h.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full overflow-hidden border-4 border-white shadow-lg",children:e!=null&&e.profileImage?h.jsx("img",{src:e.profileImage,alt:"Profile",className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-gray-500 font-bold text-2xl",children:r.charAt(0)})})}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"bg-violet-600 p-1 rounded-xl shadow-sm",children:h.jsxs("div",{className:"bg-white rounded-lg p-1",children:[h.jsx("label",{className:"block text-[10px] font-bold text-violet-600 uppercase mb-1 ml-2 mt-1",children:"Full Name"}),h.jsxs("div",{className:"relative",children:[h.jsx(ka,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),h.jsx("input",{value:r,onChange:ae=>o(ae.target.value),className:"w-full bg-transparent border-none py-2 pl-10 pr-4 text-gray-800 font-bold focus:ring-0 outline-none",placeholder:"Enter your full name"})]})]})}),h.jsx("div",{className:"bg-violet-600 p-1 rounded-xl shadow-sm",children:h.jsxs("div",{className:"bg-white rounded-lg p-1",children:[h.jsx("label",{className:"block text-[10px] font-bold text-violet-600 uppercase mb-1 ml-2 mt-1",children:"Mobile Number"}),h.jsxs("div",{className:"relative",children:[h.jsx(dy,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),h.jsx("input",{value:c,onChange:ae=>{d(ae.target.value),q(!1)},className:"w-full bg-transparent border-none py-2 pl-10 pr-4 text-gray-800 font-bold focus:ring-0 outline-none",placeholder:"Enter mobile number"}),c!==(e==null?void 0:e.mobile)&&h.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] font-bold text-orange-500 bg-orange-50 px-2 py-0.5 rounded-full border border-orange-200",children:"Verify Required"})]})]})}),h.jsx("div",{className:"bg-violet-600 p-1 rounded-xl shadow-sm",children:h.jsxs("div",{className:"bg-white rounded-lg p-1",children:[h.jsx("label",{className:"block text-[10px] font-bold text-violet-600 uppercase mb-1 ml-2 mt-1",children:"Email Address"}),h.jsxs("div",{className:"relative",children:[h.jsx(MT,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),h.jsx("input",{value:p,onChange:ae=>{g(ae.target.value),q(!1)},className:"w-full bg-transparent border-none py-2 pl-10 pr-4 text-gray-800 font-bold focus:ring-0 outline-none",placeholder:"Enter email address"}),p!==((e==null?void 0:e.email)||"user@example.com")&&h.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] font-bold text-orange-500 bg-orange-50 px-2 py-0.5 rounded-full border border-orange-200",children:"Verify Required"})]})]})})]}),h.jsxs("div",{className:"flex gap-3 pt-6",children:[h.jsx("button",{onClick:s,className:"flex-1 py-3.5 rounded-xl font-bold text-gray-500 bg-white border border-gray-200 hover:bg-gray-50 transition",children:"Cancel"}),h.jsxs("button",{onClick:U,disabled:!X(),className:"flex-1 py-3.5 rounded-xl font-bold text-white bg-green-600 shadow-lg hover:shadow-xl hover:opacity-90 transition flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsx(lM,{size:18})," Save Changes"]})]})]}),y&&h.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in",children:h.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 text-center shadow-2xl",children:[h.jsx("div",{className:"w-16 h-16 bg-violet-100 rounded-full flex items-center justify-center mx-auto mb-4 text-violet-600",children:h.jsx(mM,{size:32})}),h.jsx("h3",{className:"text-xl font-black text-gray-800 mb-2",children:"Verify Changes"}),h.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["You changed your ",w,". Please verify to save."]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("button",{onClick:oe,className:"w-full py-3 bg-black text-white font-bold rounded-xl shadow-lg hover:bg-gray-800 transition flex items-center justify-center gap-2",children:"Verify with OTP"}),h.jsxs("button",{onClick:oe,className:"w-full py-3 bg-white border border-gray-200 text-gray-700 font-bold rounded-xl hover:bg-gray-50 transition flex items-center justify-center gap-2",children:[h.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-5 h-5",alt:"Google"}),"Verify with Google"]}),h.jsx("button",{onClick:()=>x(!1),className:"w-full py-2 text-gray-400 font-bold text-xs hover:text-gray-600",children:"Cancel"})]})]})})]})},MM=({onBack:s})=>{const{user:e,trips:n}=xs(),[r,o]=ie.useState(""),[c,d]=ie.useState([{id:"1",text:`Hello ${(e==null?void 0:e.name)||"Traveler"}! I'm Gemini, your AI assistant for Taxi Booking Ladakh. How can I help you today?`,sender:"bot",timestamp:new Date}]),[p,g]=ie.useState(!1),y=ie.useRef(null),x=()=>{var D;(D=y.current)==null||D.scrollIntoView({behavior:"smooth"})};ie.useEffect(()=>{x()},[c]);const w=async()=>{if(!r.trim())return;const D={id:Date.now().toString(),text:r,sender:"user",timestamp:new Date};d(q=>[...q,D]),o(""),g(!0),setTimeout(()=>{const q=T(D.text),X={id:(Date.now()+1).toString(),text:q,sender:"bot",timestamp:new Date};d(U=>[...U,X]),g(!1)},1500)},T=D=>{const q=D.toLowerCase(),X=n.find(U=>U.status==="EN_ROUTE"||U.status==="BOOKED");if(q.includes("driver")||q.includes("contact")||q.includes("who")){if(X)return`Your driver is **${X.driverName}**. Contact: **+91 9906XXXXXX**. Vehicle: **${X.vehicleNo}**.`;const U=n.find(oe=>q.includes(oe.to.toLowerCase()));return U?`For your trip to ${U.to}, the driver was **${U.driverName}**.`:"I can give you driver details for your active or past trips. You currently don't have an active trip."}if(q.includes("trip")||q.includes("status")||q.includes("where")){if(X)return`You have an upcoming trip from **${X.from}** to **${X.to}**. Status: **${X.status}**.`;const U=n.filter(oe=>oe.status==="COMPLETED");return U.length>0?`You have completed ${U.length} trips. Your last trip was to **${U[0].to}**.`:"You don't have any active trips. Check 'Upcoming Rides' to book one!"}return q.includes("available")||q.includes("rides")||q.includes("cabs")?`We currently have multiple drivers available across Ladakh. I can see ${n.length} records in your history. Search for a destination to see live cabs.`:q.includes("cancel")||q.includes("refund")?"To cancel, go to 'My Trips'. Refunds are processed to your wallet instantly.":q.includes("hello")||q.includes("hi")?`Hello ${(e==null?void 0:e.name)||"Traveler"}! I have access to our driver network and your trip history. Ask me anything!`:"I can help with driver details, trip status, or booking info. I have access to the full Ladakh Connect network."};return h.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[h.jsxs("div",{className:"bg-white p-4 shadow-sm flex items-center gap-3 sticky top-0 z-10",children:[h.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition",children:h.jsx(eu,{size:24,className:"text-gray-600"})}),h.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white shadow-md",children:h.jsx(DT,{size:20})}),h.jsxs("div",{children:[h.jsx("h1",{className:"font-bold text-gray-800 text-lg",children:"Gemini Support"}),h.jsxs("p",{className:"text-xs text-green-500 font-medium flex items-center gap-1",children:[h.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})," Online"]})]})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.map(D=>h.jsx("div",{className:`flex ${D.sender==="user"?"justify-end":"justify-start"}`,children:h.jsxs("div",{className:`max-w-[80%] p-3 rounded-2xl text-sm shadow-sm ${D.sender==="user"?"bg-black text-white rounded-br-none":"bg-white text-gray-800 border border-gray-100 rounded-bl-none"}`,children:[h.jsx("div",{dangerouslySetInnerHTML:{__html:D.text.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>")}}),h.jsx("p",{className:`text-[10px] mt-1 text-right ${D.sender==="user"?"text-white/50":"text-gray-400"}`,children:D.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},D.id)),p&&h.jsx("div",{className:"flex justify-start",children:h.jsxs("div",{className:"bg-white border border-gray-100 p-3 rounded-2xl rounded-bl-none shadow-sm flex gap-1",children:[h.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),h.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-75"}),h.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-150"})]})}),h.jsx("div",{ref:y})]}),h.jsx("div",{className:"p-4 bg-white border-t border-gray-100",children:h.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded-full border border-gray-200 focus-within:border-black/30 transition",children:[h.jsx("input",{type:"text",value:r,onChange:D=>o(D.target.value),onKeyPress:D=>D.key==="Enter"&&w(),placeholder:"Ask about your driver, trip...",className:"flex-1 bg-transparent px-3 py-1 focus:outline-none text-sm"}),h.jsx("button",{onClick:w,disabled:!r.trim(),className:"w-10 h-10 bg-black text-white rounded-full flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-800 transition shadow-md",children:h.jsx(LT,{size:18})})]})})]})},Tp=({status:s,seatNum:e,onClick:n})=>{const r=s==="driver",o=s==="booked",c=s==="selected",d=r?"#4a4a4a":o?"#d1d5db":c?"#22c55e":"url(#leatherGradient)",p=r?"#2d2d2d":o?"#9ca3af":c?"#16a34a":"#C7B299",g=c?"white":o?"#9ca3af":"#8B735B";return h.jsxs("div",{onClick:!r&&!o?n:void 0,className:`relative w-16 h-20 flex flex-col items-center justify-center transition-transform duration-200 
        ${!r&&!o&&s!=="unavailable"?"cursor-pointer active:scale-95":""} 
        ${c?"scale-105":""}
        ${o||s==="unavailable"?"opacity-40 cursor-not-allowed grayscale":""}
      `,children:[h.jsxs("svg",{viewBox:"0 0 100 120",className:"w-full h-full drop-shadow-md",children:[h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"leatherGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",style:{stopColor:"#F5E6D3",stopOpacity:1}}),h.jsx("stop",{offset:"100%",style:{stopColor:"#DBC3A3",stopOpacity:1}})]}),h.jsxs("filter",{id:"insetShadow",children:[h.jsx("feOffset",{dx:"0",dy:"2"}),h.jsx("feGaussianBlur",{stdDeviation:"2",result:"offset-blur"}),h.jsx("feComposite",{operator:"out",in:"SourceGraphic",in2:"offset-blur",result:"inverse"}),h.jsx("feFlood",{floodColor:"black",floodOpacity:"0.2",result:"color"}),h.jsx("feComposite",{operator:"in",in:"color",in2:"inverse",result:"shadow"}),h.jsx("feComposite",{operator:"over",in:"shadow",in2:"SourceGraphic"})]})]}),h.jsx("path",{d:"M20 15 Q20 5 50 5 Q80 5 80 15 L80 25 Q80 32 50 32 Q20 32 20 25 Z",fill:d,stroke:p,strokeWidth:"1.5"}),h.jsx("path",{d:"M10 40 Q10 30 20 30 L80 30 Q90 30 90 40 L95 100 Q95 110 85 110 L15 110 Q5 110 5 100 Z",fill:d,stroke:p,strokeWidth:"1.5"}),!r&&!o&&!c&&h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M30 30 L30 110",stroke:p,strokeWidth:"0.5",strokeDasharray:"2,2",opacity:"0.5"}),h.jsx("path",{d:"M70 30 L70 110",stroke:p,strokeWidth:"0.5",strokeDasharray:"2,2",opacity:"0.5"}),h.jsx("path",{d:"M10 70 Q50 80 90 70",stroke:p,strokeWidth:"1",opacity:"0.3",fill:"none"})]}),!r&&h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M5 50 L2 80",stroke:p,strokeWidth:"2",opacity:"0.4",fill:"none"}),h.jsx("path",{d:"M95 50 L98 80",stroke:p,strokeWidth:"2",opacity:"0.4",fill:"none"})]}),r&&h.jsx("circle",{cx:"50",cy:"70",r:"25",fill:"none",stroke:"#999",strokeWidth:"4"}),r&&h.jsx("path",{d:"M50 70 L28 85 M50 70 L72 85 M50 70 L50 45",stroke:"#999",strokeWidth:"4"})]}),!r&&h.jsx("span",{className:`absolute top-[60%] left-1/2 -translate-x-1/2 -translate-y-1/2 font-black text-sm ${g}`,children:o?h.jsx("span",{className:"text-[10px] uppercase",children:"Booked"}):e})]})},VM=({isOpen:s,onClose:e,filters:n,setFilters:r,maxPriceLimit:o})=>{if(!s)return null;const c=(d,p)=>d.includes(p)?d.filter(g=>g!==p):[...d,p];return h.jsx("div",{className:"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 backdrop-blur-sm",children:h.jsxs("div",{className:"bg-white w-full max-w-lg rounded-t-3xl shadow-2xl animate-in slide-in-from-bottom duration-300 flex flex-col max-h-[90vh]",children:[h.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center",children:[h.jsx("h3",{className:"font-bold text-lg text-gray-800",children:"Filter & Sort"}),h.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full",children:h.jsx(Dr,{size:20})})]}),h.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-bold text-gray-400 uppercase mb-3",children:"Vehicle Type"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:["Innova Crysta","Mahindra Xylo","Toyota Innova","Tempo Traveler"].map(d=>h.jsx("button",{onClick:()=>r({...n,vehicleTypes:c(n.vehicleTypes,d)}),className:`px-4 py-2 rounded-full text-xs font-bold border transition
                    ${n.vehicleTypes.includes(d)?"bg-mmt-blue text-white border-mmt-blue":"bg-white text-gray-600 border-gray-200"}
                  `,children:d},d))})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-bold text-gray-400 uppercase mb-3",children:"Departure Time"}),h.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{label:"Morning",icon:h.jsx(gp,{size:14}),sub:"6AM - 12PM"},{label:"Afternoon",icon:h.jsx(gp,{size:14}),sub:"12PM - 6PM"},{label:"Evening",icon:h.jsx(gp,{size:14}),sub:"After 6PM"}].map(d=>h.jsxs("button",{onClick:()=>r({...n,timeOfDay:c(n.timeOfDay,d.label)}),className:`p-3 rounded-xl border flex flex-col items-center justify-center gap-1 transition
                    ${n.timeOfDay.includes(d.label)?"bg-red-50 border-mmt-red text-mmt-red":"bg-white border-gray-200 text-gray-500"}
                  `,children:[d.icon,h.jsx("span",{className:"font-bold text-xs",children:d.label}),h.jsx("span",{className:"text-[9px] opacity-70",children:d.sub})]},d.label))})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-bold text-gray-400 uppercase mb-3",children:"Driver Rating"}),h.jsxs("button",{onClick:()=>r({...n,minRating4Plus:!n.minRating4Plus}),className:`w-full p-3 rounded-xl border flex items-center justify-between transition
                  ${n.minRating4Plus?"bg-yellow-50 border-yellow-400 text-yellow-700":"bg-white border-gray-200 text-gray-500"}
                `,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Gd,{size:16,className:n.minRating4Plus?"fill-yellow-500 text-yellow-500":""}),h.jsx("span",{className:"font-bold text-sm",children:"4+ Stars Only"})]}),n.minRating4Plus&&h.jsx(zo,{size:16})]})]})]}),h.jsxs("div",{className:"p-4 border-t border-gray-100 flex gap-3",children:[h.jsx("button",{onClick:()=>r({maxPrice:o,vehicleTypes:[],timeOfDay:[],minRating4Plus:!1,sortBy:"time"}),className:"flex-1 py-3 text-gray-500 font-bold hover:bg-gray-50 rounded-xl",children:"Clear All"}),h.jsx("button",{onClick:e,className:"flex-1 py-3 bg-gradient-to-r from-mmt-red to-mmt-darkRed text-white font-bold rounded-xl shadow-lg",children:"Apply Filters"})]})]})})},PM=()=>{const{passengerBalance:s,trips:e,bookTrip:n,user:r,logout:o,updateTripStatus:c,releaseFunds:d,rideOffers:p,depositToWallet:g,rateTrip:y,updateUser:x,confirmRideCompletion:w}=xs(),[T,D]=ie.useState("search"),[q,X]=ie.useState(!1),[U,oe]=ie.useState({from:"Leh",to:"Srinagar",date:new Date().toISOString().split("T")[0]}),[ae,de]=ie.useState(!1),[fe,Oe]=ie.useState({maxPrice:1e4,vehicleTypes:[],timeOfDay:[],minRating4Plus:!1,sortBy:"time"}),[ge,k]=ie.useState(null),[I,A]=ie.useState([]),[C,R]=ie.useState(null),[M,N]=ie.useState(null),[we,be]=ie.useState(!1);e.find(j=>j.status==="WAITING_CONFIRMATION"&&j.passengerUid===(r==null?void 0:r.uid));const F=()=>{oe(j=>({...j,from:j.to,to:j.from}))},se=()=>{const j=new Date,G=j.getFullYear()+"-"+String(j.getMonth()+1).padStart(2,"0")+"-"+String(j.getDate()).padStart(2,"0");return(()=>{const re=new Set;return p.forEach(te=>{var Q;te.date>=G&&te.totalSeats-(((Q=te.bookedSeats)==null?void 0:Q.length)||0)>0&&re.add(`${te.from}|${te.to}`)}),Array.from(re).map(te=>{const[Q,ce]=te.split("|"),Ne=p.filter(xe=>{var nt;return xe.from===Q&&xe.to===ce&&xe.date>=G&&xe.totalSeats-(((nt=xe.bookedSeats)==null?void 0:nt.length)||0)>0}).sort((xe,nt)=>{var tn,Bt;const Fe=xe.totalSeats-(((tn=xe.bookedSeats)==null?void 0:tn.length)||0),wt=nt.totalSeats-(((Bt=nt.bookedSeats)==null?void 0:Bt.length)||0);return Fe-wt}).slice(0,3);return{route:{from:Q,to:ce},offers:Ne}})})(),h.jsxs("div",{className:"bg-pass-bg min-h-screen pb-20",children:[h.jsxs("div",{className:"bg-[var(--pass-primary)] pb-16 pt-6 px-4 rounded-b-[2rem] relative shadow-lg overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -mr-16 -mt-16 pointer-events-none blur-3xl"}),h.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-black/10 rounded-full -ml-10 -mb-10 pointer-events-none blur-2xl"}),h.jsxs("div",{className:"flex justify-between items-center mb-6 text-white relative z-10",children:[h.jsx("button",{onClick:()=>X(!0),className:"flex items-center gap-2 hover:bg-white/10 p-2 rounded-lg transition",children:h.jsx(VT,{className:"text-white",size:24})}),h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-xs text-white/70 font-medium uppercase tracking-wider",children:"Welcome"}),h.jsx("span",{className:"font-bold text-lg leading-none",children:r==null?void 0:r.name.split(" ")[0]})]})]}),h.jsx("div",{className:"flex justify-center gap-4 mb-6 relative z-10",children:h.jsx("button",{onClick:()=>D("search"),className:"flex items-center justify-center px-8 py-3 rounded-full font-black text-xl transition-all bg-white text-green-700 shadow-xl border-2 border-green-500 w-full max-w-md mx-auto",children:h.jsx("span",{className:"uppercase tracking-widest",children:"TAXI BOOKING LADAKH"})})}),h.jsxs("div",{className:"text-white mb-6 relative z-10",children:[h.jsx("h1",{className:"text-3xl font-black drop-shadow-md",children:"Where to next?"}),h.jsx("p",{className:"text-white/80 text-sm mt-1",children:"Explore the Himalayas safely."})]})]}),h.jsx("div",{className:"px-4 -mt-12 relative z-10",children:h.jsxs("div",{className:"bg-[var(--pass-card)] rounded-2xl shadow-floating p-6 border border-gray-200",children:[h.jsxs("div",{className:"flex flex-col gap-5",children:[h.jsxs("div",{className:"relative border-b border-gray-100 pb-2 hover:border-pass-primary transition-colors",children:[h.jsxs("span",{className:"text-xs text-gray-400 font-bold tracking-wider uppercase flex items-center gap-1",children:[h.jsx(pd,{size:12})," From"]}),h.jsx("div",{className:"flex items-center justify-between mt-1",children:h.jsx("select",{className:"w-full font-black text-xl bg-transparent outline-none text-gray-800 py-1 appearance-none cursor-pointer",value:U.from,onChange:re=>oe({...U,from:re.target.value}),children:Bx.map(re=>h.jsx("option",{value:re,children:re},re))})}),h.jsx("p",{className:"text-xs text-gray-400 truncate mt-1",children:"Pick-up Location"})]}),h.jsx("div",{className:"absolute top-[32%] right-6 z-20",children:h.jsx("button",{onClick:F,className:"w-10 h-10 bg-pass-card rounded-full flex items-center justify-center text-pass-primary shadow-lg border border-gray-200 hover:scale-110 transition hover:bg-gray-50",children:h.jsx(xO,{size:16,className:"rotate-90"})})}),h.jsxs("div",{className:"relative border-b border-gray-100 pb-2 hover:border-pass-primary transition-colors",children:[h.jsxs("span",{className:"text-xs text-gray-400 font-bold tracking-wider uppercase flex items-center gap-1",children:[h.jsx(pd,{size:12})," To"]}),h.jsx("select",{className:"w-full font-black text-xl bg-transparent outline-none text-gray-800 py-1 appearance-none cursor-pointer mt-1",value:U.to,onChange:re=>oe({...U,to:re.target.value}),children:Bx.map(re=>h.jsx("option",{value:re,children:re},re))}),h.jsx("p",{className:"text-xs text-gray-400 truncate mt-1",children:"Drop-off Location"})]}),h.jsx("div",{className:"relative pb-2 hover:border-pass-primary transition-colors border-b border-transparent",children:h.jsx(CM,{label:"DEPARTURE DATE",selectedDate:U.date,onDateSelect:re=>oe({...U,date:re})})})]}),h.jsxs("button",{onClick:()=>D("results"),className:"w-full bg-[var(--pass-cta)] text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-95 transition-all mt-6 text-lg uppercase tracking-wide flex items-center justify-center gap-2",children:[h.jsx(PT,{size:20})," Search Cabs"]})]})})]})},me=({tripId:j,driverName:G,onClose:le})=>{const[re,te]=ie.useState(0),Q=()=>{y(j,re),le()};return h.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:h.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 text-center animate-in zoom-in-95 duration-200",children:[h.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"Rate your trip"}),h.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["How was your ride with ",h.jsx("span",{className:"font-bold text-gray-700",children:G}),"?"]}),h.jsx("div",{className:"flex justify-center gap-3 mb-8",children:[1,2,3,4,5].map(ce=>h.jsx("button",{onClick:()=>te(ce),className:"transition-transform hover:scale-110",children:h.jsx(Gd,{size:32,className:`${ce<=re?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},ce))}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:le,className:"flex-1 py-3 text-gray-500 font-bold hover:bg-gray-50 rounded-xl",children:"Skip"}),h.jsx("button",{onClick:Q,disabled:re===0,className:"flex-1 py-3 bg-mmt-red text-white font-bold rounded-xl shadow-lg hover:bg-red-700 disabled:opacity-50",children:"Submit"})]})]})})},Se=()=>{const j=new Date().toISOString().split("T")[0];let G=p.filter(Q=>Q.from===U.from&&Q.to===U.to&&Q.date===U.date&&Q.date>=j&&(!Q.status||Q.status==="OPEN"));G=G.filter(Q=>{var ce;return Q.totalSeats-(((ce=Q.bookedSeats)==null?void 0:ce.length)||0)>0}),fe.vehicleTypes.length>0&&(G=G.filter(Q=>fe.vehicleTypes.includes(Q.vehicleType))),fe.timeOfDay.length>0&&(G=G.filter(Q=>{const ce=parseInt(Q.time.split(":")[0]),Ne=Q.time.includes("PM")?"PM":"AM";let xe=ce;Ne==="PM"&&ce!==12&&(xe+=12),Ne==="AM"&&ce===12&&(xe=0);const nt=xe>=6&&xe<12,Fe=xe>=12&&xe<18,wt=xe>=18;return!!(fe.timeOfDay.includes("Morning")&&nt||fe.timeOfDay.includes("Afternoon")&&Fe||fe.timeOfDay.includes("Evening")&&wt)})),fe.minRating4Plus&&(G=G.filter(Q=>Q.rating>=4)),G.sort((Q,ce)=>{var wt,tn;const Ne=Q.totalSeats-(((wt=Q.bookedSeats)==null?void 0:wt.length)||0),xe=ce.totalSeats-(((tn=ce.bookedSeats)==null?void 0:tn.length)||0);if(Ne===1&&xe>1)return-1;if(xe===1&&Ne>1)return 1;if(fe.sortBy==="rating")return ce.rating-Q.rating;const nt=new Date(`${Q.date} ${Q.time}`).getTime(),Fe=new Date(`${ce.date} ${ce.time}`).getTime();return nt-Fe});const le=new Date(U.date).toLocaleDateString("en-GB",{day:"numeric",month:"short"}),re=Math.max(...p.map(Q=>Q.pricePerSeat),1e4),te=e.find(Q=>Q.status==="EN_ROUTE");return h.jsxs("div",{className:"bg-mmt-bg min-h-screen pb-24",children:[te&&h.jsx(IM,{}),h.jsx(wp,{title:`${U.from}  ${U.to}`,subtitle:`${le} | ${G.length} Cabs Available`,showBack:!0,onBack:()=>D("search"),onProfileClick:()=>D("profile")}),h.jsxs("div",{className:"bg-white py-2 px-4 shadow-sm mb-4",children:[h.jsx("div",{className:"flex gap-4 overflow-x-auto no-scrollbar",children:[-1,0,1,2].map(Q=>{const ce=new Date(U.date);ce.setDate(ce.getDate()+Q);const Ne=ce.toLocaleDateString("en-US",{weekday:"short"}),xe=ce.getDate(),nt=Q===0;return h.jsxs("button",{onClick:()=>oe({...U,date:ce.toISOString().split("T")[0]}),className:`flex flex-col items-center min-w-[3rem] ${nt?"text-[var(--pass-primary)]":"text-gray-500"} hover:bg-gray-50 rounded-lg transition p-1`,children:[h.jsx("span",{className:"text-xs font-bold uppercase",children:Ne}),h.jsx("span",{className:`text-lg font-bold ${nt?"border-b-2 border-[var(--pass-primary)]":""}`,children:xe})]},Q)})}),h.jsxs("div",{className:"flex gap-2 mt-3 overflow-x-auto no-scrollbar pb-1",children:[h.jsx("button",{onClick:()=>Oe({...fe,sortBy:"time"}),className:`px-3 py-1 rounded-full text-xs font-bold whitespace-nowrap border ${fe.sortBy==="time"?"bg-black text-white border-black":"bg-white text-gray-600 border-gray-200"}`,children:"Earliest First"}),h.jsx("button",{onClick:()=>Oe({...fe,sortBy:"rating"}),className:`px-3 py-1 rounded-full text-xs font-bold whitespace-nowrap border ${fe.sortBy==="rating"?"bg-black text-white border-black":"bg-white text-gray-600 border-gray-200"}`,children:"Top Rated"})]})]}),h.jsxs("div",{className:"px-4 space-y-4",children:[G.length===0&&h.jsxs("div",{className:"text-center py-10",children:[h.jsx("p",{className:"text-gray-500",children:"No cabs found matching your filters."}),h.jsx("button",{onClick:()=>de(!0),className:"text-mmt-blue font-bold text-sm mt-2",children:"Modify Filters"})]}),G.map(Q=>{const ce=gd.find(xe=>xe.type===Q.vehicleType)||gd[0],Ne=Q.totalSeats-(Q.bookedSeats?Q.bookedSeats.length:0);return h.jsxs("div",{className:"bg-white rounded-xl shadow-card overflow-hidden",children:[h.jsxs("div",{className:"p-4 flex gap-4",children:[h.jsxs("div",{className:"w-24 h-20 rounded-lg bg-gray-50 flex-shrink-0 overflow-hidden relative",children:[h.jsx("img",{src:Q.vehicleImage||ce.image,alt:Q.vehicleType,className:"w-full h-full object-cover"}),h.jsxs("div",{className:`absolute bottom-0 w-full text-white text-[9px] text-center py-0.5 font-bold
                      ${Ne>1?"bg-green-600":Ne===1?"bg-yellow-500":"bg-red-600"}
                    `,children:[Ne," Seats Left"]})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"flex justify-between items-start",children:h.jsxs("div",{children:[h.jsxs("h3",{className:"font-bold text-gray-800 text-base",children:[Q.vehicleType," ",h.jsx("span",{className:"font-black text-black uppercase",children:Q.vehicleNo})]}),h.jsxs("p",{className:"text-xs text-gray-500",children:[Q.driverName,"  ",h.jsxs("span",{className:"text-green-600 font-bold",children:[" ",Q.rating]})]}),h.jsxs("p",{className:"text-xs text-gray-500 font-mono mt-0.5",children:[h.jsx("span",{className:"font-bold",children:"Mob:"})," ",Q.driverMobile||Q.driverId]})]})}),h.jsx("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-600",children:h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("span",{className:"font-bold whitespace-nowrap",children:Q.time}),h.jsx("div",{className:"w-4 h-[1px] bg-gray-300 mx-1"}),h.jsxs("span",{className:"font-bold text-gray-800 whitespace-nowrap",children:[Q.from," ",h.jsx("span",{className:"text-gray-400",children:""})," ",Q.to]})]})})]})]}),h.jsx("div",{className:"border-t border-gray-100 flex",children:h.jsx("button",{disabled:Ne===0,onClick:()=>{k({...ce,...Q,price:Q.pricePerSeat}),A([]),D("seats")},className:`w-full font-bold text-sm py-3 transition ${Ne===0?"bg-gray-300 cursor-not-allowed text-gray-500":"bg-green-600 text-white hover:bg-green-700"}`,children:Ne===0?"SOLD OUT":"SELECT SEATS"})})]},Q.id)})]}),h.jsx("div",{className:"fixed bottom-0 w-full bg-white border-t border-gray-200 p-3 flex justify-center shadow-2xl z-40",children:h.jsxs("button",{onClick:()=>de(!0),className:"flex items-center gap-2 bg-gray-800 text-white px-6 py-3 rounded-full font-bold shadow-lg",children:[h.jsx(gM,{size:18})," Filter & Sort",(fe.vehicleTypes.length>0||fe.timeOfDay.length>0)&&h.jsx("span",{className:"w-2 h-2 bg-mmt-red rounded-full"})]})}),h.jsx(VM,{isOpen:ae,onClose:()=>de(!1),filters:fe,setFilters:Oe,maxPriceLimit:re})]})},Ve=()=>{if(!ge)return null;const{price:j,layout:G,seatPrices:le}=ge,re=ge.bookedSeats||[],te=ce=>{if(re.includes(ce)||ge.activeSeats&&!ge.activeSeats.includes(ce))return;const Ne=ge.totalSeats-re.length;if(I.includes(ce)){A(xe=>xe.filter(nt=>nt!==ce));return}if(I.length>=Ne){alert(`This ride has only ${Ne} seats available.`);return}A(xe=>[...xe,ce])},Q=(ce,Ne,xe)=>h.jsx("div",{className:"flex justify-center gap-8 mb-2",children:Array.from({length:ce}).map((nt,Fe)=>{const wt=Ne+Fe,tn=re.includes(wt),Bt=I.includes(wt),yn=ge.activeSeats?!ge.activeSeats.includes(wt):!1;return h.jsx("div",{className:"relative",children:h.jsx(Tp,{seatNum:wt,status:tn?"booked":yn?"unavailable":Bt?"selected":"available",onClick:()=>te(wt)})},wt)})});return h.jsxs("div",{className:"bg-mmt-bg min-h-screen flex flex-col",children:[h.jsx(wp,{title:ge.type,subtitle:`${ge.seats} Seater  AC`,showBack:!0,onBack:()=>D("results")}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col items-center",children:[h.jsxs("div",{className:"bg-white rounded-[3rem] shadow-xl border-4 border-gray-300 px-6 py-10 w-full max-w-[320px] relative mt-4",children:[h.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-40 h-2 bg-blue-100/50 rounded-b-xl"}),h.jsxs("div",{className:"flex justify-between gap-8 mb-6 border-b border-dashed border-gray-200 pb-4",children:[G[0]===1&&h.jsx("div",{className:"relative",children:h.jsx(Tp,{seatNum:1,status:re.includes(1)?"booked":ge.activeSeats&&!ge.activeSeats.includes(1)?"unavailable":I.includes(1)?"selected":"available",onClick:()=>te(1)})}),h.jsx(Tp,{status:"driver"})]}),h.jsx("div",{className:"space-y-4",children:G.slice(1).map((ce,Ne)=>{const xe=G.slice(0,Ne+1).reduce((nt,Fe)=>nt+Fe,0);return h.jsx("div",{children:Q(ce,1+xe)},Ne)})}),h.jsx("div",{className:"mt-8 text-center",children:h.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold",children:"Rear"})})]}),h.jsxs("div",{className:"flex gap-4 mt-6",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-4 h-4 rounded bg-[#E8DCCA] border border-[#C7B299]"}),h.jsx("span",{className:"text-xs text-gray-600",children:"Available"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-4 h-4 rounded bg-green-500"}),h.jsx("span",{className:"text-xs text-gray-600",children:"Selected"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-4 h-4 rounded bg-gray-300"}),h.jsx("span",{className:"text-xs text-gray-600",children:"Booked"})]})]})]}),h.jsxs("div",{className:"bg-white p-4 shadow-[0_-4px_20px_rgba(0,0,0,0.1)] z-20",children:[h.jsxs("div",{className:"flex justify-between items-center mb-3",children:[h.jsx("div",{className:"flex flex-col"}),h.jsxs("div",{className:"text-right",children:[h.jsxs("span",{className:"text-xs text-gray-500 font-bold uppercase block",children:[I.length," Seats"]}),h.jsx("span",{className:"font-bold text-mmt-red text-sm",children:I.join(", ")})]})]}),h.jsx("button",{disabled:I.length===0,onClick:async()=>{if(I.length>4){alert("Maximum 4 seats allowed per booking.");return}const ce=I.reduce((nt,Fe)=>nt+((le==null?void 0:le[Fe])||j),0);if(!window.confirm(`Confirm booking for ${I.length} seats?`))return;await n({date:U.date||new Date().toISOString().split("T")[0],time:ge.time||"00:00",from:U.from||"Unknown",to:U.to||"Unknown",seats:I,vehicleType:ge.type||ge.vehicleType||"Taxi",driverName:ge.driverName||"Driver",driverId:ge.driverId,driverMobile:ge.driverMobile||"",vehicleNo:ge.vehicleNo||"Unknown",cost:ce},ce,ge.id)&&(be(!0),setTimeout(()=>{be(!1),D("history")},2e3))},className:`w-full py-4 rounded-full font-bold text-lg transition-all shadow-lg
              ${I.length>0?"bg-[var(--pass-cta)] text-white hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:I.length===0?"SELECT SEATS":"BOOK NOW"})]})]})};return h.jsxs(h.Fragment,{children:[h.jsx(DM,{isOpen:q,onClose:()=>X(!1),onNavigate:j=>D(j)}),(()=>{switch(T){case"search":return h.jsx(se,{});case"results":return h.jsx(Se,{});case"seats":return h.jsx(Ve,{});case"history":return h.jsxs("div",{className:"bg-gray-50 min-h-screen pb-24",children:[h.jsx(wp,{title:"My Trips",onProfileClick:()=>D("profile")}),h.jsx("div",{className:"p-4",children:h.jsx(kM,{trips:e,onChat:j=>{R(j),D("chat")}})})]});case"chat":return C?h.jsx(UT,{tripId:C,onBack:()=>{R(null),D("history")}}):h.jsx(se,{});case"gemini-chat":return h.jsx(MM,{onBack:()=>D("profile")});case"edit-profile":return h.jsx(OM,{onBack:()=>D("profile")});case"profile":return h.jsx(qx,{onBack:()=>D("search"),onNavigate:j=>D(j)});case"wallet":return h.jsx(qx,{onBack:()=>D("search"),onNavigate:j=>D(j)});default:return h.jsx(se,{})}})(),(T==="search"||T==="history"||T==="profile"||T==="wallet")&&h.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 flex justify-around items-center z-[100] pb-6 rounded-t-[2rem] shadow-[0_-5px_20px_rgba(0,0,0,0.05)]",children:[h.jsxs("button",{onClick:()=>D("search"),className:`flex flex-col items-center gap-1 ${T==="search"?"text-pass-primary":"text-gray-400"}`,children:[h.jsx(OT,{size:24,fill:T==="search"?"currentColor":"none"}),h.jsx("span",{className:"text-[10px] font-bold",children:"Home"})]}),h.jsxs("button",{onClick:()=>D("history"),className:`flex flex-col items-center gap-1 ${T==="history"?"text-pass-primary":"text-gray-400"}`,children:[h.jsx(AO,{size:24,fill:T==="history"?"currentColor":"none"}),h.jsx("span",{className:"text-[10px] font-bold",children:"My Trips"})]}),h.jsxs("button",{onClick:()=>D("profile"),className:`flex flex-col items-center gap-1 ${T==="profile"||T==="wallet"?"text-pass-primary":"text-gray-400"}`,children:[h.jsx(ka,{size:24,fill:T==="profile"||T==="wallet"?"currentColor":"none"}),h.jsx("span",{className:"text-[10px] font-bold",children:"Account"})]})]}),we&&h.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white rounded-3xl p-8 text-center shadow-2xl transform scale-100 animate-in zoom-in-95 duration-200",children:[h.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(zo,{size:40,className:"text-green-600"})}),h.jsx("h2",{className:"text-2xl font-black text-gray-800 mb-2",children:"Booking Awaited"}),h.jsx("p",{className:"text-gray-500 font-medium",children:"Waiting for driver confirmation..."})]})}),M&&h.jsx(me,{tripId:M.tripId,driverName:M.driverName,onClose:()=>N(null)})]})};function LM(){const{user:s,updateUser:e,logout:n,deleteAccount:r,rideOffers:o,publishRide:c,trips:d,updateTripStatus:p,updateRideOffer:g,cancelRideOffer:y,completeRide:x,withdrawFromWallet:w,driverBalance:T}=xs(),[D,q]=ie.useState(!1),[X,U]=ie.useState(!1),[oe,ae]=ie.useState(null),[de,fe]=ie.useState(null),[Oe,ge]=ie.useState(!1),[k,I]=ie.useState("posted"),[A,C]=ie.useState("marketplace"),[R,M]=ie.useState(!1),[N,we]=ie.useState(null),[be,F]=ie.useState(!1),[se,me]=ie.useState({name:"",mobile:"",vehicleNo:"",vehicleType:""}),[Se,Ve]=ie.useState(!1),[j,G]=ie.useState("");ie.useEffect(()=>{be&&s&&(me({name:s.name,mobile:s.mobile,vehicleNo:s.vehicleNo||"",vehicleType:s.vehicleType||""}),Ve(!1),G(""))},[be,s]);const le=async()=>{if(window.confirm("CRITICAL WARNING: This will WIPE ALL DATA (Trips, Bookings, Wallet, Documents) for ALL USERS, keeping only Login Details. Are you sure?")){if(prompt("Enter admin password to confirm (type 'admin'):")!=="admin")return alert("Wrong password.");try{const Ae=await Pr(pn(Ge,"trips")),Re=await Pr(pn(Ge,"rideOffers")),ct=await Pr(pn(Ge,"users")),ue=[...Ae.docs.map(Te=>eg(Te.ref)),...Re.docs.map(Te=>eg(Te.ref)),...ct.docs.map(Te=>bn(Te.ref,{walletBalance:0,escrowBalance:0,documents:{},verificationStatus:"none",vehicleNo:Fh(),vehicleType:Fh(),profileImage:Fh()}))];await Promise.all(ue),alert("System Wiped: All trips, offers, and user data (except login) have been cleared."),window.location.reload()}catch(Ae){console.error("Error clearing data:",Ae),alert("Failed to clear data: "+Ae)}}},[re,te]=ie.useState({}),[Q,ce]=ie.useState({}),Ne=async(W,Ae)=>{if(s!=null&&s.uid){if(!["image/jpeg","image/jpg","image/pjpeg","image/png"].includes(W.type)){alert("Only JPG/JPEG/PNG files are allowed.");return}if(W.size>500*1024){alert("File size must be less than 500KB.");return}te(Re=>({...Re,[Ae]:!0}));try{const Re=Lx(Ux,`drivers/${s.uid}/documents/${Ae}.jpg`),ct={contentType:W.type},ue=new Promise((yt,Qe)=>{setTimeout(()=>Qe(new Error("Upload timed out.")),15e3)});await Promise.race([Vx(Re,W,ct),ue]);const Te=await Px(Re);ce(yt=>({...yt,[Ae]:Te}));const Me={...s==null?void 0:s.documents,...Q,[Ae]:Te};await e({documents:Me})}catch(Re){console.error("Upload failed:",Re),alert("Upload failed. Please try again.")}finally{te(Re=>({...Re,[Ae]:!1}))}}},xe=async W=>{if(W.target.files&&W.target.files[0]){const Ae=W.target.files[0];try{const Re=Lx(Ux,`users/${s==null?void 0:s.uid}/profile.jpg`),ct=await Vx(Re,Ae),ue=await Px(ct.ref);await e({profileImage:ue}),alert("Profile Picture Updated!")}catch(Re){console.error("Upload failed",Re),alert("Failed to upload profile picture.")}}},nt=async()=>{if(se.mobile!==(s==null?void 0:s.mobile)&&!Se){Ve(!0),alert("OTP sent to new mobile number: "+se.mobile);return}if(Se&&j!=="123456"){alert("Invalid OTP");return}await e({name:se.name,mobile:se.mobile,vehicleNo:se.vehicleNo,vehicleType:se.vehicleType}),alert("Profile Updated Successfully!"),F(!1),Ve(!1)},[Fe,wt]=ie.useState({from:"Leh",to:"Srinagar",date:new Date().toISOString().split("T")[0],time:"07:00 AM",price:0,totalSeats:7,vehicleType:"Toyota Innova",seatPrices:{},activeSeats:[]}),tn=d.filter(W=>W.driverId===(s==null?void 0:s.uid)||W.driverName===(s==null?void 0:s.name)),Bt=tn.filter(W=>W.status!=="COMPLETED"&&W.status!=="CANCELLED"),yn=tn.filter(W=>W.status==="COMPLETED"),mi=tn.filter(W=>W.status==="COMPLETED").reduce((W,Ae)=>W+Ae.cost,0);yn.filter(W=>new Date(W.date).toDateString()===new Date().toDateString()).reduce((W,Ae)=>W+Ae.cost,0);const Wr=ie.useMemo(()=>{const W=yn.filter(Re=>Re.userRating);return W.length===0?"New":(W.reduce((Re,ct)=>Re+(ct.userRating||0),0)/W.length).toFixed(1)},[yn]),jn=o.filter(W=>{var Ae;return W.totalSeats-(((Ae=W.bookedSeats)==null?void 0:Ae.length)||0)>0}).filter(W=>!W.status||W.status==="OPEN").filter(W=>{try{const[Ae,Re]=W.time.split(" "),[ct,ue]=Ae.split(":");let Te=parseInt(ct);Re==="PM"&&Te!==12&&(Te+=12),Re==="AM"&&Te===12&&(Te=0);const Me=new Date(W.date);return Me.setHours(Te,parseInt(ue),0,0),Me>new Date}catch{return!0}}).sort((W,Ae)=>{const Re=W.createdAt||0;return(Ae.createdAt||0)-Re}),Rt=o.filter(W=>{var Ae;return(W.driverId===(s==null?void 0:s.uid)||W.driverName===(s==null?void 0:s.name))&&W.totalSeats-(((Ae=W.bookedSeats)==null?void 0:Ae.length)||0)>0&&W.status!=="COMPLETED"&&W.status!=="CANCELLED"}),Vt=()=>{if(Bt.length+Rt.length>=10)return alert("You can only have a maximum of 10 active rides.");const[Ae,Re]=Fe.time.split(" "),[ct,ue]=Ae.split(":");let Te=parseInt(ct);Re==="PM"&&Te!==12&&(Te+=12),Re==="AM"&&Te===12&&(Te=0);const Me=new Date(Fe.date);Me.setHours(Te,parseInt(ue),0,0);const yt=new Date;if(yt.setHours(yt.getHours()+1),Me<yt)return alert("You must post rides at least 1 hour in advance.");if([...Bt,...Rt].some(St=>{const[ke,Hn]=St.time.split(" "),[An,gi]=ke.split(":");let _t=parseInt(An);Hn==="PM"&&_t!==12&&(_t+=12),Hn==="AM"&&_t===12&&(_t=0);const Fn=new Date(St.date);return Fn.setHours(_t,parseInt(gi),0,0),Math.abs(Me.getTime()-Fn.getTime())/36e5<1}))return alert("You have another ride scheduled within 1 hour.");c({vehicleNo:(s==null?void 0:s.vehicleNo)||"",vehicleType:Fe.vehicleType,from:Fe.from,to:Fe.to,date:Fe.date,time:Fe.time,pricePerSeat:Fe.price,totalSeats:Fe.totalSeats,activeSeats:Fe.activeSeats.length>0?Fe.activeSeats:Array.from({length:Fe.totalSeats},(St,ke)=>ke+1),seatPrices:Fe.seatPrices,driverName:s==null?void 0:s.name,driverId:s==null?void 0:s.uid,bookedSeats:[]}),q(!1),alert("Ride Published Successfully!"),C("my-rides")},qs=()=>{oe&&(g(oe.id,{from:oe.from,to:oe.to,date:oe.date,time:oe.time,pricePerSeat:oe.pricePerSeat,totalSeats:oe.totalSeats,activeSeats:oe.activeSeats,seatPrices:oe.seatPrices}),U(!1),ae(null),alert("Ride Updated Successfully!"))},ml=async(W,Ae)=>{await w(W)&&(alert(`Withdrawal request for ${W} sent successfully!`),ge(!1))};if(de)return h.jsx(UT,{tripId:de,onBack:()=>fe(null)});const $a=()=>h.jsxs("div",{className:"bg-[var(--driver-bg)] text-[var(--driver-text)] p-6 pt-6 rounded-b-[2rem] shadow-xl mb-6 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full translate-x-10 -translate-y-10 blur-xl"}),h.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-black/10 rounded-full -translate-x-5 translate-y-5 blur-lg"}),h.jsx("div",{className:"relative z-10 flex justify-between items-center mb-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("button",{onClick:()=>M(!0),className:"p-2 bg-white/10 rounded-lg hover:bg-white/20 transition",children:h.jsx(VT,{className:"text-white",size:24})}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var W;return(W=document.getElementById("profile-upload"))==null?void 0:W.click()},children:[h.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden border-2 border-white/30 shadow-md",children:h.jsx("img",{src:(s==null?void 0:s.profileImage)||"https://cdn-icons-png.flaticon.com/512/3135/3135715.png",alt:"Driver",className:"w-full h-full object-cover"})}),h.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsx(xp,{size:16,className:"text-white"})}),h.jsx("input",{type:"file",id:"profile-upload",className:"hidden",accept:"image/*",onChange:xe})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-baseline gap-2",children:[h.jsx("h1",{className:"font-bold text-xl drop-shadow-md leading-none text-white",children:s==null?void 0:s.name}),h.jsx("p",{className:"text-sm text-gray-300 font-medium",children:s==null?void 0:s.vehicleNo})]}),h.jsx("div",{className:"mt-1 bg-yellow-500/20 text-yellow-300 text-[10px] px-2 py-0.5 rounded-full inline-block border border-yellow-500/50",children:"v2.1 TAXI Optimized"})]})]})]})}),h.jsxs("button",{onClick:()=>{(s==null?void 0:s.verificationStatus)==="verified"?q(!0):(alert("Please upload your documents in the Profile section to verify your account before posting rides."),C("profile"))},className:"bg-[var(--driver-primary)] text-black px-4 py-2 rounded-xl font-bold text-sm shadow-lg hover:scale-105 transition flex items-center gap-2",children:[h.jsx(bp,{size:18})," New Ride"]})]}),cn=()=>{const[W,Ae]=ie.useState(null),Re=ie.useMemo(()=>{const ue=new Set;return jn.forEach(Te=>{ue.add(`${Te.from}-${Te.to}`)}),Array.from(ue)},[jn]),ct=ie.useMemo(()=>{if(!W)return jn;const[ue,Te]=W.split("-");return jn.filter(Me=>Me.from===ue&&Me.to===Te)},[W,jn]);return h.jsxs("div",{className:"px-4 pb-24 h-full flex flex-col md:flex-row gap-6",children:[h.jsx("div",{className:"hidden md:block w-64 shrink-0 space-y-6",children:h.jsxs("div",{className:"bg-[var(--driver-card)] p-5 rounded-2xl border border-gray-800",children:[h.jsx("h3",{className:"text-white font-bold mb-4 uppercase text-sm tracking-wider",children:"Route Filters"}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("button",{onClick:()=>Ae(null),className:`w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition ${W?"text-gray-400 hover:bg-gray-800":"bg-[var(--driver-primary)] text-black font-bold"}`,children:"All Routes"}),Re.map(ue=>{const Te=jn.filter(Me=>`${Me.from}-${Me.to}`===ue).length;return h.jsxs("button",{onClick:()=>Ae(ue),className:`w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition flex justify-between items-center ${W===ue?"bg-[var(--driver-primary)] text-black font-bold":"text-gray-400 hover:bg-gray-800"}`,children:[h.jsx("span",{children:ue.replace("-","  ")}),h.jsxs("span",{className:"text-xs opacity-70",children:["(",Te,")"]})]},ue)})]})]})}),h.jsxs("div",{className:"md:hidden flex overflow-x-auto gap-2 pb-2 no-scrollbar",children:[h.jsx("button",{onClick:()=>Ae(null),className:`shrink-0 px-4 py-2 rounded-full text-xs font-bold transition ${W?"bg-gray-800 text-gray-400 border border-gray-700":"bg-[var(--driver-primary)] text-black"}`,children:"All Routes"}),Re.map(ue=>h.jsx("button",{onClick:()=>Ae(ue),className:`shrink-0 px-4 py-2 rounded-full text-xs font-bold transition ${W===ue?"bg-[var(--driver-primary)] text-black":"bg-gray-800 text-gray-400 border border-gray-700"}`,children:ue.replace("-","  ")},ue))]}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h2",{className:"text-xl font-bold text-white",children:"Available Rides"}),h.jsx("p",{className:"text-gray-400 text-sm",children:W?`Showing rides for ${W.replace("-","  ")}`:"All posted rides"})]}),h.jsx("div",{className:"space-y-4",children:(W?ct:jn).length===0?h.jsxs("div",{className:"text-center py-12 px-8 bg-[var(--driver-card)] rounded-3xl border border-gray-800 opacity-50",children:[h.jsx(pd,{size:32,className:"text-gray-600 mx-auto mb-2"}),h.jsx("p",{className:"text-gray-500 text-sm",children:"No active rides found for this route."})]}):(W?ct:jn).map(ue=>h.jsx("div",{className:"bg-[var(--driver-card)] rounded-2xl p-0 border border-gray-800 overflow-hidden hover:border-gray-600 transition shadow-lg",children:h.jsxs("div",{className:"p-5 flex flex-col md:flex-row gap-4 justify-between items-center relative",children:[h.jsxs("div",{className:"flex items-center gap-6 w-full md:w-auto",children:[h.jsxs("div",{className:"text-center min-w-[60px]",children:[h.jsx("p",{className:"text-lg font-black text-white",children:ue.time.split(" ")[0]}),h.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase",children:ue.time.split(" ")[1]})]}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[h.jsx("span",{className:"text-sm font-bold text-gray-300",children:ue.from}),h.jsxs("div",{className:"h-[2px] w-12 bg-gray-700 flex items-center justify-center relative",children:[h.jsx("div",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full absolute -left-0.5"}),h.jsx("div",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full absolute -right-0.5"})]}),h.jsx("span",{className:"text-sm font-bold text-white",children:ue.to})]}),h.jsxs("p",{className:"text-xs text-[var(--driver-primary)] font-medium flex items-center gap-1",children:[h.jsx(kh,{size:10})," ",new Date(ue.date).toDateString()]})]})]}),h.jsxs("div",{className:"w-full md:w-auto flex items-center gap-3 bg-gray-800/30 px-3 py-2 rounded-lg border border-gray-700/50",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-gray-300",children:h.jsx(ka,{size:14})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-bold text-white",children:ue.vehicleNo}),h.jsxs("p",{className:"text-[10px] text-gray-400",children:[ue.driverName," \\u2022 ",ue.vehicleType]})]})]}),h.jsx("div",{className:"w-full md:w-auto flex items-center justify-between md:justify-end gap-6",children:h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-wider",children:"Seats"}),h.jsxs("p",{className:`text-lg font-black ${ue.totalSeats-ue.bookedSeats.length>0?"text-green-400":"text-red-400"}`,children:[ue.totalSeats-ue.bookedSeats.length," ",h.jsxs("span",{className:"text-xs text-gray-500 font-medium",children:["/ ",ue.totalSeats]})]})]})})]})},ue.id))})]})]})},pi=()=>{const W=o.filter(ue=>ue.driverName===(s==null?void 0:s.name)&&ue.bookedSeats.length===0);o.filter(ue=>ue.driverName===(s==null?void 0:s.name)&&ue.bookedSeats.length>0);const Ae=ue=>d.filter(Te=>Te.offerId===ue&&Te.status!=="CANCELLED"),Re=o.filter(ue=>{if(ue.driverName!==(s==null?void 0:s.name))return!1;const Te=Ae(ue.id);return!Te.some(Qe=>Qe.status==="BOOKED"||Qe.status==="WAITING_CONFIRMATION")&&ue.bookedSeats.length===0?!1:!Te.some(Qe=>Qe.status==="EN_ROUTE"||Qe.status==="ARRIVED"||Qe.status==="COMPLETED")}),ct=Bt.filter(ue=>ue.status==="EN_ROUTE"||ue.status==="ARRIVED");return h.jsxs("div",{className:"px-6 animate-in slide-in-from-right duration-300 pb-24",children:[h.jsxs("h2",{className:"font-bold text-[var(--driver-text)] mb-4 flex items-center gap-2 text-sm uppercase tracking-wide",children:[h.jsx(kh,{size:18,className:"text-[var(--driver-primary)]"})," My Rides"]}),h.jsx("div",{className:"flex p-1 bg-black/20 rounded-xl mb-6 overflow-x-auto no-scrollbar",children:["posted","completed"].map(ue=>h.jsx("button",{onClick:()=>I(ue),className:`flex-1 py-2 px-4 rounded-lg text-xs font-bold capitalize whitespace-nowrap transition-all ${k===ue?"bg-[var(--driver-primary)] text-black shadow-lg":"text-gray-400 hover:text-white"}`,children:ue},ue))}),k==="posted"&&h.jsxs("div",{className:"space-y-6",children:[h.jsx("h3",{className:"text-gray-400 text-sm font-bold uppercase mb-2",children:"My Active Rides"}),[...W,...Re,...ct].length===0?h.jsx("div",{className:"text-center py-12 bg-[var(--driver-card)] rounded-2xl border border-gray-800",children:h.jsx("p",{className:"text-gray-400 text-base",children:"No active rides."})}):h.jsx("div",{className:"space-y-8",children:[...ct,...Re,...W].filter((ue,Te,Me)=>Te===Me.findIndex(yt=>yt.id===ue.id)).map(ue=>{let Te=ue;if(ue.passengerId){const St=o.find(ke=>ke.id===ue.offerId);St&&(Te=St)}const Me=Ae(Te.id),yt=Me.some(St=>St.status==="EN_ROUTE"),Qe=Me.some(St=>St.status==="ARRIVED");return h.jsxs("div",{className:"bg-[var(--driver-card)] rounded-3xl shadow-lg p-6 border border-gray-800 relative overflow-hidden",children:[h.jsx("div",{className:`absolute top-0 left-0 w-2 h-full ${yt?"bg-orange-500":Qe?"bg-green-500":"bg-blue-500"}`}),h.jsxs("div",{className:"flex justify-between items-start mb-6 pl-2",children:[h.jsxs("div",{children:[h.jsx("div",{className:"mb-2",children:yt?h.jsx("span",{className:"bg-orange-900/40 text-orange-300 px-3 py-1 rounded-lg text-xs font-bold uppercase tracking-wider",children:"In Progress"}):Qe?h.jsx("span",{className:"bg-green-900/40 text-green-300 px-3 py-1 rounded-lg text-xs font-bold uppercase tracking-wider",children:"Arrived"}):Me.length>0?h.jsxs("span",{className:"bg-green-900/40 text-green-300 px-3 py-1 rounded-lg text-xs font-bold uppercase tracking-wider",children:["Active (",Me.length," Booked)"]}):h.jsx("span",{className:"bg-blue-900/40 text-blue-300 px-3 py-1 rounded-lg text-xs font-bold uppercase tracking-wider",children:"Open"})}),h.jsxs("h3",{className:"font-bold text-white text-3xl mb-2",children:[Te.from," \\u2192 ",Te.to]}),h.jsxs("p",{className:"text-base text-gray-300",children:[new Date(Te.date).toDateString()," \\u2022 ",Te.time]})]}),h.jsx("div",{className:"text-right",children:h.jsx("button",{onClick:()=>{ae(Te),U(!0)},className:"text-xs bg-gray-700 px-4 py-2 rounded-xl text-white mt-3 hover:bg-gray-600 font-bold transition-colors",children:"Edit Details"})})]}),h.jsxs("div",{className:"bg-black/30 rounded-2xl p-5 mb-6 space-y-3",children:[h.jsx("h4",{className:"text-gray-400 text-xs font-bold uppercase mb-3 tracking-wider",children:"Seat Status"}),h.jsx("div",{className:"space-y-3",children:Array.from({length:Te.totalSeats},(St,ke)=>ke+1).map(St=>{const ke=Me.find(An=>An.seats&&An.seats.includes(St)),Hn=!!ke;return h.jsxs("div",{className:"flex items-center justify-between bg-[var(--driver-bg)]/60 p-4 rounded-xl border border-gray-700/50 hover:border-gray-600 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-5",children:[h.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg shadow-inner ${Hn?(ke==null?void 0:ke.status)==="WAITING_CONFIRMATION"?"bg-gradient-to-br from-yellow-600 to-amber-800 text-white shadow-yellow-900/50":"bg-gradient-to-br from-green-600 to-emerald-800 text-white shadow-green-900/50":"bg-gradient-to-br from-red-500 to-rose-700 text-white shadow-red-900/50"}`,children:St}),h.jsxs("div",{children:[h.jsx("p",{className:`text-base font-bold mb-1 ${Hn?(ke==null?void 0:ke.status)==="WAITING_CONFIRMATION"?"text-yellow-400":"text-green-400":"text-red-400"}`,children:Hn?(ke==null?void 0:ke.status)==="WAITING_CONFIRMATION"?"Approval Needed":"Booked":"Available"}),Hn?h.jsxs("div",{className:"flex flex-col gap-0.5",children:[h.jsx("span",{className:"text-sm text-white font-medium",children:(ke==null?void 0:ke.passengerName)||(ke==null?void 0:ke.passengerId)}),h.jsxs("span",{className:"text-xs text-gray-400 font-mono tracking-wide",children:["+91 ",(ke==null?void 0:ke.passengerMobile)||"N/A"]}),(ke==null?void 0:ke.status)==="WAITING_CONFIRMATION"&&h.jsx("span",{className:"text-[10px] text-yellow-400 font-bold uppercase mt-1 animate-pulse",children:"Waiting Confirmation"})]}):h.jsx("span",{className:"text-sm text-gray-500",children:"Empty Seat"})]})]}),h.jsx("div",{children:Hn?(ke==null?void 0:ke.status)==="WAITING_CONFIRMATION"?h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>p(ke.id,"CONFIRMED"),className:"px-3 py-2 bg-green-600/20 text-green-400 rounded-lg border border-green-600/30 font-bold text-xs uppercase hover:bg-green-600/30 transition",children:"Confirm"}),h.jsx("button",{onClick:()=>p(ke.id,"CANCELLED"),className:"px-3 py-2 bg-red-600/20 text-red-400 rounded-lg border border-red-600/30 font-bold text-xs uppercase hover:bg-red-600/30 transition",children:"Reject"})]}):(ke==null?void 0:ke.status)==="CONFIRMED"?h.jsx("span",{className:"text-xs text-green-400 font-bold uppercase border border-green-400/30 px-3 py-2 rounded-lg bg-green-400/10",children:"Confirmed"}):h.jsx("a",{href:`tel:${ke==null?void 0:ke.passengerMobile}`,className:"p-3 bg-green-900/20 text-green-400 rounded-xl hover:bg-green-900/40 inline-flex items-center justify-center transition-colors",children:h.jsx(dy,{size:20})}):h.jsx("button",{onClick:()=>{g(Te.id,{totalSeats:Te.totalSeats-1})},className:"text-xs text-red-400 hover:text-red-200 font-bold px-4 py-2 bg-red-900/10 rounded-lg border border-red-900/30 transition-colors uppercase tracking-wide",children:"Cancel"})})]},St)})})]}),h.jsxs("div",{className:"flex flex-wrap gap-3",children:[!yt&&!Qe&&Me.length>0&&h.jsxs("button",{onClick:()=>{Me.forEach(St=>p(St.id,"EN_ROUTE")),I("posted")},className:"flex-1 bg-green-600 text-white py-4 rounded-xl font-bold text-base shadow-lg hover:bg-green-700 transition flex items-center justify-center gap-2",children:["Start Ride ",h.jsx(il,{size:20})]}),yt&&h.jsxs("button",{onClick:()=>{Me.forEach(St=>x(St.id))},className:"flex-1 bg-green-600 text-white py-4 rounded-xl font-bold text-base shadow-lg hover:bg-green-700 transition flex items-center justify-center gap-2",children:["Finish Ride ",h.jsx(zo,{size:20})]}),Qe&&h.jsxs("div",{className:"flex-1 bg-gray-800 text-gray-400 py-4 rounded-xl font-bold text-sm text-center border border-gray-700 flex items-center justify-center gap-2",children:[h.jsx(zo,{size:18})," Ride Completed"]}),h.jsx("button",{onClick:()=>{confirm("Are you sure you want to cancel this ENTIRE ride offer?")&&y(Te.id)},className:`px-4 py-4 rounded-xl font-bold text-sm transition flex items-center justify-center gap-2 ${Me.length===0?"bg-red-900/20 text-red-500 w-full hover:bg-red-900/30":"bg-gray-800 text-gray-400 hover:bg-red-900/20 hover:text-red-500"}`,children:Me.length===0?"Cancel Ride":h.jsx(ig,{size:20})})]})]},Te.id)})})]}),k==="completed"&&h.jsx("div",{className:"space-y-4",children:yn.length===0?h.jsx("div",{className:"text-center py-8 bg-[var(--driver-card)] rounded-2xl border border-gray-800",children:h.jsx("p",{className:"text-gray-400 text-xs text-center",children:"No completed rides history."})}):yn.map(ue=>h.jsxs("div",{className:"bg-[var(--driver-card)] p-4 rounded-2xl shadow-sm border border-gray-800 flex flex-col gap-3 opacity-90 hover:opacity-100 transition",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsxs("h4",{className:"font-bold text-white mb-1",children:[ue.from," \\u2192 ",ue.to]}),h.jsxs("p",{className:"text-xs text-gray-400 font-medium flex items-center gap-1",children:[h.jsx(kh,{size:10})," ",new Date(ue.date).toDateString()]})]}),h.jsx("div",{className:"text-right",children:h.jsx("span",{className:"text-[10px] bg-green-900/30 text-green-400 px-2.5 py-1 rounded-lg font-bold border border-green-900/50",children:"COMPLETED"})})]}),h.jsxs("div",{className:"bg-black/20 p-3 rounded-xl border border-white/5",children:[h.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-wider mb-2",children:"Patient/Passenger Details"}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsxs("p",{className:"text-sm font-bold text-white flex items-center gap-2",children:[h.jsx(ka,{size:14,className:"text-[var(--driver-primary)]"})," ",ue.passengerName||"Unknown"]}),h.jsx("p",{className:"text-xs text-gray-400 pl-6",children:ue.id.slice(0,8).toUpperCase()})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-sm font-bold text-white tracking-wide",children:ue.passengerMobile||"N/A"}),h.jsx("p",{className:"text-[10px] text-gray-500",children:"Mobile"})]})]})]})]},ue.id))})]})},Jr=()=>{const W=Bt.reduce((Re,ct)=>Re+ct.cost,0),Ae=T;return h.jsxs("div",{className:"px-6 animate-in slide-in-from-right duration-300 pb-24",children:[h.jsxs("h2",{className:"font-bold text-[var(--driver-text)] mb-4 flex items-center gap-2 text-sm uppercase tracking-wide",children:[h.jsx(Oh,{size:18,className:"text-[var(--driver-primary)]"})," My Wallet"]}),h.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-black p-6 rounded-3xl shadow-lg border border-gray-700 mb-6 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[var(--driver-primary)]/10 rounded-full blur-2xl -mr-10 -mt-10"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Available Balance"}),h.jsxs("h1",{className:"text-4xl font-black text-white mb-4",children:["\\u20B9 ",Ae.toLocaleString()]}),h.jsxs("div",{className:"flex gap-4 mb-6",children:[h.jsxs("div",{className:"flex-1 bg-white/5 rounded-xl p-3 border border-white/10",children:[h.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Pending Payouts"}),h.jsxs("p",{className:"text-lg font-bold text-yellow-400",children:["\\u20B9 ",W.toLocaleString()]})]}),h.jsxs("div",{className:"flex-1 bg-white/5 rounded-xl p-3 border border-white/10",children:[h.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Total Earned"}),h.jsxs("p",{className:"text-lg font-bold text-green-400",children:["\\u20B9 ",mi.toLocaleString()]})]})]}),h.jsxs("button",{onClick:()=>ge(!0),className:"w-full bg-[var(--driver-primary)] text-black py-3 rounded-xl font-bold shadow-lg hover:scale-[1.02] transition flex items-center justify-center gap-2",children:[h.jsx(Oh,{size:18})," Withdraw Funds"]})]})]}),h.jsx("h3",{className:"font-bold text-white mb-4 text-sm uppercase tracking-wide",children:"Recent Transactions"}),h.jsx("div",{className:"space-y-4",children:yn.length===0?h.jsx("div",{className:"text-center py-8 bg-[var(--driver-card)] rounded-2xl border border-gray-800",children:h.jsx("p",{className:"text-gray-400 text-xs",children:"No transactions yet."})}):yn.slice(0,10).map(Re=>h.jsxs("div",{className:"bg-[var(--driver-card)] p-4 rounded-2xl shadow-sm border border-gray-800 flex justify-between items-center",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-green-900/20 flex items-center justify-center text-green-400",children:h.jsx(EO,{size:18,className:"-rotate-45"})}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-white text-sm",children:"Ride Payment"}),h.jsxs("p",{className:"text-[10px] text-gray-400",children:[new Date(Re.date).toDateString()," \\u2022 ",Re.from," \\u2192 ",Re.to]})]})]}),h.jsxs("span",{className:"font-bold text-green-400",children:["+ \\u20B9",Re.cost]})]},Re.id))})]})},Zr=()=>{var W,Ae;return h.jsxs("div",{className:"px-6 animate-in slide-in-from-right duration-300 pb-20",children:[h.jsxs("div",{className:"bg-[var(--driver-card)] rounded-3xl p-6 shadow-sm border border-gray-800 mb-6 relative",children:[h.jsx("button",{className:"absolute top-6 right-6 p-2 bg-gray-800 rounded-lg text-[var(--driver-primary)] hover:bg-gray-700 transition",onClick:()=>F(!0),children:h.jsx(xp,{size:16})}),h.jsx("h3",{className:"font-bold text-lg text-white mb-4",children:"Vehicle Details"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-between border-b border-gray-700 pb-2",children:[h.jsx("span",{className:"text-gray-400 text-sm",children:"Vehicle Number"}),h.jsx("span",{className:"font-bold text-white",children:s==null?void 0:s.vehicleNo})]}),h.jsxs("div",{className:"flex justify-between border-b border-gray-700 pb-2",children:[h.jsx("span",{className:"text-gray-400 text-sm",children:"Vehicle Type"}),h.jsx("span",{className:"font-bold text-white",children:s==null?void 0:s.vehicleType})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-400 text-sm",children:"Driver Name"}),h.jsx("span",{className:"font-bold text-white",children:s==null?void 0:s.name})]})]})]}),h.jsxs("div",{className:"bg-[var(--driver-card)] rounded-3xl p-6 shadow-sm border border-gray-800 mb-6 relative",children:[h.jsx("button",{className:"absolute top-6 right-6 p-2 bg-gray-800 rounded-lg text-[var(--driver-primary)] hover:bg-gray-700 transition",onClick:()=>F(!0),children:h.jsx(xp,{size:16})}),h.jsx("h3",{className:"font-bold text-lg text-white mb-4",children:"Personal Info"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-between border-b border-gray-700 pb-2",children:[h.jsx("span",{className:"text-gray-400 text-sm",children:"Mobile"}),h.jsxs("span",{className:"font-bold text-white",children:["+91 ",s==null?void 0:s.mobile]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-400 text-sm",children:"Member Since"}),h.jsx("span",{className:"font-bold text-white",children:new Date((s==null?void 0:s.createdAt)||Date.now()).toLocaleDateString()})]})]})]}),h.jsx("h3",{className:"font-bold text-white mb-4 text-sm uppercase tracking-wide",children:"Performance Stats"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[h.jsxs("div",{className:"bg-gray-900 rounded-2xl p-4 border border-gray-800",children:[h.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Trips Completed"}),h.jsx("p",{className:"text-2xl font-bold text-white",children:yn.length})]}),h.jsxs("div",{className:"bg-gray-900 rounded-2xl p-4 border border-gray-800",children:[h.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Pass. Rating"}),h.jsxs("div",{className:"flex items-center gap-1 text-yellow-400",children:[h.jsx(Gd,{size:16,fill:"currentColor"}),h.jsx("span",{className:"text-2xl font-bold text-white",children:Wr})]})]})]}),h.jsxs("div",{className:"bg-[var(--driver-card)] rounded-3xl p-6 shadow-sm border border-gray-800 mb-6",children:[h.jsx("h3",{className:"font-bold text-lg text-white mb-4",children:"My Documents"}),h.jsx("div",{className:"space-y-4",children:h.jsxs("div",{className:"p-4 bg-black/20 rounded-xl border border-gray-700/50",children:[h.jsxs("div",{className:"flex justify-between items-center mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(kT,{className:"text-[var(--driver-primary)]",size:20}),h.jsx("span",{className:"font-bold text-white text-sm",children:"Vehicle Photo (Side)"})]}),Q.vehicleSide||(W=s==null?void 0:s.documents)!=null&&W.vehicleSide?h.jsx(zo,{className:"text-green-500",size:18}):h.jsx("span",{className:"text-xs text-orange-400 font-bold bg-orange-900/20 px-2 py-1 rounded",children:"Required"})]}),re.vehicleSide?h.jsx("div",{className:"text-center py-2",children:h.jsx(Ia,{className:"animate-spin mx-auto text-[var(--driver-primary)]",size:20})}):Q.vehicleSide||(Ae=s==null?void 0:s.documents)!=null&&Ae.vehicleSide?h.jsxs("div",{className:"mt-2 text-xs text-green-400 flex items-center gap-1",children:[h.jsx(DO,{size:12})," File Uploaded"]}):h.jsxs("label",{className:"block w-full text-center py-3 bg-[var(--driver-primary)]/10 text-[var(--driver-primary)] rounded-xl text-xs font-bold cursor-pointer hover:bg-[var(--driver-primary)]/20 transition border border-dashed border-[var(--driver-primary)]/30",children:["Upload Photo",h.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Re=>Re.target.files&&Ne(Re.target.files[0],"vehicleSide")})]})]})}),h.jsx("button",{onClick:()=>{var Re;(Re=s==null?void 0:s.documents)!=null&&Re.vehicleSide?(e({verificationStatus:"verified"}),alert("Documents submitted! You can now post rides.")):alert("Please upload Vehicle Photo first.")},className:`w-full py-4 rounded-xl font-bold mt-6 shadow-lg transition flex items-center justify-center gap-2 ${(s==null?void 0:s.verificationStatus)==="verified"?"bg-green-600 text-white cursor-default":"bg-white text-black hover:bg-gray-200"}`,children:(s==null?void 0:s.verificationStatus)==="verified"?h.jsxs(h.Fragment,{children:[h.jsx(zo,{size:20})," Verified Driver"]}):"Submit for Verification"})]}),h.jsxs("button",{onClick:n,className:"w-full bg-gray-800 text-gray-300 py-4 rounded-xl font-bold hover:bg-gray-700 transition flex items-center justify-center gap-2 mb-4",children:[h.jsx(Fd,{size:18})," Sign Out"]}),h.jsxs("button",{onClick:le,className:"w-full bg-red-900/20 text-red-500 py-4 rounded-xl font-bold hover:bg-red-900/30 transition flex items-center justify-center gap-2",children:[h.jsx(ig,{size:18})," Reset All Data (Dev)"]})]})};return h.jsxs("div",{className:"bg-black min-h-screen font-sans text-white pb-24",children:[h.jsx($a,{}),A==="marketplace"&&h.jsx(cn,{}),A==="my-rides"&&h.jsx(pi,{}),A==="wallet"&&h.jsx(Jr,{}),A==="profile"&&h.jsx(Zr,{}),h.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-black/90 backdrop-blur-md border-t border-gray-800 p-4 pb-6 z-40",children:h.jsxs("div",{className:"flex justify-around items-center max-w-lg mx-auto bg-gray-900/80 rounded-full p-2 border border-gray-800 shadow-2xl",children:[h.jsx("button",{onClick:()=>C("marketplace"),className:`p-3 rounded-full transition-all duration-300 ${A==="marketplace"?"bg-[var(--driver-primary)] text-black scale-110 shadow-lg shadow-[var(--driver-primary)]/20":"text-gray-400 hover:text-white"}`,children:h.jsx(OT,{size:22,fill:A==="marketplace"?"currentColor":"none"})}),h.jsx("button",{onClick:()=>C("my-rides"),className:`p-3 rounded-full transition-all duration-300 ${A==="my-rides"?"bg-[var(--driver-primary)] text-black scale-110 shadow-lg shadow-[var(--driver-primary)]/20":"text-gray-400 hover:text-white"}`,children:h.jsx(kh,{size:22,fill:A==="my-rides"?"currentColor":"none"})}),h.jsx("button",{onClick:()=>C("wallet"),className:`p-3 rounded-full transition-all duration-300 ${A==="wallet"?"bg-[var(--driver-primary)] text-black scale-110 shadow-lg shadow-[var(--driver-primary)]/20":"text-gray-400 hover:text-white"}`,children:h.jsx(Oh,{size:22,fill:A==="wallet"?"currentColor":"none"})}),h.jsx("button",{onClick:()=>C("profile"),className:`p-3 rounded-full transition-all duration-300 ${A==="profile"?"bg-[var(--driver-primary)] text-black scale-110 shadow-lg shadow-[var(--driver-primary)]/20":"text-gray-400 hover:text-white"}`,children:h.jsx(ka,{size:22,fill:A==="profile"?"currentColor":"none"})})]})}),A==="marketplace"&&h.jsx("button",{onClick:()=>q(!0),className:"fixed bottom-24 right-6 bg-[var(--driver-primary)] text-black p-4 rounded-full shadow-2xl hover:scale-105 transition z-40 animate-in zoom-in duration-300 border-2 border-black",children:h.jsx(bp,{size:24,strokeWidth:3})}),D&&h.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-[#1a1a1a] text-white w-full max-w-md rounded-3xl p-6 shadow-2xl border border-gray-800 relative",children:[h.jsx("button",{onClick:()=>q(!1),className:"absolute top-4 right-4 p-2 bg-gray-800 rounded-full hover:bg-gray-700 text-gray-400 transition",children:h.jsx(Dr,{size:20})}),h.jsxs("h3",{className:"text-2xl font-bold mb-6 flex items-center gap-3",children:[h.jsx(bp,{className:"text-[var(--driver-primary)]"})," Post New Ride"]}),h.jsxs("div",{className:"space-y-5",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"From"}),h.jsx("select",{value:Fe.from,onChange:W=>wt({...Fe,from:W.target.value}),className:"w-full bg-black border border-gray-700 p-4 rounded-xl font-bold focus:border-[var(--driver-primary)] focus:outline-none transition",children:["Leh","Kargil","Srinagar","Jammu","Drass"].map(W=>h.jsx("option",{value:W,children:W},W))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"To"}),h.jsx("select",{value:Fe.to,onChange:W=>wt({...Fe,to:W.target.value}),className:"w-full bg-black border border-gray-700 p-4 rounded-xl font-bold focus:border-[var(--driver-primary)] focus:outline-none transition",children:["Leh","Kargil","Srinagar","Jammu","Drass"].map(W=>h.jsx("option",{value:W,children:W},W))})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Date"}),h.jsx("input",{type:"date",value:Fe.date,onChange:W=>wt({...Fe,date:W.target.value}),className:"w-full bg-black border border-gray-700 p-4 rounded-xl font-bold focus:border-[var(--driver-primary)] focus:outline-none transition text-white scheme-dark",min:new Date().toISOString().split("T")[0]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Time"}),h.jsx("select",{value:Fe.time,onChange:W=>wt({...Fe,time:W.target.value}),className:"w-full bg-black border border-gray-700 p-4 rounded-xl font-bold focus:border-[var(--driver-primary)] focus:outline-none transition",children:Array.from({length:24}).map((W,Ae)=>{const Re=Ae%12||12,ct=Ae<12?"AM":"PM",ue=`${Re.toString().padStart(2,"0")}:00 ${ct}`;return h.jsx("option",{value:ue,children:ue},ue)})})]})]}),h.jsx("div",{className:"bg-yellow-900/20 p-4 rounded-xl border border-yellow-700/30 text-yellow-500 text-xs font-mono",children:"Market prices are fixed for this route."}),h.jsx("button",{onClick:Vt,className:"w-full bg-[var(--driver-primary)] text-black py-4 rounded-xl font-bold text-lg shadow-lg hover:bg-[#e6c200] transition transform active:scale-95",children:"Publish Ride"})]})]})}),X&&oe&&h.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-[#1a1a1a] text-white w-full max-w-md rounded-3xl p-6 shadow-2xl border border-gray-800 relative",children:[h.jsx("button",{onClick:()=>U(!1),className:"absolute top-4 right-4 p-2 bg-gray-800 rounded-full hover:bg-gray-700 text-gray-400 transition",children:h.jsx(Dr,{size:20})}),h.jsx("h3",{className:"text-xl font-bold mb-6",children:"Edit Ride"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Date"}),h.jsx("input",{type:"date",value:oe.date,onChange:W=>ae({...oe,date:W.target.value}),className:"w-full bg-black border border-gray-700 p-3 rounded-xl font-bold text-white scheme-dark",min:new Date().toISOString().split("T")[0]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Time"}),h.jsx("select",{value:oe.time,onChange:W=>ae({...oe,time:W.target.value}),className:"w-full bg-black border border-gray-700 p-3 rounded-xl font-bold",children:Array.from({length:24}).map((W,Ae)=>{const Re=Ae%12||12,ct=Ae<12?"AM":"PM",ue=`${Re.toString().padStart(2,"0")}:00 ${ct}`;return h.jsx("option",{value:ue,children:ue},ue)})})]})]}),h.jsx("button",{onClick:qs,className:"w-full bg-blue-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:bg-blue-700 transition mt-4",children:"Update Ride"})]})]})}),Oe&&h.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-[#1a1a1a] text-white w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-gray-800 relative",children:[h.jsx("button",{onClick:()=>ge(!1),className:"absolute top-4 right-4 p-2 bg-gray-800 rounded-full hover:bg-gray-700 text-gray-400 transition",children:h.jsx(Dr,{size:20})}),h.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[h.jsx(Oh,{size:20})," Withdraw"]}),h.jsxs("p",{className:"text-gray-400 text-sm mb-6",children:["Enter amount to withdraw from your available balance of \\u20B9",T,"."]}),h.jsxs("form",{onSubmit:W=>{W.preventDefault();const Ae=Number(W.target.amount.value);if(Ae>T)return alert("Insufficient balance");ml(Ae)},children:[h.jsx("input",{name:"amount",type:"number",placeholder:"Enter Amount",className:"w-full bg-black border border-gray-700 p-4 rounded-xl font-bold text-xl mb-4 focus:border-[var(--driver-primary)] outline-none",max:T,min:100,required:!0}),h.jsx("button",{type:"submit",className:"w-full bg-[var(--driver-primary)] text-black py-4 rounded-xl font-bold shadow-lg hover:bg-[#e6c200] transition",children:"Send Request"})]})]})}),be&&h.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white text-black w-full max-w-sm rounded-3xl p-6 shadow-2xl relative",children:[h.jsx("button",{onClick:()=>F(!1),className:"absolute top-4 right-4 p-2 bg-gray-100 rounded-full hover:bg-gray-200",children:h.jsx(Dr,{size:20})}),h.jsx("h3",{className:"text-xl font-bold mb-6",children:"Edit Profile"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Full Name"}),h.jsx("input",{type:"text",value:se.name,onChange:W=>me({...se,name:W.target.value}),className:"w-full bg-gray-100 p-3 rounded-xl font-bold border-none focus:ring-2 focus:ring-[var(--driver-primary)]"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Vehicle Number"}),h.jsx("input",{type:"text",value:se.vehicleNo,onChange:W=>me({...se,vehicleNo:W.target.value}),className:"w-full bg-gray-100 p-3 rounded-xl font-bold border-none focus:ring-2 focus:ring-[var(--driver-primary)]"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Vehicle Type"}),h.jsx("select",{className:"w-full bg-gray-100 p-3 rounded-xl font-bold border-none focus:ring-2 focus:ring-[var(--driver-primary)]",value:se.vehicleType,onChange:W=>me({...se,vehicleType:W.target.value}),children:Object.keys(NM).map(W=>h.jsx("option",{value:W,children:W},W))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Mobile Number"}),h.jsx("input",{type:"tel",value:se.mobile,onChange:W=>me({...se,mobile:W.target.value}),className:"w-full bg-gray-100 p-3 rounded-xl font-bold border-none focus:ring-2 focus:ring-[var(--driver-primary)]"}),se.mobile!==(s==null?void 0:s.mobile)&&h.jsxs("p",{className:"text-[10px] text-orange-500 mt-1 font-bold flex items-center gap-1",children:[h.jsx(jT,{size:10})," Verification required"]})]}),Se&&h.jsxs("div",{className:"animate-in slide-in-from-top duration-300",children:[h.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Enter OTP (Mock: 123456)"}),h.jsx("input",{type:"text",value:j,onChange:W=>G(W.target.value),className:"w-full bg-yellow-50 p-3 rounded-xl font-bold border-2 border-yellow-400 text-center tracking-widest text-xl",placeholder:"XXXXXX"})]}),h.jsx("button",{onClick:nt,className:"w-full bg-black text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:bg-gray-800 transition mt-4",children:Se?"Verify & Update":"Save Changes"})]})]})})]})}const UM=()=>{const{logout:s}=xs(),[e,n]=ie.useState("users"),[r,o]=ie.useState([]),[c,d]=ie.useState([]),[p,g]=ie.useState(!0);ie.useEffect(()=>{(async()=>{g(!0);try{const D=(await Pr(pn(Ge,"users"))).docs.map(U=>({uid:U.id,...U.data()}));o(D);const X=(await Pr(pn(Ge,"trips"))).docs.map(U=>({id:U.id,...U.data()}));d(X)}catch(T){console.error("Error fetching admin data",T)}finally{g(!1)}})()},[]);const y=r.filter(w=>w.role==="passenger"),x=r.filter(w=>w.role==="owner");return h.jsxs("div",{className:"min-h-screen bg-gray-100 flex",children:[h.jsxs("div",{className:"w-64 bg-gray-900 text-white p-6 flex flex-col",children:[h.jsxs("div",{className:"mb-10",children:[h.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Ladakh",h.jsx("span",{className:"text-mmt-red",children:"Connect"})]}),h.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-widest mt-1",children:"Admin Panel"})]}),h.jsxs("nav",{className:"flex-1 space-y-2",children:[h.jsxs("button",{onClick:()=>n("users"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition ${e==="users"?"bg-mmt-red text-white shadow-lg":"text-gray-400 hover:bg-gray-800"}`,children:[h.jsx(TM,{size:20})," Users"]}),h.jsxs("button",{onClick:()=>n("trips"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition ${e==="trips"?"bg-mmt-red text-white shadow-lg":"text-gray-400 hover:bg-gray-800"}`,children:[h.jsx(ZO,{size:20})," Trips"]})]}),h.jsxs("button",{onClick:s,className:"flex items-center gap-3 px-4 py-3 bg-[#E02E49] text-black font-bold rounded-xl hover:bg-red-600 transition shadow-lg",children:[h.jsx(Fd,{size:20})," Logout"]})]}),h.jsxs("div",{className:"flex-1 p-8 overflow-y-auto",children:[h.jsxs("header",{className:"flex justify-between items-center mb-8",children:[h.jsxs("h2",{className:"text-2xl font-bold text-gray-800 capitalize",children:[e," Overview"]}),h.jsxs("div",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-sm border border-gray-200",children:[h.jsx(PT,{size:16,className:"text-gray-400"}),h.jsx("input",{type:"text",placeholder:"Search...",className:"bg-transparent outline-none text-sm"})]})]}),p?h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-mmt-red"})}):h.jsxs(h.Fragment,{children:[e==="users"&&h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[h.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[h.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"})," Passengers (",y.length,")"]}),h.jsx("div",{className:"space-y-4",children:y.map(w=>h.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 rounded-xl transition",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-full flex items-center justify-center text-blue-600 font-bold",children:w.name.charAt(0)}),h.jsxs("div",{children:[h.jsx("p",{className:"font-bold text-gray-800",children:w.name}),h.jsx("p",{className:"text-xs text-gray-500",children:w.mobile})]})]},w.uid))})]}),h.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[h.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[h.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})," Drivers (",x.length,")"]}),h.jsx("div",{className:"space-y-4",children:x.map(w=>h.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 rounded-xl transition",children:[h.jsx("div",{className:"w-10 h-10 bg-green-50 rounded-full flex items-center justify-center text-green-600 font-bold",children:w.name.charAt(0)}),h.jsxs("div",{children:[h.jsx("p",{className:"font-bold text-gray-800",children:w.name}),h.jsxs("p",{className:"text-xs text-gray-500",children:[w.vehicleType,"  ",w.vehicleNo]})]})]},w.uid))})]})]}),e==="trips"&&h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:h.jsxs("tr",{children:[h.jsx("th",{className:"p-4 text-xs font-bold text-gray-400 uppercase",children:"Route"}),h.jsx("th",{className:"p-4 text-xs font-bold text-gray-400 uppercase",children:"Date"}),h.jsx("th",{className:"p-4 text-xs font-bold text-gray-400 uppercase",children:"Driver"}),h.jsx("th",{className:"p-4 text-xs font-bold text-gray-400 uppercase",children:"Status"}),h.jsx("th",{className:"p-4 text-xs font-bold text-gray-400 uppercase",children:"Amount"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-50",children:c.map(w=>h.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[h.jsxs("td",{className:"p-4 font-bold text-gray-800",children:[w.from,"  ",w.to]}),h.jsx("td",{className:"p-4 text-sm text-gray-500",children:new Date(w.date).toLocaleDateString()}),h.jsx("td",{className:"p-4 text-sm text-gray-600",children:w.driverName}),h.jsx("td",{className:"p-4",children:h.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase
                            ${w.status==="COMPLETED"?"bg-green-100 text-green-700":w.status==="BOOKED"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}
                          `,children:w.status})}),h.jsxs("td",{className:"p-4 font-bold text-gray-800",children:[" ",w.cost]})]},w.id))})]}),c.length===0&&h.jsx("div",{className:"p-8 text-center text-gray-400",children:"No trips found."})]})]})]})]})},zM=()=>{const{user:s}=xs();return s?s.role==="admin"?h.jsx(UM,{}):s.role==="passenger"?h.jsx(PM,{}):h.jsx(LM,{}):h.jsx(RM,{})};function BM(){return h.jsx(mO,{children:h.jsx(zM,{})})}const zT=document.getElementById("root");if(!zT)throw new Error("Could not find root element to mount to");const qM=RA.createRoot(zT);qM.render(h.jsx(bA.StrictMode,{children:h.jsx(BM,{})}));
